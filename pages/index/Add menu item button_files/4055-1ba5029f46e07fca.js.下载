try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="55ea9713-2f77-4faf-9557-c9703da13f33",e._sentryDebugIdIdentifier="sentry-dbid-55ea9713-2f77-4faf-9557-c9703da13f33")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4055],{3424:(e,t,a)=>{async function s(e){let t,a="CaptureController"in window?new CaptureController:null;null==a||a.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:a})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let s=document.createElement("video");s.srcObject=t,await new Promise((e,t)=>{s.onloadedmetadata=()=>{s.play().then(e,t)}});let n=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(s.videoWidth,e.width),e.height/Math.min(s.videoHeight,e.height));n.width=s.videoWidth*t,n.height=s.videoHeight*t}else n.width=s.videoWidth,n.height=s.videoHeight;let l=n.getContext("2d");if(!l)throw Error("Could not create 2D context");l.drawImage(s,0,0,n.width,n.height);let i=n.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:i}}a.d(t,{U_:()=>w,pi:()=>k,$V:()=>M,Cn:()=>b});var n=a(74813),l=a(45054),i=a(11930),r=a(2e3),o=a(69287),d=a(10369),c=a(86141),u=a(79052),m=a(36016),p=a(42605),h=a(88775),x=a(4114),f=a(11717),g=a(88801),y=a(49629),v=a(55134);let b=e=>{let{setMcpDirectoryModalIsOpen:t,setStyleModalOpenWithScreen:a,setCreateProjectModalIsOpen:s,setGithubModalIsOpen:n,setGmailAuthModalIsOpen:l,setCreatePromptArgumentModalIsOpen:r}=e,o=_(),d=k(),c=M(),p=(0,v.y)(),{openFeaturePreviewModal:h}=(0,f.go)(),{checkIsGithubAuthenticated:x,initGithubAuth:g}=(0,m.nB)(),{initDriveAuth:y}=(0,u.cI)();return{onAddScreenshot:()=>{o()},openGithubModal:()=>{x().then(e=>{if(!e)return void g();n(!0)})},openGmailAuthModal:()=>{l(!0)},openMcpDirectoryModal:()=>{t(!0)},initDriveAuth:y,createDriveSyncSource:j(),onStyleChange:e=>{d(e)},openStyleModal:()=>{a(i.I.LIST)},onSelectProject:c,onCreateProject:e=>{s({isOpen:!0,moveAttachments:e})},onSelectBeamChat:p,openFeaturePreviewModal:h,onEnterPromptArguments:(e,t)=>{r({isOpen:!0,serverUuid:e,prompt:t})}}},j=()=>{let{addError:e}=(0,l.Y)(),{setIsUploadingDriveSync:t,setSyncSourceUuids:a}=(0,p.o)(),{mutate:s}=(0,c.EF)({onMutate:()=>{t(!0)},onSuccess:e=>{t(!1),a(t=>[...t,e.uuid])},onError:a=>{t(!1),e((0,y.J)(a),{error:a})},meta:{noToast:!0}});return e=>s({sync_source_type:r.v8.GDRIVE,sync_source_config:{uri:e}})},w=e=>{var t;null==(t=document.getElementById("chat-input-file-upload-".concat(e)))||t.click()},M=()=>{let e=(0,h.QN)(),{setProjectUuid:t}=(0,p.o)();return a=>{e===a?t(void 0):t(a)}},_=()=>{let{addError:e}=(0,l.Y)(),t=(0,d.A)(),{handleUpload:a}=(0,p.o)(),i=(0,n.st)();return async()=>{i.track({event_key:"claudeai.plus_menu.screenshot_clicked"});let n=null;try{n=await s({width:1568,height:1568})}catch(a){(0,o.Cp)(a),e(t.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}),{error:a})}if(!n)return;let l=new File([await fetch(n.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await a([l])}},k=()=>{let{setPersonalizedStyle:e}=(0,p.o)(),t=(0,n.st)(),{personalizedStyleOptions:a,setStoredStyle:s}=(0,x.p)();return n=>{let l=a.find(e=>e.key===n);if(!l)return;e(l);let i=(0,g.X)(l);s({styleKey:i,timestamp:new Date}),t.track({event_key:"styles.selected",style_key:i})}}},5690:(e,t,a)=>{a.d(t,{Kk:()=>j});var s=a(54568),n=a(64328),l=a(58720),i=a(23812),r=a(84617),o=a(2e3),d=a(91073),c=a(43692),u=a(72902),m=a(7620),p=a(59666),h=a(10369),x=a(13644),f=a(45538),g=a(85492),y=a(15848);let v=(0,s.jsx)(p.A,{defaultMessage:"Everyone in your organization can view and use this project",id:"o6dyBu92Ad"}),b=(0,s.jsx)(p.A,{defaultMessage:"Only invited members can view and use this project",id:"r65HKpZU8I"});function j(e){var t,a,j,w,M,_;let{syncSources:k=[],onProjectCreated:A,onError:N,onCancel:C,strings:S}=e,E=(0,h.A)(),I=(0,n.mV)(),T=(0,y.AI)(),{customInstructions:D,type:O,subtype:L}=null!=T?T:{},[R,P]=(0,m.useState)({name:"",description:null!=(t=S.createProjectDescriptionDefault)?t:"",type:O,subtype:L,is_private:!0}),[z,F]=(0,m.useState)({}),[U,G]=(0,m.useState)(!1),Y=k.length>0,B=k.some(e=>e.type===o.v8.GITHUB),H=k.some(e=>e.type===o.v8.GDRIVE),W=B&&H?(0,s.jsx)(p.A,{defaultMessage:"Github and GDrive attachments can only be added to private projects",id:"rqNebqAfPF"}):B?(0,s.jsx)(p.A,{defaultMessage:"Github attachments can only be added to private projects",id:"eyujXWQfg4"}):H?(0,s.jsx)(p.A,{defaultMessage:"GDrive attachments can only be added to private projects",id:"DMBgAV43lL"}):(0,s.jsx)(p.A,{defaultMessage:"Some of these attachments can only be added to private projects",id:"2ssKO1VReL"}),{mutateAsync:V}=(0,f.bL)(),{activeOrganization:K}=(0,n.YL)(),{data:q}=(0,f.BN)(),{data:X,isLoading:$}=(0,f.PL)(),{data:J}=(0,x.q)(),Z=J&&!Y,Q=!$&&(null==X?void 0:X.count)===0,ee=e=>t=>{P(a=>({...a,[e]:t.target.value})),F(t=>({...t,[e]:null}))},et=e=>{P(t=>({...t,is_private:e.target.checked&&"private"===e.target.value}))},ea=async e=>{if(e.preventDefault(),!U&&(()=>{let e={};return""===R.name.trim()&&(e.name=E.formatMessage({defaultMessage:"Project name is required",id:"n5cqkMmIMW"})),F(e),0===Object.keys(e).length})()){G(!0);try{let e={...R};D&&(e.prompt_template=D.replaceAll("{{PROJECT_NAME}}",R.name));let t=await V(e);A(t)}catch(e){N(e)}finally{G(!1)}}};return(0,s.jsxs)("form",{className:"grid grid-cols-1 gap-4",onSubmit:e=>ea(e),children:[Q&&!T&&(0,s.jsxs)("div",{className:"bg-bg-300 border-border-400/10 text-text-300 flex w-full flex-col items-start justify-start gap-2 rounded-xl border px-5 pb-5 pt-4 text-sm",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 font-medium",children:(0,s.jsx)(p.A,{defaultMessage:"How to use projects",id:"moKJkVk/qB"})}),I?(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(p.A,{defaultMessage:"Use Projects with your team to do things like:",id:"fcUpqajVgl"})}),(0,s.jsxs)("ul",{className:"list-disc pl-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(p.A,{defaultMessage:"Query and analyze information about customers, sales calls, and project plans",id:"1YyB53/KOc"})}),(0,s.jsx)("li",{children:(0,s.jsx)(p.A,{defaultMessage:"Upload files from your codebase to understand, improve, and contribute",id:"HXj87AQH0P"})}),(0,s.jsx)("li",{children:(0,s.jsx)(p.A,{defaultMessage:"Generate analysis and reports from one consistent set of materials",id:"3XvEQYrcUv"})}),(0,s.jsx)("li",{children:(0,s.jsx)(p.A,{defaultMessage:"Create content informed by company policies and documentation",id:"HrODk029zr"})})]}),(0,s.jsx)("p",{children:(0,s.jsx)(p.A,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{children:(0,s.jsx)(p.A,{defaultMessage:"Projects help organize your work and leverage knowledge across multiple conversations. Upload docs, code, and files to create themed collections that Claude can reference again and again.",id:"7HFalNigyO"})}),(0,s.jsx)("p",{children:(0,s.jsx)(p.A,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}),q&&(0,s.jsx)("div",{children:(0,s.jsx)(p.A,{defaultMessage:"Curious to learn more? <link>Try an example project</link>",id:"+AcqvUzRry",values:{link:e=>(0,s.jsx)(r.Y,{href:"/project/".concat(q),children:e})}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.ks,{autoFocus:!0,name:"name",className:"w-full",label:null!=(a=S.createProjectNameLabel)?a:E.formatMessage({defaultMessage:"What are you working on?",id:"R2IogQsIBI"}),placeholder:null!=(j=S.createProjectNamePlaceholder)?j:E.formatMessage({defaultMessage:"Name your project",id:"BtIbm/e/WX"}),size:"lg",onChange:ee("name"),error:!!z.name,"data-1p-ignore":!0}),z.name&&(0,s.jsx)("div",{className:"text-danger-000 mt-1 text-right text-xs font-medium",children:z.name})]}),!T&&(0,s.jsx)("div",{children:(0,s.jsx)(l.fs,{name:"description",className:"w-full",label:null!=(w=S.createProjectDescriptionLabel)?w:E.formatMessage({defaultMessage:"What are you trying to achieve?",id:"RPsTh+NBxY"}),placeholder:null!=(M=S.createProjectDescriptionPlaceholder)?M:E.formatMessage({defaultMessage:"Describe your project, goals, subject, etc...",id:"WStTnUWlP8"}),minRows:3,onChange:ee("description"),error:z.description})}),I?(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("div",{className:"mb-2 text-sm font-medium",children:(0,s.jsx)(p.A,{defaultMessage:"Visibility",id:"JAkIqbzRj5"})}),(0,s.jsxs)("label",{className:(0,u.A)("mb-2 flex w-full gap-2",!Z&&"opacity-40"),children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"open",checked:!R.is_private,onChange:et,disabled:!Z}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(d.m,{size:16,className:"-mt-1 mr-1 inline-block"}),null!=(_=null==K?void 0:K.name)?_:(0,s.jsx)(p.A,{defaultMessage:"Organization",id:"K56Dims7Up"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:J?Y?W:v:(0,s.jsx)(p.A,{defaultMessage:"Public projects are disabled by your organization",id:"c2HBgZtgDR"})})]})]}),(0,s.jsxs)("label",{className:"flex w-full gap-2",children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"private",checked:R.is_private,onChange:et}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(c.W,{size:16,className:"-mt-1 mr-1 inline-block"}),(0,s.jsx)(p.A,{defaultMessage:"Private",id:"viXE3205/2"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:b})]})]})]}):null,(0,s.jsx)("div",{className:"mt-2 flex justify-end",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.$,{onClick:C,href:C?void 0:"/projects",variant:"secondary",disabled:U,children:(0,s.jsx)(p.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(g.i,{children:(0,s.jsx)(i.$,{type:"submit",loading:U,children:(0,s.jsx)(p.A,{defaultMessage:"Create project",id:"VUN1K7kSzC"})})})]})})]})}},6149:(e,t,a)=>{a.d(t,{q:()=>o});var s=a(54568),n=a(18868),l=a(72902),i=a(7620),r=a(88775);let o=e=>{let{children:t,actionButton:a,title:o,minimalUi:d,dangerText:c}=e,{hasBlockingWarning:u,setHasBlockingWarning:m}=(0,r.Tc)(e=>({hasBlockingWarning:e.hasBlockingWarning,setHasBlockingWarning:e.setHasBlockingWarning}),"BlockingWarning");return(0,i.useEffect)(()=>(m(!0),()=>{m(!1)}),[u,m]),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsxs)("div",{className:(0,l.A)("flex flex-row items-center gap-2 md:w-full",c?"text-danger-000":d?"text-text-300":"text-danger-000"),children:[d?null:(0,s.jsx)(n.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsxs)("div",{children:[o&&(0,s.jsx)("div",{className:"text-sm font-medium",children:o}),(0,s.jsx)("div",{className:"text-sm",children:t})]})]}),!!a&&(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:a})]})})}},9596:(e,t,a)=>{a.d(t,{$z:()=>o,cY:()=>r});var s=a(1613),n=a(64328),l=a(68067),i=a(66365);function r(){let e=(0,i.useLayer)("frontend"),{value:t}=(0,l.fS)("chat_suggestion_chips_enabled"),a=e.get("chat_suggestion_chips",!1);return t||a}function o(e){let{mutateAsync:t,enabled:a}=function(){let{activeOrganization:e}=(0,n.YL)(),{value:t}=(0,l.fS)("chat_autocomplete"),a=(0,s.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/dust/chat_autocomplete"),"POST",{enabled:t,onError:()=>{console.warn("Failed to fetch completion")},meta:{noToast:!0}});return{mutateAsync:a.mutateAsync,isPending:a.isPending,isIdle:a.isIdle,enabled:t}}();return{fetchInputAutocompletion:async s=>{if(!a||!e)return"";let[n,l]=(await t({conversationUuid:null!=e?e:"",prompt:s})).prompt.split("\n").map(e=>e.trim());return"Yes"===n?" "===s[s.length-1]?l||"":" "+(l||""):"No"===n&&l||""}}}},11717:(e,t,a)=>{a.d(t,{TW:()=>S,go:()=>C,wU:()=>N});var s=a(54568),n=a(94295),l=a(32049),i=a(34003),r=a(74813),o=a(64328),d=a(45054),c=a(84284),u=a(21266),m=a(3075),p=a(73996),h=a(13910),x=a(68067),f=a(99969),g=a.n(f),y=a(32536),v=a(7620),b=a(59666),j=a(10369),w=a(24407);let M=w.z.object({title:w.z.string(),description:w.z.string(),shortDescription:w.z.string().optional(),titleKey:w.z.string().optional(),descriptionKey:w.z.string().optional(),shortDescriptionKey:w.z.string().optional()}),_=w.z.object({preview_feature_uses_artifacts:M.optional(),preview_feature_uses_latex:M.optional(),preview_feature_uses_citations:M.optional(),enabled_artifacts_attachments:M.optional(),enabled_turmeric:M.optional(),enabled_gdrive:M.optional(),enabled_bananagrams:M.optional(),enabled_web_search:M.optional(),enabled_sourdough:M.optional(),enabled_foccacia:M.optional(),enabled_monkeys_in_a_barrel:M.optional()}),k={},A=(0,v.createContext)({openFeaturePreviewModal:g()}),N=e=>{let{children:t}=e,[a,n]=(0,v.useState)(!1);return(0,s.jsxs)(A.Provider,{value:{openFeaturePreviewModal:()=>n(!0)},children:[t,(0,s.jsx)(m.aF,{modalSize:"xl",isOpen:a,onClose:()=>n(!1),hasCloseButton:!0,title:(0,s.jsx)(b.A,{defaultMessage:"Feature preview",id:"3H/t1552xG"}),children:(0,s.jsx)(S,{})})]})},C=()=>(0,v.useContext)(A);function S(e){let{includeTitle:t}=e,a=function(){let e=(0,x.T9)("fp_menu","features",k,_),{value:t,source:a}=(0,l.N)({}),{preview_feature_uses_artifacts:s,enabled_artifacts_attachments:n,preview_feature_uses_latex:i,enabled_monkeys_in_a_barrel:r,enabled_turmeric:o,...d}=e,c={...d};return t&&"experiment"===a&&s||(c.enabled_artifacts_attachments=n),r&&(c.enabled_monkeys_in_a_barrel=r),c}(),i=Object.keys(a).length>0,{account:r}=(0,o.YL)(),{mutate:d}=(0,n.Jy)(),c=(0,v.useRef)(!1);if((0,v.useEffect)(()=>{if(!(null==r?void 0:r.settings)||c.current)return;c.current=!0;let e=r.settings.enabled_monkeys_in_a_barrel,t=r.settings.preview_feature_uses_artifacts,a=r.settings.enabled_artifacts_attachments;e&&!t&&d({...r.settings,preview_feature_uses_artifacts:!0}),e&&a&&d({...r.settings,enabled_artifacts_attachments:!1})},[null==r?void 0:r.settings,d]),!i)return;let u=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.eE,{id:"feature-preview",children:(0,s.jsx)(b.A,{defaultMessage:"Preview and provide feedback on upcoming enhancements to our platform. Please note: experimental features might influence Claude’s behavior and some interactions may differ from the standard experience.",id:"TJ0Nj7aQ5C"})}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:Object.entries(a).map((e,t)=>{let[a,n]=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[t>0&&(0,s.jsx)("div",{className:"border-t border-border-300"}),(0,s.jsx)(E,{label:a,...n})]},a)})})]});return t?(0,s.jsxs)(p.XY,{children:[(0,s.jsx)(p.F9,{children:(0,s.jsx)(b.A,{defaultMessage:"Experimental",id:"GOx7x4mbZd"})}),u]}):u}function E(e){var t;let{label:a,...l}=e,m=(0,j.A)(),{track:p}=(0,r.st)(),{addSuccess:x}=(0,d.Y)(),{account:f}=(0,o.YL)(),{mutate:g}=(0,n.Jy)(),{checked:w}=I(a),M=(0,i.t5)(),_="enabled_monkeys_in_a_barrel"===a&&!M,k=(0,v.useCallback)(()=>{if(!f||_)return;p({event_key:"claudeai.settings.preview_feature.toggled",account_uuid:f.uuid,feature_id:a,action:!0===w?"disable":"enable"});let e=!w;if(x(m.formatMessage({defaultMessage:"{title} {action}",id:"XuGv50sPs9"},{title:l.title,action:w?"disabled":"enabled"})),e){var t,s,n;if("enabled_monkeys_in_a_barrel"===a){let e=null==(t=f.settings)?void 0:t.enabled_artifacts_attachments,a=[];e&&a.push("Analysis Tool"),a.length>0&&x(m.formatMessage({defaultMessage:"Automatically disabled: {features}",id:"7StJBCedWA"},{features:a.join(", ")})),(null==(s=f.settings)?void 0:s.preview_feature_uses_artifacts)||x(m.formatMessage({defaultMessage:"Automatically enabled: Artifacts",id:"v5zt5SRUyk"}))}else"enabled_artifacts_attachments"===a&&(null==(n=f.settings)?void 0:n.enabled_monkeys_in_a_barrel)&&x(m.formatMessage({defaultMessage:"Automatically disabled: Files feature",id:"8T9PGQkYRT"}))}g({...f.settings,[a]:e,..."enabled_monkeys_in_a_barrel"===a&&e&&{enabled_artifacts_attachments:!1,preview_feature_uses_artifacts:!0},..."enabled_artifacts_attachments"===a&&e&&{enabled_monkeys_in_a_barrel:!1}})},[f,p,a,w,x,m,l.title,g,_]);return(0,s.jsxs)("div",{className:"flex flex-row w-full gap-4 items-start",children:[(0,s.jsx)(y.default,{src:"/images/feature-preview/square/".concat(null!=(t=T[a])?t:"generic",".png"),style:{objectFit:"cover",width:62,height:62},className:"rounded-lg border border-border-300",width:248,height:248,alt:m.formatMessage({defaultMessage:"Preview image of feature",id:"6VliGZPeZA"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 flex-grow",children:[(0,s.jsx)("h3",{className:"text-text-100 font-base-bold",id:"feature-".concat(a,"-title"),children:l.titleKey?(0,s.jsx)(u.X5,{id:l.titleKey}):l.title}),(0,s.jsx)("p",{className:"text-text-300 font-base",children:l.descriptionKey?(0,s.jsx)(u.X5,{id:l.descriptionKey}):l.description}),"enabled_monkeys_in_a_barrel"===a&&(0,s.jsx)("span",{className:"text-xs text-text-500",children:(0,s.jsx)(b.A,{defaultMessage:"This feature gives Claude network access to create and analyze files, which has security risks. Monitor chats closely when using this feature.",id:"lRBrGrai48"})})]}),(0,s.jsx)("label",{className:"cursor-pointer mt-2",children:(0,s.jsx)(h.Tooltip,{tooltipContent:_?(0,s.jsx)(b.A,{defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"}):"enabled_monkeys_in_a_barrel"===a?(0,s.jsx)(b.A,{defaultMessage:"This is an upgrade to the analysis tool. It does not support versioning or remixing of Artifacts.",id:"OT4Z/tnKXZ"}):null,children:(0,s.jsx)("div",{children:(0,s.jsx)(c.j,{checked:!!w,onChange:k,"aria-labelledby":"feature-".concat(a,"-title"),disabled:_},a)})})})]})}let I=e=>{var t,a,s,n,r,d,c,u,m;let{account:p}=(0,o.YL)(),{value:h,source:x}=(0,l.N)(null!=(r=null==p?void 0:p.settings)?r:{}),f=(0,i.u9)(),g=null!=(d=null==p||null==(t=p.settings)?void 0:t.enabled_monkeys_in_a_barrel)?d:f,y=null!=(c=null==p||null==(a=p.settings)?void 0:a.preview_feature_uses_artifacts)&&c,v="flag"===x&&h||null!=(u=null==p||null==(s=p.settings)?void 0:s.enabled_artifacts_attachments)&&u;return"enabled_monkeys_in_a_barrel"===e?{checked:g}:"enabled_artifacts_attachments"===e?{checked:v}:"preview_feature_uses_artifacts"===e?{checked:y}:{checked:null!=(m=null==p||null==(n=p.settings)?void 0:n[e])&&m}},T={preview_feature_uses_artifacts:"artifacts",preview_feature_uses_latex:"latex",preview_feature_uses_citations:"generic",enabled_artifacts_attachments:"analyse",enabled_turmeric:"turmeric",enabled_gdrive:"google-drive",enabled_web_search:"web-search",enabled_bananagrams:"bananagrams",enabled_foccacia:"foccacia",enabled_sourdough:"sourdough",enabled_monkeys_in_a_barrel:"wiggle"}},11930:(e,t,a)=>{a.d(t,{I:()=>s});var s=function(e){return e.CREATE="create",e.CREATE_MANUALLY="create_manually",e.LIST="list",e.EDIT="edit",e}({})},13982:(e,t,a)=>{a.d(t,{D:()=>r,MessageLimitModalProvider:()=>o});var s=a(54568),n=a(7620),l=a(2722);let i=null;function r(){i&&i(!0)}function o(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>(i=t,()=>{i=null}),[]),(0,s.jsx)(l.v,{isOpen:e,onClose:()=>t(!1),limitType:"message_limit"})}},15912:(e,t,a)=>{a.d(t,{V:()=>r});var s=a(54568);a(19736),a(96614),a(86545),a(64328);var n=a(63911),l=a(22147);a(68067),a(10665);var i=a(93220);a(88775);let r=e=>{let{anchorRef:t,canShowNux:a,text:r,id:o,nuxItem:d,side:c,align:u="center"}=e,{shouldShow:m,dismiss:p}=(0,i.z)(o,d);return m&&a?(0,s.jsx)(l.U,{side:c,anchorRef:t,onClose:p,accentColor:"secondary",introDelay:.5,align:u,children:(0,s.jsxs)("div",{className:"flex flex-row gap-2 min-w-[13rem]",children:[(0,s.jsx)(n.g5,{}),(0,s.jsx)("p",{className:"whitespace-normal",children:r})]})}):null}},16256:(e,t,a)=>{a.d(t,{A:()=>s});let s={snappyOut:[.19,1,.22,1],inOutQuart:[.77,0,.175,1],outCirc:[.075,.82,.165,1],inOutBase:[.25,.1,.25,1]}},18800:(e,t,a)=>{a.d(t,{V:()=>o});var s=a(54568);a(2e3);var n=a(7620),l=a(86141),i=a(88775),r=a(46868);function o(e){let{uuid:t,syncSource:a,onRemove:o,isEditable:d}=e,{mutateAsync:c}=(0,l.Ql)(),u=(0,n.useCallback)(()=>{c(t),null==o||o()},[c,t,o]),{projectUuid:m}=(0,i.lE)();return(0,s.jsx)(r.br,{location:"chat",projectUuid:m,syncSource:a,handleRemove:d?u:void 0,isEditable:d})}},18849:(e,t,a)=>{a.d(t,{_:()=>c,x:()=>d});var s=a(54568),n=a(18088),l=a(27541),i=a(7620),r=a(91755);let o=(0,i.createContext)({isDrawerExpanded:!1,setIsDrawerExpanded:()=>void 0});function d(){return(0,i.useContext)(o)}function c(e){let{children:t,conversationUuid:a}=e,d=function(e){let t=!!(0,l.useSearchParams)().get("controls")&&!(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches),[a]=(0,n.Vc)("".concat(e,":chatControlsSidebarIsOpen"),t);return a}(a),{isExpanded:c,setIsExpanded:u}=(0,r.V)(),[m,p]=(0,i.useState)(d),h=(0,i.useRef)({reopenMain:!1}),x=(0,i.useCallback)(e=>{e&&(c&&(h.current.reopenMain=!0),u(!1)),!e&&h.current.reopenMain&&(h.current.reopenMain=!1,u(!0)),p(e)},[c,u,p]),f=(0,i.useMemo)(()=>({isDrawerExpanded:m,setIsDrawerExpanded:x}),[m,x]);return(0,s.jsx)(o.Provider,{value:f,children:t})}},19920:(e,t,a)=>{a.d(t,{s:()=>c});var s=a(54568),n=a(63911),l=a(47592),i=a(95617),r=a(72902),o=a(10369),d=a(95839);let c=e=>{let{path:t,inputMenuSearchQuery:a,setInputMenuSearchQuery:c,handleBack:u,className:m}=e,p=(0,o.A)(),h=(0,l.fJ)(),x={[i.xd.DRIVE]:p.formatMessage({defaultMessage:"Search Google Drive",id:"1bbXc6Z3S1"}),[i.xd.PROJECTS]:p.formatMessage({defaultMessage:"Search projects",id:"doPT7U8q21"}),[i.xd.STYLES]:p.formatMessage({defaultMessage:"Search styles",id:"9oQ0JkPwFY"})},f=t&&t in x?x[t]:p.formatMessage({defaultMessage:"Search menu",id:"lL4HM3zEqr"}),g=null===t||!!a.trim().length;return(0,s.jsxs)("div",{className:(0,r.A)("flex flex-row items-center gap-2.5 px-1.5 w-full rounded-md h-[2rem]",m),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,s.jsx)(n.vj,{className:(0,r.A)("text-text-500/50 transition-opacity",g?"opacity-100":"opacity-0")})}),(0,s.jsx)("button",{onClick:u,className:(0,r.A)("transition-opacity text-text-500 hover:text-text-100 absolute left-0 top-0",g?"opacity-0":"opacity-100"),disabled:g,children:(0,s.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,s.jsx)(n.nk,{})})})]}),(0,s.jsx)("input",{autoFocus:!h,id:d.I,className:"block bg-transparent hide-focus-ring leading-6 placeholder:text-text-500/70 font-base text-text-300 w-full",placeholder:f,value:a,onChange:e=>c(e.target.value)})]})}},22147:(e,t,a)=>{a.d(t,{U:()=>d});var s=a(54568),n=a(23812),l=a(72902),i=a(61295),r=a(7620);let o={FROM_ANCHOR:8,POINTER_OFFSET:26,POINTER_HEIGHT:16},d=e=>{let{anchorRef:t,children:a,side:d,align:u="center",accentColor:m="default",onClose:p,className:h,introDelay:x=0,spacing:f={},buttonText:g,onClickButton:y}=e,v={...o,...f},b=(0,r.useRef)(null),[j,w]=(0,r.useState)(d),[M,_]=(0,r.useState)(u);(0,r.useEffect)(()=>{if(!b.current||!t.current)return;let e=()=>{let{current:e}=b,{current:a}=t;if(!e||!a)return;let s=a.getBoundingClientRect(),n=e.getBoundingClientRect(),l=window.innerWidth,i=window.innerHeight,r=j,o=M,d=0,c=0,u=()=>{d="top"===r?s.top-n.height-v.FROM_ANCHOR:"bottom"===r?s.bottom+v.FROM_ANCHOR:s.top-v.POINTER_OFFSET+.5*s.height-.5*v.POINTER_HEIGHT},m=()=>{if("left"===r)c=s.left-n.width-v.FROM_ANCHOR;else if("right"===r)c=s.right+v.FROM_ANCHOR;else switch(o){case"start":c=s.left-v.FROM_ANCHOR;break;case"center":c=s.left+(s.width-n.width)/2;break;case"end":c=s.right-n.width+v.FROM_ANCHOR}};u(),m(),c<0?"top"===r||"bottom"===r?o="start":r="bottom":c+n.width>l&&("top"===r||"bottom"===r?o="end":r="bottom"),d<0?r="bottom":d+n.height>i&&(r="top"),u(),m(),e.style.top="".concat(d,"px"),e.style.left="".concat(c,"px"),r!==j&&w(r),o!==M&&_(o)};e();let a=new ResizeObserver(e);t.current&&(a.observe(t.current),t.current.parentElement&&a.observe(t.current.parentElement));let s=e=>{if(p){var t;(null==(t=b.current)?void 0:t.contains(e.target))||p()}};return window.addEventListener("resize",e),window.addEventListener("scroll",e),document.addEventListener("click",s,{capture:!0}),()=>{a.disconnect(),window.removeEventListener("resize",e),window.removeEventListener("scroll",e),document.removeEventListener("click",s,{capture:!0})}},[j,M,t,p,v.FROM_ANCHOR,v.POINTER_HEIGHT,v.POINTER_OFFSET]);let k={};switch(j){case"right":k={translateX:-v.FROM_ANCHOR,opacity:0};break;case"left":k={translateX:v.FROM_ANCHOR,opacity:0};break;case"bottom":k={translateY:-v.FROM_ANCHOR,opacity:0};break;case"top":k={translateY:v.FROM_ANCHOR,opacity:0}}return(0,s.jsxs)(i.P.div,{ref:b,initial:k,animate:{translateY:0,translateX:0,opacity:1,transition:{delay:x,type:"spring",stiffness:200,damping:20,mass:1.5,opacity:{ease:"easeOut",duration:.15}}},exit:{scale:.985,opacity:0,filter:"blur(24px)",transition:{ease:"easeIn",duration:.3,opacity:{duration:.2}}},className:(0,l.A)("font-base fixed z-tooltip rounded-xl p-4 border-0.5 shadow-sm max-w-[16.6rem]","default"===m&&"bg-bg-200 border-border-300","secondary"===m&&"text-accent-secondary-000 bg-accent-secondary-900 border-accent-secondary-100/50",h),role:"dialog",style:{willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[(0,s.jsx)(c,{side:j,align:M,accentColor:m,spacing:v}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[a,!!g&&!!y&&(0,s.jsx)(n.$,{variant:"outline",className:(0,l.A)("!gap-0 !text-sm !rounded-lg  !px-3 !min-w-0 !w-fit","secondary"===m&&"!text-accent-secondary-000 !border-accent-secondary-100/30 hover:!bg-accent-secondary-100 hover:!text-oncolor-100"),onClick:()=>{y(),null==p||p()},size:"sm",children:(0,s.jsx)("p",{className:"inline",children:g})})]})]})},c=e=>{let{accentColor:t,side:a,align:n,spacing:i=o}=e,r="fill-bg-200",d="fill-border-300";"secondary"===t&&(r="fill-accent-secondary-900",d="fill-accent-secondary-100/50");let c={};switch(a){case"top":c={top:"100%",left:"50%",marginTop:"-5px",transform:"rotate(-90deg) translateY(-25%)"};break;case"bottom":c={bottom:"100%",left:"50%",marginBottom:"-5px",transform:"rotate(90deg) translateY(25%)"};break;case"right":c={top:i.POINTER_OFFSET};break;case"left":c={top:i.POINTER_OFFSET,left:"100%",transform:"rotate(180deg)"}}if("top"===a||"bottom"===a)switch(n){case"start":c.left=i.POINTER_OFFSET;break;case"end":c.left="auto",c.right=i.POINTER_OFFSET}return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:i.POINTER_HEIGHT,viewBox:"0 0 6 16",className:(0,l.A)("absolute origin-center pointer-events-none","right"===a&&"right-full"),style:c,children:[(0,s.jsx)("path",{className:r,d:"M6 0h-.5v1.55c0 .55-.27 1.06-.71 1.55-.53.6-1.16 1.05-1.79 1.51-.57.42-1.15.85-1.65 1.37C.87 6.48.5 7.06.5 7.74c0 .68.37 1.26.85 1.77.5.52 1.08.94 1.65 1.36.63.47 1.26.93 1.79 1.51.44.5.71 1 .71 1.56V16H6V0Z"}),(0,s.jsx)("path",{className:d,fillRule:"evenodd",clipRule:"evenodd",d:"M6 0v1.55c0 .74-.36 1.36-.85 1.9-1.01 1.13-2.4 1.8-3.44 2.89-.45.47-.71.92-.71 1.4 0 .48.26.93.7 1.4 1.05 1.1 2.44 1.76 3.45 2.89.5.54.85 1.17.85 1.9V16h-.5v-2.06c0-.56-.27-1.06-.71-1.56-1.01-1.12-2.4-1.79-3.44-2.87C.87 9 .5 8.42.5 7.74c0-.68.37-1.26.85-1.76C2.4 4.89 3.78 4.22 4.8 3.1c.44-.5.71-1 .71-1.55V0H6Z"})]})}},26250:(e,t,a)=>{a.d(t,{L:()=>l,NuxProvider:()=>i});var s=a(54568),n=a(7620);let l=(0,n.createContext)(null);function i(e){let{children:t}=e,[a,i]=(0,n.useState)({items:{},currentlyShowing:null}),o=(0,n.useCallback)((e,t)=>{i(a=>{if(a.items[e])return a;let s={...a.items,[e]:t};return{items:s,currentlyShowing:r(s,!0)}})},[]),d=(0,n.useCallback)(e=>{i(t=>{let{[e]:a,...s}=t.items;return{items:s,currentlyShowing:t.currentlyShowing===e?r(s):t.currentlyShowing}})},[]),c={items:a.items,currentlyShowing:a.currentlyShowing,registerNux:o,unregisterNux:d};return(0,s.jsx)(l.Provider,{value:c,children:t})}let r=(e,t)=>{let a=Object.entries(e).sort((e,t)=>{let a=e[1].priority||0,s=t[1].priority||0;return a!==s?s-a:new Date(t[1].dateAdded).getTime()-new Date(e[1].dateAdded).getTime()});if(t){var s,n;return null!=(n=null==(s=a[0])?void 0:s[0])?n:null}for(let[e,t]of a)if(t.showAfterOthersDismiss)return e;return null}},28483:(e,t,a)=>{a.d(t,{IK:()=>N,hq:()=>O,AC:()=>A});var s=a(54568),n=a(96614),l=a(91820),i=a(64328),r=a(60687),o=a(23812),d=a(84617),c=a(39613),u=a(68067),m=a(98304),p=a(66365),h=a(45312),x=a(7620),f=a(59666),g=a(36541),y=a(59951),v=a(13982),b=a(46302),j=a(37e3),w=a(6149),M=a(68034);function _(e,t){var a,s,n,l,i,r,o,d;if(!e)return{windowName:null,status:null};let c=null==(d=null==t?void 0:t.startsWith("claude-opus"))||d,u=(null==(a=e["5h"])?void 0:a.status)==="exceeded_limit",m=(null==(s=e["7d"])?void 0:s.status)==="exceeded_limit",p=c&&(null==(n=e["7d_opus"])?void 0:n.status)==="exceeded_limit",h=(null==(l=e.overage)?void 0:l.status)==="exceeded_limit";if((m||u||p)&&h)return{windowName:"overage",status:e.overage};let x=[];if(u&&x.push({name:"5h",resetTime:e["5h"].resets_at}),m&&x.push({name:"7d",resetTime:e["7d"].resets_at}),p&&x.push({name:"7d_opus",resetTime:e["7d_opus"].resets_at}),x.length>1){let t=x.reduce((e,t)=>t.resetTime>e.resetTime?t:e);return{windowName:t.name,status:e[t.name]}}return p?{windowName:"7d_opus",status:e["7d_opus"]}:m?{windowName:"7d",status:e["7d"]}:u||(null==(i=e["5h"])?void 0:i.status)==="approaching_limit"?{windowName:"5h",status:e["5h"]}:(null==(r=e["7d"])?void 0:r.status)==="approaching_limit"?{windowName:"7d",status:e["7d"]}:(null==(o=e.overage)?void 0:o.status)==="approaching_limit"?{windowName:"overage",status:e.overage}:{windowName:null,status:null}}function k(){let e=(0,p.useExperiment)("claude_ai_rate_limit_modal").get("show_upgrade_modal",!1);return(0,x.useEffect)(()=>{e&&(0,v.D)()},[e]),null}let A=()=>{let{messageLimit:e}=(0,i.YL)(),{isTierSelectorEnabled:t}=(0,r.t)(),a=(0,i.mV)(),n=(0,i.O9)(),l=(0,i.zc)(),[o,d]=(0,x.useState)(!0),[c,u]=(0,x.useState)(!0),m=function(e){var t,a,s;if(!e||"within_limit"===e.type)return{isOverageScenario:!1,isBlocking:!1,isActive:!1};let n=!!e.overageDisabledReason&&"overage_not_provisioned"!==e.overageDisabledReason&&"org_level_disabled"!==e.overageDisabledReason,l=!!(null==(t=e.windows)?void 0:t.overage)||n,i=(null==(s=e.windows)||null==(a=s.overage)?void 0:a.status)==="exceeded_limit"||n;return{isOverageScenario:l,isBlocking:i,isActive:!i&&l}}(e);return m.isOverageScenario?m.isBlocking?{messageLimit:e,overageExceededWarning:(0,s.jsx)(E,{messageLimit:e,isBlocking:!0})}:{messageLimit:e,approachingMessageLimitWarning:c?(0,s.jsx)(E,{messageLimit:e,isBlocking:!1,onDismiss:()=>u(!1)}):void 0}:(null==e?void 0:e.type)==="exceeded_limit"||(null==e?void 0:e.type)==="approaching_limit"&&0===e.remaining?{messageLimit:e,exceededMessageLimitWarning:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C,{messageLimit:e,showTierSelector:t}),!n&&!a&&!l&&(0,s.jsx)(k,{})]})}:(null==e?void 0:e.type)==="approaching_limit"?{messageLimit:e,approachingMessageLimitWarning:o?(0,s.jsx)(S,{messageLimit:e,onDismiss:()=>d(!1)}):void 0}:{}},N=e=>{let t=A(),{messageLimit:a}=t,s=(null==a?void 0:a.type)==="within_limit",l=(0,n.Z3)(e),i=s?null:null==a?void 0:a.conversationUuid,r=(0,n.Z3)(null!=i?i:null);return(null==a?void 0:a.type)!=="within_limit"&&(null==a?void 0:a.perModelLimit)&&l!==r?{}:t};function C(e){let{messageLimit:t,showTierSelector:a=!1}=e,n=(0,i.mV)(),l=(0,i.O9)(),r=(0,i.zc)(),o=(0,i.tP)(),u=(0,y.o)(),m=(0,M.h)(),{account:p,activeOrganization:g}=(0,i.YL)(),v=(0,x.useMemo)(()=>{if(!p||!g)return!1;let e=p.memberships.find(e=>e.organization.uuid===g.uuid);return(null==e?void 0:e.seat_tier)==="enterprise_usage_based"},[p,g]),{windowName:j,status:k}=_(t.windows),A=(null==k?void 0:k.resets_at)||t.resetsAt,N=h.c9.fromSeconds(A),{hasOAuthTokens:C}=function(){var e;let{data:t,isLoading:a}=(0,b.Jh)();return{hasOAuthTokens:null!=(e=null==t?void 0:t.some(e=>!e.is_revoked))&&e,isLoading:a}}(),S=n&&u,E=(()=>{if(v)if(S)return(0,s.jsx)(f.A,{defaultMessage:"Extra usage is required - contact an admin to keep working",id:"Bidiq5CnYF"});else return(0,s.jsx)(f.A,{defaultMessage:"Extra usage is required",id:"fejJ1o01QI"});if("5h"===j)if(S)return(0,s.jsx)(f.A,{defaultMessage:"5-hour limit resets {time} - contact an admin to keep working",id:"JtwE+AsNoz",values:{time:N.toLocaleString(h.c9.TIME_SIMPLE)}});else return(0,s.jsx)(f.A,{defaultMessage:"5-hour limit reached ∙ resets {time}",id:"wEubEiECAS",values:{time:N.toLocaleString(h.c9.TIME_SIMPLE)}});if("7d"===j){let e=N.toFormat("cccc");return S?(0,s.jsx)(f.A,{defaultMessage:"Weekly limit resets {day} {time} - contact an admin to keep working",id:"LUFY3UYYXY",values:{day:e,time:N.toLocaleString(h.c9.TIME_SIMPLE)}}):(0,s.jsx)(f.A,{defaultMessage:"Weekly limit reached ∙ resets {day} {time}",id:"MhyGCtndd7",values:{day:e,time:N.toLocaleString(h.c9.TIME_SIMPLE)}})}if("7d_opus"===j){let e=N.toFormat("cccc");return S?(0,s.jsx)(f.A,{defaultMessage:"Opus limit resets {day} {time} - contact an admin to keep working",id:"ir+wpgGBaT",values:{day:e,time:N.toLocaleString(h.c9.TIME_SIMPLE)}}):(0,s.jsx)(f.A,{defaultMessage:"Opus limit reached ∙ resets {day} {time}",id:"9Di9WqoUCM",values:{day:e,time:N.toLocaleString(h.c9.TIME_SIMPLE)}})}return null})();return(0,s.jsxs)(w.q,{actionButton:S?null:m,minimalUi:!0,children:[E||(a?(0,s.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. As an internal user, you can change your tier in the user menu to test different rate limits.",id:"Um8zFcRLL/",values:{time:(0,s.jsx)("span",{className:"inline-block",children:N.toLocaleString(h.c9.TIME_SIMPLE)})}}):r&&o?(0,s.jsx)(f.A,{defaultMessage:"Increase usage for uninterrupted work or continue at {time}.",id:"5QbZN4LMkt",values:{time:(0,s.jsx)("span",{className:"inline-block",children:N.toLocaleString(h.c9.TIME_SIMPLE)})}}):l||n||r?C?(0,s.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. <link>Your limits are shared with Claude Code</link>",id:"UrobydPO9o",values:{time:(0,s.jsx)("span",{className:"inline-block",children:N.toLocaleString(h.c9.TIME_SIMPLE)}),link:e=>(0,s.jsx)(d.Y,{href:"/settings/claude-code",children:e})}}):(0,s.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}.",id:"bXAswF0AK8",values:{time:(0,s.jsx)("span",{className:"inline-block",children:N.toLocaleString(h.c9.TIME_SIMPLE)})}}):(0,s.jsx)(f.A,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,s.jsx)("span",{className:"inline-block",children:N.toLocaleString(h.c9.TIME_SIMPLE)}),link:e=>(0,s.jsx)(d.Y,{target:"_blank",rel:"noreferrer",href:c.Kf,children:e})}})),(0,s.jsx)(D,{messageLimit:t})]})}let S=e=>{let{messageLimit:t,onDismiss:a}=e,n=(0,M.h)(),{windowName:l,status:i}=_(t.windows),r=(null==i?void 0:i.resets_at)||t.resetsAt,d=h.c9.fromSeconds(r);return(0,s.jsxs)(j.x,{children:[(0,s.jsx)("span",{className:"text-text-300 text-sm",children:"5h"===l?(0,s.jsx)(f.A,{defaultMessage:"Approaching 5-hour limit",id:"TLC6m0t22W"}):"7d"===l?(0,s.jsx)(f.A,{defaultMessage:"Approaching weekly limit",id:"t2T1PWD6TI"}):(0,s.jsx)(f.A,{defaultMessage:"You’re almost out of usage - your limits will reset at {time}",id:"jKI2rDp1ds",values:{time:(0,s.jsx)("span",{className:"inline-block",children:d.toLocaleString(h.c9.TIME_SIMPLE)})}})}),(0,s.jsxs)("span",{children:[n,(0,s.jsx)(o.$,{className:"ml-2 h-6 w-6 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:a,children:(0,s.jsx)(m.X,{size:12})})]})]})},E=e=>{let{messageLimit:t,onDismiss:a,isBlocking:n}=e;return n?(0,s.jsx)(I,{messageLimit:t}):(0,s.jsx)(T,{messageLimit:t,onDismiss:a})},I=e=>{let{messageLimit:t}=e,a=(0,i.mV)(),n=(0,y.o)(),[l,r]=(0,x.useState)(!1);if(a&&n)return(0,s.jsx)(w.q,{actionButton:null,minimalUi:!0,dangerText:!0,children:(0,s.jsx)(f.A,{defaultMessage:"Limit reached - contact an admin to keep working",id:"f1/9b+4969"})});if((null==t?void 0:t.overageDisabledReason)==="out_of_credits"){let e=(0,s.jsx)("button",{onClick:()=>r(!0),className:"underline text-sm",children:(0,s.jsx)(f.A,{defaultMessage:"Add funds",id:"sx0aSlxLIy"})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.q,{actionButton:e,minimalUi:!0,dangerText:!0,children:(0,s.jsx)(f.A,{defaultMessage:"Wallet empty",id:"hgChvDBkGs"})}),(0,s.jsx)(g.l,{isOpen:l,onClose:()=>r(!1)})]})}let o=(0,s.jsx)(d.Y,{href:"/settings/usage",className:"text-sm",children:(0,s.jsx)(f.A,{defaultMessage:"Manage",id:"0AzlrbMWV9"})});return(0,s.jsx)(w.q,{actionButton:o,minimalUi:!0,dangerText:!0,children:(0,s.jsx)(f.A,{defaultMessage:"Spending cap reached",id:"e2HH8SvqXl"})})},T=e=>{let{messageLimit:t,onDismiss:a}=e,{windowName:n,status:l}=_(t.windows),i=(null==l?void 0:l.resets_at)||t.resetsAt,r=h.c9.fromSeconds(i);return(0,s.jsxs)(j.x,{children:[(0,s.jsx)("span",{className:"text-text-300 text-sm",children:(()=>{if("5h"===n)return(0,s.jsx)(f.A,{defaultMessage:"5-hour limit resets {time} ∙ continuing with extra usage",id:"Imf94b7CcD",values:{time:r.toLocaleString(h.c9.TIME_SIMPLE)}});if("7d"===n){let e=r.toFormat("cccc");return(0,s.jsx)(f.A,{defaultMessage:"Weekly limit resets {day} {time} ∙ continuing with extra usage",id:"wvFU29jyYg",values:{day:e,time:r.toLocaleString(h.c9.TIME_SIMPLE)}})}if("7d_opus"===n){let e=r.toFormat("cccc");return(0,s.jsx)(f.A,{defaultMessage:"Opus limit resets {day} {time} ∙ continuing with extra usage",id:"P3sN2kt3TW",values:{day:e,time:r.toLocaleString(h.c9.TIME_SIMPLE)}})}return(0,s.jsx)(f.A,{defaultMessage:"Limit reached ∙ continuing with extra usage",id:"uWI9rRK6Dw"})})()}),(0,s.jsx)("span",{children:a&&(0,s.jsx)(o.$,{className:"ml-2 h-6 w-6 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:a,children:(0,s.jsx)(m.X,{size:12})})})]})},D=e=>{let{messageLimit:t}=e,{mutate:a}=(0,l.T)(t.conversationUuid),{value:n}=(0,u.fS)("can_reset_rate_limits");return n?(0,s.jsx)(o.$,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>a(),children:(0,s.jsx)(f.A,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},O=e=>{var t;let{messageLimit:a,activeOrganization:s}=(0,i.YL)(),r=(0,l.$)(),o=(0,n.Z3)(e),d=(null==a?void 0:a.type)!=="within_limit"&&null!=(t=null==a?void 0:a.conversationUuid)?t:null,c=(0,n.Z3)(d);(0,x.useEffect)(()=>{(null==s?void 0:s.uuid)&&a&&"within_limit"!==a.type&&c!==o&&r({type:"within_limit"},s.uuid,e)},[e,c,s,a,o,r])}},30541:(e,t,a)=>{a.d(t,{g:()=>r,x:()=>o});var s=a(1613),n=a(64328),l=a(80688),i=a(4869);let r=()=>{let{account:e,activeOrganization:t}=(0,n.YL)();return(0,s.Sk)("/api/organizations/".concat(null==t?void 0:t.uuid,"/spotlight"),{enabled:!!e,queryKey:[l.vi,null==e?void 0:e.uuid,null==t?void 0:t.uuid]})},o=()=>{let{account:e,activeOrganization:t}=(0,n.YL)(),a=(0,i.useQueryClient)();return(0,s.L2)("/api/organizations/".concat(null==t?void 0:t.uuid,"/spotlight/action"),"POST",{enabled:!!e,onSuccess:()=>{a.invalidateQueries({queryKey:[l.vi,null==e?void 0:e.uuid,null==t?void 0:t.uuid]})}})}},30586:(e,t,a)=>{a.d(t,{L:()=>s,f:()=>n});var s=function(e){return e.CLAUDE_CODE="claude_code",e.ORG_ENABLE_INTEGRATIONS="org_enable_integrations",e.MONKEYS_IN_A_BARREL="monkeys_in_a_barrel",e.AZURE_KNIGHT_GALLANT="azure_knight_gallant",e.RESEARCH_AND_MCP="research_and_mcp",e.ARTIFACTS_GALLERY="artifacts_gallery",e.MCP_DIRECTORY="mcp_directory",e.MEMORY_SEARCH="memory_search",e.MEMORY_SYNTHESIS="memory_synthesis",e.VOLDEMORT_LUNA_LOVEGOOD="voldemort_luna_lovegood",e}({}),n=function(e){return e.INTERACTED="interacted",e.DISMISSED="dismissed",e.NOT_TARGETED="not_targeted",e}({})},35415:(e,t,a)=>{a.d(t,{EY:()=>r,jc:()=>o});var s=a(1613),n=a(64328),l=a(66365);let i=()=>{let{activeOrganization:e}=(0,n.YL)(),t=null==e?void 0:e.uuid,a=(0,n.h0)(),i=(0,l.useLayer)("trials_freemium"),r=!a&&(i.get("free_thinking",!1)||i.get("free_opus",!1))&&!!t;return(0,s.Sk)("/api/organizations/".concat(t,"/feature_limits"),{queryKey:["FEATURE_LIMITS",t],enabled:r,staleTime:3e5})},r=()=>{let{data:e,...t}=i(),a=null==e?void 0:e.limits.find(e=>"thinking"===e.feature);return{...t,data:a}},o=()=>{let{data:e,...t}=i(),a=null==e?void 0:e.limits.find(e=>"opus_4"===e.feature);return{...t,data:a}}},37e3:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(2348);function n(){let e=(0,s._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return n=function(){return e},e}let l=a(37541).J.div(n())},50746:(e,t,a)=>{a.d(t,{Q:()=>eD,I:()=>eT});var s=a(54568),n=a(19736),l=a(34003),i=a(64328),r=a(71462),o=a(68067),d=a(2e3),c=a(28044),u=a(69335),m=a(59666),p=a(48579),h=a(93714),x=a(79052),f=a(50571),g=a(22167),y=a(55839),v=a(58841),b=a(54594),j=a(52500),w=a(42605),M=a(23812),_=a(66365),k=a(72902),A=a(45312),N=a(7620),C=a(6149),S=a(91820),E=a(45054),I=a(1720),T=a(3075),D=a(20683),O=a(55562),L=a(77223),R=a(49737),P=a(19069),z=a(39613),F=a(17333),U=a(58720);function G(e){let{onReady:t,children:a,onSuccess:n}=e,l=(0,F.useStripe)(),r=(0,F.useElements)(),{account:o}=(0,i.YL)(),[d,c]=(0,N.useState)(null),[u,h]=(0,N.useState)(!1),[x,f]=(0,N.useState)(!1),{mutateAsync:g}=(0,p.k0)(),y=async()=>{if(!u&&l&&r){h(!0);try{let e=await r.submit();if(e.error){e.error.message&&c(e.error.message);return}let t=await g(),{error:a}=await l.confirmPayment({elements:r,clientSecret:t.clientSecret,redirect:"if_required"});(null==a?void 0:a.message)&&"validation_error"!==a.type&&c(a.message),a||n()}catch(e){c(e.message)}finally{h(!1)}}};return(0,s.jsxs)(U.lV,{onSubmit:()=>{u||y()},children:[(0,s.jsx)(F.PaymentElement,{id:"payment-element",options:{readOnly:u,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==o?void 0:o.email_address,name:null==o?void 0:o.full_name}}},onReady:()=>{f(!0),t&&t()}}),d&&(0,s.jsx)("div",{className:"text-danger-000 mt-4",id:"payment-message",children:d}),(0,s.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[a,(0,s.jsx)(M.$,{type:"submit",loading:u,variant:"flat",className:"bg-accent-pro-100 hover:bg-accent-pro-200 w-full py-6",disabled:!x,children:(0,s.jsx)(m.A,{defaultMessage:"Confirm payment",id:"Dja1nAdMHW"})})]}),(0,s.jsx)("div",{className:"mt-3 text-text-500 text-sm text-center",children:(0,s.jsx)(m.A,{defaultMessage:"By providing your payment information, you allow Anthropic to charge your card in the amount above. Purchase non-refundable.",id:"0L0VGgMTRs"})})]})}function Y(e){let{amount:t,currency:a,children:n,className:l,onSuccess:i}=e,r=(0,L.ib)(),[o,d]=(0,N.useState)(!0),{theme:c,mode:u}=(0,P.D)(),m=(0,O.l)().get(z.eT.COLOR_MODE),p={fontSizeBase:"16px",colorBackground:(0,R.w)(c,u,m,"bg-000"),colorText:(0,R.w)(c,u,m,"text-100")},h={mode:"payment",amount:t,currency:null==a?void 0:a.toLowerCase(),payment_method_types:["card","link"],loader:"never",appearance:{theme:"stripe",variables:p}};return(0,s.jsxs)("div",{className:(0,k.A)("relative",l),children:[(0,s.jsx)("div",{className:(0,k.A)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":o}),children:(0,s.jsx)(F.Elements,{options:h,stripe:r,children:(0,s.jsx)(G,{onReady:()=>d(!1),onSuccess:i,children:n})})}),o&&(0,s.jsx)(B,{})]})}let B=()=>(0,s.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,s.jsx)(I.Loading,{})});function H(e){var t,a;let n,{isOpen:l,onClose:r,conversationUuid:o}=e,d=(0,E.Y)(),{activeOrganization:c}=(0,i.YL)(),u=(0,S.$)(),h=(0,N.useCallback)(()=>{d.addSuccess((0,s.jsx)(m.A,{defaultMessage:"Message limits reset. Let’s chat!",id:"LGCoQdVha4"})),(null==c?void 0:c.uuid)&&o&&u({type:"within_limit"},c.uuid,o),r()},[null==c?void 0:c.uuid,o,r,d,u]),{data:x,isLoading:f}=(0,p.Zr)();return x&&(n=(0,D.vv)(x.price+(null!=(t=x.taxAmount)?t:0),x.currency,{preferWholeNumber:!0})),(0,s.jsx)(T.aF,{isOpen:l,onClose:r,title:(0,s.jsx)("div",{className:"text-text-200 font-ui-serif text-xl font-medium mt-2",children:(0,s.jsx)(m.A,{defaultMessage:"Reset usage limits",id:"YKpO8tTise"})}),hasCloseButton:!0,modalSize:"lg",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex p-3 justify-center items-center gap-10 self-stretch rounded-xl border border-accent-pro-100 bg-accent-pro-900 mt-6",children:[(0,s.jsx)("div",{className:"flex flex-col px-5 gap-2",children:f||!x?(0,s.jsx)(I.Loading,{size:"sm"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-text-100 text-3xl/6 font-medium",children:n}),null===x.taxAmount&&(0,s.jsx)("p",{className:"text-text-500 text-sm/3 text-nowrap",children:(0,s.jsx)(m.A,{defaultMessage:"+ tax",id:"H/9uGFjKzR"})})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-text-200 text-sm",children:(0,s.jsx)(m.A,{defaultMessage:"Immediately get access to Claude instead of waiting for usage limits to reset.",id:"6Gj58FRZ27"})}),(0,s.jsx)("p",{className:"text-text-200 text-sm",children:(0,s.jsx)(m.A,{defaultMessage:"This is a one-time payment.",id:"lVfQHZlUq0"})})]})]}),(0,s.jsx)(Y,{amount:x?x.price+(null!=(a=x.taxAmount)?a:0):500,currency:(null==x?void 0:x.currency)||"USD",onSuccess:h})]})})}function W(e){let{messageLimit:t,placement:a,defaultWarning:n,defaultTheme:l}=e,i=(0,_.useExperiment)("rate_limit_resets").get("allow_rate_limit_resets",!1);return i&&("exceeded_limit"===t.type||"approaching_limit"===t.type&&0===t.remaining)?(0,s.jsx)(j.L,{theme:"pro",placement:a,warning:(0,s.jsx)(K,{messageLimit:t})}):i&&"approaching_limit"===t.type?(0,s.jsx)(j.L,{theme:"info",placement:a,warning:(0,s.jsx)(V,{messageLimit:t})}):(0,s.jsx)(j.L,{theme:l,warning:n,placement:a})}let V=e=>{let{messageLimit:t}=e,[a,n]=(0,N.useState)(!1);return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsx)("div",{className:"flex flex-row items-center gap-2 md:w-full",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-sm",children:1===t.remaining?(0,s.jsx)(m.A,{id:"RoowG4DICE",defaultMessage:"You have 1 message left before hitting usage limits"}):(0,s.jsx)(m.A,{id:"4rS9S85sm+",defaultMessage:"You have {numMessagesRemaining} messages left before hitting usage limits",values:{numMessagesRemaining:t.remaining}})})})}),(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:(0,s.jsx)(M.$,{variant:"unstyled",className:(0,k.A)("@lg:w-fit w-full shrink-0","text-sm font-medium","text-accent-pro-000","hover:text-accent-pro-000 hover:bg-bg-500/40"),onClick:()=>{n(!0)},children:(0,s.jsx)(m.A,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"})})})]}),(0,s.jsx)(H,{isOpen:a,onClose:()=>n(!1),conversationUuid:t.conversationUuid})]})},K=e=>{let{messageLimit:t}=e,a=A.c9.fromSeconds(t.resetsAt),[n,l]=(0,N.useState)(!1);return(0,s.jsxs)(C.q,{minimalUi:!0,actionButton:(0,s.jsxs)(M.$,{variant:"unstyled",size:"sm",className:(0,k.A)("@lg:w-fit w-full shrink-0","bg-accent-pro-100 text-oncolor-100 font-medium font-ui transition-colors hover:bg-accent-pro-200"),onClick:()=>{l(!0)},children:[(0,s.jsx)(m.A,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"}),(0,s.jsx)("span",{className:"inline-block text-[0.65rem] bg-bg-000/20 ml-2 px-1.5 py-0.5 rounded",children:(0,s.jsx)(m.A,{id:"vroSRZd5vI",defaultMessage:"BETA"})})]}),children:[(0,s.jsx)(m.A,{id:"74NSYSM2xX",defaultMessage:"You can reset usage limits now or wait until {time}.",values:{time:(0,s.jsx)("span",{className:"inline-block",children:a.toLocaleString(A.c9.TIME_SIMPLE)})}}),(0,s.jsx)(H,{isOpen:n,onClose:()=>l(!1),conversationUuid:t.conversationUuid})]})};var q=a(88775),X=a(73619),$=a(37e3),J=a(19977),Z=a(96547),Q=a(45271);let ee=()=>{let e=(0,Z.lu)();return(0,s.jsxs)($.x,{children:[(0,s.jsx)("p",{className:"text-[13px] text-text-200",children:e?(0,s.jsx)(m.A,{defaultMessage:"Connect your tools to Claude",id:"exSmFaQCLC"}):(0,s.jsx)(m.A,{defaultMessage:"Upgrade to connect your tools to Claude",id:"kIvAPf8iSA"})}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[e&&["https://mcp.notion.com/mcp","https://mcp.canva.com/mcp","https://mcp.linear.app/sse","https://mcp.atlassian.com/v1/sse","https://mcp.asana.com/sse"].map(e=>(0,s.jsx)("div",{className:"w-3",children:(0,s.jsx)(Q.z,{size:18,imageSize:13,type:"favicon",src:e})},e)),["/images/icons/messages-app.svg","/images/icons/notes-app.svg","/images/icons/chrome-app.svg"].map(e=>(0,s.jsx)("div",{className:"w-3",children:(0,s.jsx)(Q.z,{size:18,imageSize:13,type:"external",src:e})},e))]}),(0,s.jsx)(J.J,{size:16,className:"text-text-500"})]})]})};var et=a(84617),ea=a(10369);function es(){let e=(0,i.Kq)(),t=(0,ea.A)();return(0,s.jsx)(C.q,{actionButton:null,title:t.formatMessage({defaultMessage:"Team plan canceled",id:"KuqVOfg9/0"}),children:e?(0,s.jsx)(m.A,{defaultMessage:"You can no longer chat with Claude. To restore full access, <link>renew your subscription</link>.",id:"L2pC0kiNNO",values:{link:e=>(0,s.jsx)(et.Y,{className:"whitespace-nowrap",href:"/settings/billing",children:e})}}):(0,s.jsx)(m.A,{defaultMessage:"You can no longer chat with Claude.",id:"hxcpUUnV0b"})})}var en=a(68034);let el=()=>{let e=(0,en.h)({allowSelfUpgrade:!1});return(0,s.jsx)(C.q,{actionButton:e,children:(0,s.jsx)(m.A,{defaultMessage:"Due to capacity constraints, chatting with Claude is currently not available. Please try again shortly.",id:"kfyWX0MxKQ"})})};var ei=a(72522),er=a(18849);let eo=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,k.A)("text-text-100 font-medium underline hover:no-underline",t),...a})},ed=e=>{var t;let a,{inaccessibleSyncSources:n}=e,{chatResourceState:l}=(0,v.i)(),i=(0,ei.v)(),{isDrawerExpanded:r,setIsDrawerExpanded:o}=(0,er.x)(),c=n.every(e=>e.status.state===d.I5.UNAUTHENTICATED)&&1===new Set(n.map(e=>e.type)).size,u=null==(t=n[0])?void 0:t.type,p=(0,s.jsx)("button",{onClick:()=>{o(!0)},children:(0,s.jsx)(eo,{children:(0,s.jsx)(m.A,{defaultMessage:"Show {count, plural, one {# Item} other {# Items}}",id:"1HlfJxfH7H",values:{count:n.length}})})});return c&&null!==u?a=(0,s.jsx)("button",{onClick:()=>i(u),children:(0,s.jsx)(eo,{children:(0,s.jsx)(m.A,{defaultMessage:"Reconnect with {sourceName}",id:"dUareRZF9G",values:{sourceName:d.sb[u]}})})}):l.conversationUuid&&!r&&(a=p),(0,s.jsx)($.x,{children:(0,s.jsx)(m.A,{defaultMessage:"Some of your content could not be loaded. {actionButton}",id:"Ibsz06ys2B",values:{actionButton:a}})})};var ec=a(24407);let eu=ec.z.array(ec.z.object({text:ec.z.string(),href:ec.z.string().optional(),button:ec.z.boolean().optional()})).nullable();function em(e){let{messageComponents:t}=e;return(0,s.jsx)($.x,{children:(0,s.jsx)(ep,{messageComponents:t})})}function ep(e){let{messageComponents:t}=e;return(0,s.jsx)("div",{children:t.map((e,t)=>e.button?(0,s.jsx)(M.$,{href:e.href,target:"_blank",children:e.text},t):e.href?(0,s.jsx)(et.Y,{href:e.href,target:"_blank",children:e.text},t):(0,s.jsx)("span",{children:e.text},t))})}var eh=a(28483),ex=a(95617),ef=a(69524);function eg(e){let t=(0,E.Y)(),[a,l]=(0,N.useState)(!1),i=(0,n.bT)("push"),r=()=>{i()},o=function(e){let{stopReason:t,model:a}=e,s=(0,_.useDynamicConfig)("holdup").get("modelFallbacks",{})[a];if(s&&"refusal"===t)return s}({stopReason:e.stopReason,model:e.model}),d=e=>(0,s.jsx)(et.Y,{onClick:r,children:e});return(0,s.jsxs)(C.q,{actionButton:null,children:[(0,s.jsx)(ef.B,{isOpen:a,showOptions:!1,conversationUuid:e.conversationUuid,message:e.lastMessage,requestedFeedbackType:ex.kj.SC_FALSE_POSITIVE,setRequestedFeedbackType:()=>{},onClose:()=>{l(!1)},onSuccess:()=>{l(!1),t.addSuccess((0,s.jsx)(m.A,{defaultMessage:"Thanks for your feedback!",id:"coh2h6fh1P"}))}}),(0,s.jsx)("div",{className:"text-text-200 flex w-full items-center justify-between",children:(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{children:o?(0,s.jsx)(m.A,{defaultMessage:"<bold>Flagged by the safety classifier</bold> If you think this flag is wrong, you can start a new chat or try these: <falsePositiveButton>Let us know</falsePositiveButton> or <retryButton>retry with {fallbackName}</retryButton>",id:"hleSl+zqIN",values:{fallbackName:o.displayName,bold:e=>(0,s.jsx)("span",{className:"font-medium",children:e}),retryButton:t=>(0,s.jsx)("button",{className:"underline cursor-pointer",onClick:()=>{e.onRetryWithFallback()},children:t}),falsePositiveButton:e=>(0,s.jsx)("button",{className:"underline cursor-pointer",onClick:()=>{l(!0)},children:e})}}):"refusal"===e.stopReason?(0,s.jsx)(m.A,{defaultMessage:"Claude is unable to respond to this request, which appears to violate our <policyLink>Usage Policy</policyLink>. Please <newChat>start a new chat</newChat>.",id:"JQtAKVGSTL",values:{policyLink:e=>(0,s.jsx)("a",{href:"https://www.anthropic.com/legal/aup",target:"_blank",className:"underline cursor-pointer",children:e}),newChat:d}}):(0,s.jsx)(m.A,{defaultMessage:"Claude is unable to respond to this request. Please <newChat>start a new chat</newChat>.",id:"VZKromeiwV",values:{newChat:d}})})})})]})}var ey=a(44894),ev=a(74813),eb=a(34385),ej=a(11717);function ew(e){let{isOpen:t,setIsOpen:a,files:n,isNewConversation:l}=e,i=(0,ea.A)();return(0,s.jsxs)(T.aF,{isOpen:t,hasCloseButton:!0,title:i.formatMessage({defaultMessage:"Analysis tool required",id:"jvGhSl5Gpz"}),onClose:()=>a(!1),children:[(0,s.jsxs)("div",{className:"my-4 text-pretty flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(m.A,{defaultMessage:"Claude requires the analysis tool to be enabled to analyze the following files:",id:"DWgtKtw1y9"})}),(0,s.jsx)("ul",{className:"list-disc pl-4",children:n.map(e=>(0,s.jsx)("li",{children:e.file_name},e.file_uuid))}),(0,s.jsx)("div",{children:l?i.formatMessage({defaultMessage:"If you start this conversation without turning on the analysis tool, these files will not be available to Claude.",id:"0r1iTiKoSi"}):i.formatMessage({defaultMessage:"Please enable the analysis tool and then start a new chat in this project to analyze these files.",id:"YLHCS8L8fc"})})]}),(0,s.jsx)(T.vW,{layout:"right",children:(0,s.jsx)(T.yl,{type:"button",size:"lg",onClick:()=>a(!1),children:(0,s.jsx)(m.A,{defaultMessage:"OK",id:"kAEQyVFWDv"})})})]})}function eM(e){let{files:t,isNewConversation:a}=e,{track:n}=(0,ev.st)(),{openFeaturePreviewModal:l}=(0,ej.go)(),[i,r]=(0,N.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ew,{isOpen:i,setIsOpen:r,isNewConversation:a,files:t}),(0,s.jsx)($.x,{children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)(m.A,{defaultMessage:"Claude cannot access some of the <a>files attached</a> to this conversation",id:"dlrqZaDnOO",values:{a:e=>(0,s.jsx)(et.Y,{href:"#",onClick:()=>r(!0),children:e})}})}),(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"text-accent-secondary-000 font-medium",href:"#",onClick:()=>{n({event_key:"claudeai.settings.preview_feature.opened",source:"ooc_files_warning"}),l()},children:(0,s.jsx)(m.A,{defaultMessage:"Enable analysis tool",id:"UDUWEABw3p"})})})]})})]})}var e_=a(79383),ek=a(96614),eA=a(18088),eN=a(98304),eC=a(16685);let eS=ec.z.object({id:ec.z.string(),bodyMd:ec.z.string(),isDismissable:ec.z.boolean(),proUpsell:ec.z.boolean(),alertForModels:ec.z.array(ec.z.string())}).nullable(),eE=e=>{let{alert:t,setHideAlert:a}=e,n=(0,i.UC)(),l=(0,en.h)();return(0,s.jsxs)($.x,{children:[(0,s.jsx)(e_.Lv,{children:(0,s.jsx)(eC.o,{children:t.bodyMd})}),n&&t.proUpsell&&l,t.isDismissable&&(0,s.jsx)(M.$,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:()=>a(!0),children:(0,s.jsx)(eN.X,{size:12})})]})};var eI=a(40459);let eT=()=>{let e=(0,g.X0)(d.v8.GMAIL),t=(0,g.X0)(d.v8.GCAL),a=(0,x.$f)();return!(0,c.V)()&&(e||t||a)},eD=e=>{var t,a,c,x,g,M,_,k,A,N,C,S,E,I,T,D;let O,{placement:L,onRetry:R}=e,{isPromptUnsafe:P}=(0,q.QT)(),{attachments:z,conversation:F,files:U}=(0,w.o)(),G=(0,q.QN)(),Y=(0,n.WZ)(null==F?void 0:F.id),{setMcpDirectoryModalIsOpen:B}=(0,b.tl)(),H=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=(0,n.mz)(t||""),s=null==a||null==(e=a.chat_messages)?void 0:e.at(-1);return s&&"assistant"===s.sender&&("prompt_injection_risk"===s.stop_reason||"refusal"===s.stop_reason)?{stopReason:s.stop_reason,lastMessage:s}:null}(null==F?void 0:F.id),V=(null==F?void 0:F.id)&&H?(0,s.jsx)(eg,{conversationUuid:F.id,model:F.model,lastMessage:H.lastMessage,stopReason:H.stopReason,onRetryWithFallback:async()=>{if(!H.lastMessage.parent_message_uuid)return;let{model:e}=await Y.mutateAsync();R(H.lastMessage.parent_message_uuid,e)}}):null,{exceededMessageLimitWarning:K,approachingMessageLimitWarning:J,overageExceededWarning:Z,messageLimit:Q}=(0,eh.IK)(null!=(t=null==F?void 0:F.id)?t:null),{isRavenCanceled:et}=(0,p.bF)(),ea=et?(0,s.jsx)(es,{}):void 0,en=(0,i.r$)()?(0,s.jsx)(el,{}):void 0,ei=(()=>{let{chatResourceState:e}=(0,v.i)();return[...e.syncSources||[],...(0,h.CO)(G).data||[]].filter(e=>{var t;return d.xj.includes(null==e||null==(t=e.status)?void 0:t.state)})})(),er=ei.length?(0,s.jsx)(ed,{inaccessibleSyncSources:ei}):void 0,eo=(0,y.CD)(),ec=(0,i.mV)(),ep=eo&&!ec?(0,s.jsx)($.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(u.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(m.A,{defaultMessage:"Less accurate Google Drive search results while Claude catalogs your Drive files",id:"ljvRWwDUyf"})})]})}):void 0,ex=(0,X.U)(G)?(0,s.jsx)($.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(u.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(m.A,{defaultMessage:"Project knowledge exceeds maximum. Remove files to continue.",id:"IqUMWBoy4d"})})]})}):void 0,{systemAlertFromConfig:ef}=(e=>{let t=(0,o.T9)("claude_ai_system_alerts","alert",null,eS),[a,n]=(0,eA.Vc)("".concat(e,":").concat(null==t?void 0:t.id,":hideAlertOnConversation"),!1),l=null==t?void 0:t.alertForModels,i=(0,ek.Z3)(e);return e&&(!l||l.includes(i))&&t&&!a?{systemAlertFromConfig:{alert:t,component:(0,s.jsx)(eE,{alert:t,setHideAlert:n})}}:{}})(null!=(a=null==F?void 0:F.id)?a:null),ev=ef?ef.component:null,ej=(0,l.u9)(),ew=function(e,t,a){let{data:n=[]}=(0,eb.uE)(a),l=(0,ey.cV)(),i=[...e,...t?t.files:[],...n].filter(e=>e.file_kind===r.M.Blob);return!l&&i.length?(0,s.jsx)(eM,{files:i,isNewConversation:!t}):null}(U,F,G),e_=ej?null:ew,eN=function(){let e=(0,o.T9)("claudeai_warning_message","components",null,eu);return e?(0,s.jsx)(em,{messageComponents:e}):null}(),eC=eT(),eD=(0,o.fS)("claudeai_unsafe_prompt_inline"),eO=P&&eC&&eD?(0,s.jsx)($.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(u.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(m.A,{defaultMessage:"Use caution before running this prompt. Malicious conversation content could trick Claude into attempting harmful actions or sharing your data.",id:"bWRp6wwzXA"})})]})}):null,eL=z.some(e=>e.origin===r.R.URLParameter)?(0,s.jsx)($.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(u.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(m.A,{defaultMessage:"Artifacts are user-generated and may contain unverified or potentially unsafe content.",id:"/0GesG9R4n"})})]})}):null,eR=null!=(x=null!=(c=null!=V?V:eO)?c:eL)?x:null,eP=null!=ex?ex:null,ez=(0,f.ko)({shouldTrack:"onpage"===L})&&"onpage"===L?(0,s.jsx)(ee,{}):null,eF=null!=(D=null!=(T=null!=(I=null!=(E=null!=(S=null!=(C=null!=(N=null!=(A=null!=(k=null!=(_=null!=(M=null!=(g=null!=eR?eR:eP)?g:K)?M:Z)?_:ea)?k:en)?A:er)?N:e_)?C:ev)?S:ep)?E:eN)?I:J)?T:ez)?D:null;eF===ez&&(O=()=>B(!0));let eU=ef&&ef.alert.proUpsell?"pro":K||e_||ep||J?"info":ez?"chin":"danger",eG=(0,i.O9)(),eY=(0,i.zc)();return!eP&&Q&&(eG||eY)&&(J||K)&&!eI.env.NEXT_PUBLIC_DISABLE_PAYMENTS?(0,s.jsx)(W,{messageLimit:Q,defaultWarning:eF,defaultTheme:eU,placement:L}):(0,s.jsx)(j.L,{warning:eF,placement:L,theme:eU,onClick:O})}},52500:(e,t,a)=>{a.d(t,{L:()=>r});var s=a(54568),n=a(72902),l=a(39109),i=a(61295);function r(e){let{warning:t,placement:a,theme:r,onClick:o}=e,d=(0,n.A)("w-full border-0.5 relative z-[5] px-3.5","bottom"===a?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-transparent":"danger"===r,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===r,"bg-bg-300 border-transparent":"info"===r,"bg-bg-200 border-transparent":"chin"===r,"hover:bg-bg-300 transition-colors":"chin"===r&&!!o});return(0,s.jsx)(l.N,{children:t&&(0,s.jsx)(i.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:o?(0,s.jsx)("button",{className:(0,n.A)(d),onClick:o,children:t}):(0,s.jsx)("div",{className:d,children:t})})})}},54594:(e,t,a)=>{a.d(t,{Xx:()=>G,_9:()=>U,CH:()=>Y,tl:()=>B});var s=a(54568),n=a(74813),l=a(99969),i=a.n(l),r=a(7620),o=a(94629),d=a(63911),c=a(9398),u=a(47592),m=a(2e3),p=a(95617),h=a(28044),x=a(10369),f=a(96547),g=a(45538),y=a(79052),v=a(36016),b=a(22624),j=a(88775),w=a(45271),M=a(68067),_=a(97208),k=a(42605),A=a(55134),N=a(35580),C=a(3424),S=a(81023),E=a(64145),I=a(23169),T=a(43906),D=a.n(T);let O={includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4},L={path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:i(),inputMenuIsOpen:!1,setInputMenuIsOpen:i(),menuView:{rootItems:[],currentItems:[]},handleClickItem:i(),handleBack:i(),highlightedItemKey:null,setHighlightedItemKey:i(),animationDirection:"none"},R={...L,styleModalOpenWithScreen:null,setStyleModalOpenWithScreen:i(),createProjectModalIsOpen:null,setCreateProjectModalIsOpen:i(),githubModalIsOpen:!1,setGithubModalIsOpen:i(),gmailAuthModalIsOpen:!1,setGmailAuthModalIsOpen:i(),createPromptArgumentModalIsOpen:null,setCreatePromptArgumentModalIsOpen:i()},P={...L,mcpDirectoryModalIsOpen:!1,setMcpDirectoryModalIsOpen:i()},z=(0,r.createContext)(R),F=(0,r.createContext)(P),U=e=>{let{actions:t,rootItems:a,menuType:l,inputMenuIsOpen:i,setInputMenuIsOpen:o}=e,u=(0,n.st)(),p=(0,r.useRef)(null),[h,f]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[w,M]=(0,r.useState)(""),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i&&e){o(!0),"plus"===l&&u.track({event_key:"claudeai.plus_menu.opened"});return}if(i&&!e){M("");let e=()=>{var e;k(null,!0),j(null),o(!1),null==(e=document.getElementById("input-".concat(l,"-menu-trigger")))||e.focus()};t.withDelay?setTimeout(e,200):e()}},k=(e,t)=>{t?p.current=e:p.current=h,f(e)},A=(()=>{if(h){let e=a.find(e=>e.key===h);if(e&&"children"in e)return e.children}return a})(),N=(e=>{let{actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,pathItems:l,path:i,menuType:o}=e,u=(0,x.A)(),p=(0,r.useRef)(a),{handleSearchDrive:h,searchedDriveItems:f}=(e=>{let{path:t,actions:a,inputMenuSearchQuery:n,inputMenuIsOpen:l,menuType:i}=e,o="drive",d=(t===o||!t)&&l&&"plus"===i,u=(0,y.LP)(),[p,h]=(0,r.useState)([]),{recentDriveDocs:x}=(0,y.zH)(d),f=(0,r.useMemo)(()=>new I.A(x,{...O,keys:["title"]}),[x]);return u&&d?{handleSearchDrive:()=>{let e=n.toLowerCase();if(!e||!x)return[];h(f.search(e,{limit:t===o?10:5}).map(e=>({key:e.item.uri,type:"button",label:e.item.title||"",icon:(0,s.jsx)(c.A9,{type:m.v8.GDRIVE,variant:c.UF.DOCS,size:16}),onClick:()=>{a.createDriveSyncSource(e.item.uri)}})))},searchedDriveItems:p}:{handleSearchDrive:()=>[],searchedDriveItems:[]}})({path:i,actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,menuType:o}),{handleSearchProjects:v,searchedProjectItems:j}=(e=>{let{path:t,actions:a,inputMenuSearchQuery:n,inputMenuIsOpen:l,menuType:i,pathItems:o}=e,c="projects",u=(0,b.K)(),m=o.map(e=>{let{key:t}=e;return t}).indexOf("projects")>-1||"projects"===t,p=!!(n&&m&&(t===c||!t)&&l&&u&&"plus"===i),[h,x]=(0,r.useState)([]),{data:f}=(0,g.CB)({enabled:p,limit:g.dx}),y=(0,r.useMemo)(()=>new I.A(f||[],{...O,keys:["name","description"]}),[f]);return p?{handleSearchProjects:()=>{let e=n.toLowerCase();if(!e||!f)return[];x(y.search(e,{limit:t===c?10:5}).map(e=>({type:"button",key:e.item.uuid,label:e.item.name,icon:(0,s.jsx)(d.Jt,{size:16}),subtitle:e.item.creator.full_name,onClick:()=>a.onSelectProject(e.item.uuid)})))},searchedProjectItems:h}:{handleSearchProjects:()=>[],searchedProjectItems:[]}})({path:i,actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,menuType:o,pathItems:l}),{handleFilterMenuItems:w,filteredMenuItems:M}=(e=>{let{path:t,inputMenuSearchQuery:a,pathItems:s}=e,n=s.filter(e=>{let{menuItemHidden:t}=e;return!t}),[l,i]=(0,r.useState)([]);return"projects"===t||"drive"===t?{handleFilterMenuItems:()=>[],filteredMenuItems:[]}:{handleFilterMenuItems:()=>{let e=a.toLowerCase();if(!e)return n;let t=[];for(let e of n)t.push(e),!e.isDisabled&&"projects"!==e.key&&"drive"!==e.key&&"children"in e&&e.children&&t.push(...e.children);i(t.filter(t=>!t.nonSearchable&&"toggleAll"!==t.type&&"back"!==t.type&&"divider"!==t.type&&"string"==typeof t.label&&t.label.toLowerCase().includes(e)).slice(0,7))},filteredMenuItems:l}})({path:i,inputMenuSearchQuery:a,pathItems:l}),_=(0,r.useCallback)(()=>{w(),v(),h()},[w,v,h]),k=(0,r.useMemo)(()=>D()(()=>{_()},100),[_]);return((0,r.useEffect)(()=>{if(a&&n&&a!==p.current)return p.current=a,k(),()=>{k.cancel()}},[n,a,k]),M.length||j.length||f.length)?[M,j,f].reduce((e,t,a)=>[...e,...e.length&&t.length?[{key:"divider".concat(a+1),type:"divider",label:""}]:[],...t],[]):[{key:"loading",type:"button",label:u.formatMessage({defaultMessage:"No results found",id:"hX5PAbCTOR"}),icon:(0,s.jsx)(E.e,{size:16}),onClick:()=>void 0,isDisabled:!0}]})({actions:t,inputMenuSearchQuery:w,inputMenuIsOpen:i,pathItems:A,path:h,menuType:l}),C=w.trim().length?N:A,{handleClickItem:T,handleBack:L}=(e=>{let{currentItems:t,inputMenuIsOpen:a,setInputMenuIsOpen:s,inputMenuSearchQuery:n,setInputMenuSearchQuery:l,path:i,handleUpdatePath:o,highlightedItemKey:d,setHighlightedItemKey:c}=e,u=(0,r.useCallback)(e=>{if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type)s(!0),o(e.key,!0);else if("button"===e.type||"switch"===e.type||"toggle"===e.type||"option"===e.type){var t;null==(t=e.onClick)||t.call(e)}},[s,o]),m=(0,r.useCallback)(e=>{i&&(null==e||e.preventDefault(),o(null),c(i),(0,S.l)())},[i,c,o]),p=(0,r.useCallback)(e=>{let a,s=t.filter(e=>!["subheader","divider"].includes(e.type)&&!e.isDisabled&&!e.menuItemHidden),n=s.findIndex(e=>{let{key:t}=e;return t===d});a="ArrowUp"===e?n>0?n-1:s.length-1:n<s.length-1?n+1:0,c(s[a].key)},[t,d,c]),h=(0,r.useCallback)(e=>{var t,n,i;if(!a)return void u(e);if(!e.isDisabled){if(l(""),"back"===e.type)return void m();if("button"===e.type){null==(t=e.onClick)||t.call(e),e.skipCloseOnClick||s(!1);return}if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type){o(e.key),c(null),(0,S.l)();return}"option"===e.type&&(null==(n=e.onClick)||n.call(e),e.skipCloseOnClick||s(!1,{withDelay:!0})),("toggleAll"===e.type||"toggle"===e.type||"switch"===e.type)&&(null==(i=e.onClick)||i.call(e),(0,S.l)())}},[m,u,o,a,l,s,c]),x=(0,r.useCallback)((e,a)=>{if(!d)return;let s=t.find(e=>{let{key:t}=e;return t===d});s&&("Enter"===e||["optionGroup","toggleGroup","buttonGroup"].includes(s.type))&&(a.preventDefault(),h(s))},[d,t,h]);return(0,r.useEffect)(()=>{if(!a)return;let e=e=>{"Tab"===e.key?e.preventDefault():"Escape"===e.key?(e.preventDefault(),s(!1)):"ArrowUp"===e.key||"ArrowDown"===e.key?(e.preventDefault(),p(e.key)):"ArrowRight"===e.key||"Enter"===e.key?x(e.key,e):"ArrowLeft"!==e.key||n||m(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,s,n,p,x,m]),{handleClickItem:h,handleBack:m}})({currentItems:C,inputMenuIsOpen:i,setInputMenuIsOpen:_,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,path:h,handleUpdatePath:k,highlightedItemKey:v,setHighlightedItemKey:j}),R=p.current&&!h?"back":!p.current&&h?"forward":"none";return{path:h,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,inputMenuIsOpen:i,setInputMenuIsOpen:_,menuView:{rootItems:a,currentItems:C},handleClickItem:T,handleBack:L,highlightedItemKey:v,setHighlightedItemKey:j,animationDirection:R}};function G(e){let{placement:t,children:a}=e,[n,l]=(0,r.useState)(!1),[i,S]=(0,r.useState)(!1),[E,I]=(0,r.useState)(null),[T,D]=(0,r.useState)(!1),[O,L]=(0,r.useState)(!1),[R,P]=(0,r.useState)(!1),[G,Y]=(0,r.useState)(null),[B,H]=(0,r.useState)(null),W=(0,C.Cn)({setMcpDirectoryModalIsOpen:P,setStyleModalOpenWithScreen:Y,setCreateProjectModalIsOpen:I,setGithubModalIsOpen:D,setGmailAuthModalIsOpen:L,setCreatePromptArgumentModalIsOpen:H}),V=(e=>{let{placement:t,actions:a,inputMenuIsOpen:n}=e,l=(0,x.A)(),i=(e=>{let{actions:t}=e,a=(0,x.A)();return(0,h.V)()||(0,u.fJ)()?null:{key:p.xd.ADD_SCREENSHOT,type:"button",icon:(0,s.jsx)(d.i7,{size:16}),label:a.formatMessage({defaultMessage:"Take a screenshot",id:"aTaOpCB71M"}),onClick:t.onAddScreenshot}})({actions:a}),r=(e=>{let{actions:t}=e,a=(0,x.A)();return(0,v.Cq)()?{key:p.xd.GITHUB,type:"button",icon:(0,s.jsx)(c.A9,{type:m.v8.GITHUB,size:16}),label:a.formatMessage({defaultMessage:"Add from {github}",id:"h3J3E4bRfj"},{github:"GitHub"}),onClick:t.openGithubModal}:null})({actions:a}),o=(e=>{let{actions:t,inputMenuIsOpen:a}=e,n=(0,x.A)(),l=(0,_.Hd)(),i=(0,y.LP)(),{isDriveAuthenticated:r,initDriveAuth:o}=(0,y.cI)(),{recentDriveDocs:d,isLoading:u}=(0,y.zH)(a);if(!i)return null;let h=n.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"}),f={key:p.xd.DRIVE,icon:(0,s.jsx)(c.A9,{type:m.v8.GDRIVE,size:16}),label:h};if(!r)return{...f,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:o};let g=u?[{key:"drive-loading",type:"button",label:n.formatMessage({defaultMessage:"{drive} documents loading...",id:"PjuSZ/7RIb"},{drive:"Drive"}),isDisabled:!0}]:d.length?d.slice(0,8).map(e=>{var a;return{key:e.uri,type:"button",label:null!=(a=e.title)?a:"Untitled",icon:(0,s.jsx)(c.A9,{type:m.v8.GDRIVE,variant:c.UF.DOCS,size:16}),onClick:()=>{t.createDriveSyncSource(e.uri)}}}):[{key:"empty",type:"button",label:n.formatMessage({defaultMessage:"No recent {drive} documents",id:"XepM9W1Mo/"},{drive:"Drive"}),isDisabled:!0}];return{...f,type:"buttonGroup",children:[...l?[]:[{type:"back",key:"drive-back",label:h}],...g]}})({actions:a,inputMenuIsOpen:n}),S=(e=>{let{inputMenuIsOpen:t,actions:a}=e,n=(0,x.A)(),l=(0,_.Hd)(),i=(0,j.QN)(),{isProjectLocked:r}=(0,j.Jy)(e=>({isProjectLocked:e.isProjectLocked})),o=(0,b.K)(),{data:c}=(0,g.CB)({enabled:t&&o,creatorFilter:"is_creator",limit:8}),{data:u}=(0,g.CB)({enabled:t&&o,creatorFilter:"is_not_creator",limit:8}),m=[...c||[],...u||[]],{data:h}=(0,g.fo)(i),f=(null==m?void 0:m.slice(0,8).map(e=>({key:e.uuid,type:"option",label:e.name,subtitle:e.creator.full_name,onClick:()=>a.onSelectProject(e.uuid),icon:(0,s.jsx)(d.Jt,{size:16}),isChecked:e.uuid===i})))||[];if(r||!o)return null;let y=n.formatMessage({defaultMessage:"Use a project",id:"H/dsl+Px2v"});return{key:p.xd.PROJECTS,type:"optionGroup",icon:(0,s.jsx)(d.Jt,{size:16}),label:y,secondaryText:null==h?void 0:h.name,children:[...l?[]:[{type:"back",key:"projects-back",label:y}],...f,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,s.jsx)(d.OM,{size:16}),label:n.formatMessage({defaultMessage:"Start a new project",id:"0y7bg6nA29"}),onClick:()=>a.onCreateProject(!1),nonSearchable:!0}],indicatorActive:!!h}})({actions:a,inputMenuIsOpen:n});(e=>{let{inputMenuIsOpen:t,actions:a}=e,n=(0,x.A)(),l=(0,M.fS)("claudeai_beam").value,i=(0,_.Hd)(),{isProjectLocked:r,beamChatUuid:o,isNewBeamChat:c}=(0,k.o)(),u=((0,A.f)(),(0,b.K)()),{data:m}=(0,g.CB)({enabled:t&&u,limit:8,isBeam:!0});if(!l)return;let p=[...(null==m?void 0:m.slice(0,8).map(e=>({key:"beam-".concat(e.uuid),type:"option",label:e.name,onClick:()=>{a.onSelectBeamChat(e.uuid)},icon:(0,s.jsx)(d.g6,{size:16}),isChecked:e.uuid===o})))||[]];if(r||!u)return;let h=n.formatMessage({defaultMessage:"Start a beam chat",id:"6SS0ZNAywq"}),f=o?null==m?void 0:m.find(e=>e.uuid===o):null;return d.g6,null==f||f.name,[...i?[]:[{type:"back",key:"beam-chat-back",label:h}],...p,(d.OM,n.formatMessage({defaultMessage:"Start a new beam chat",id:"9VyHCfyJ8B"}))]})({actions:a,inputMenuIsOpen:n});let E=(e=>{let{actions:t}=e,a=(0,x.A)(),n=(0,N.Uz)({isConnected:!0,hasPromptsOrResources:!0}),l=(0,f.R4)(),i=(0,f.vW)();return n.map(e=>{let n=e.prompts.map(a=>({key:"prompt-".concat(e.name,"-").concat(a.name),type:"button",icon:(0,s.jsx)(d.ry,{size:16}),label:a.displayName,onClick:()=>{var s;return(null==(s=a.arguments)?void 0:s.length)?t.onEnterPromptArguments(e.uuid,a):void i({serverUuid:e.uuid,prompt:a,args:{}})}})),r=e.resources.map(t=>({key:"resource-".concat(e.name,"-").concat(t.uri),type:"button",icon:(0,s.jsx)(d.ZH,{size:16}),label:t.displayName,onClick:()=>void l({serverUuid:e.uuid,resource:t})}));return{key:"mcp-server-".concat(e.name),type:"buttonGroup",label:a.formatMessage({defaultMessage:"Add from {server}",id:"qEj6u51OfR"},{server:e.name}),icon:(0,s.jsx)(w.z,{size:16,type:e.iconType,src:e.iconSrc,name:e.name}),children:[...n,...r]}})})({actions:a});return[{key:p.xd.UPLOAD,type:"button",icon:(0,s.jsx)(d.o3,{size:16}),label:l.formatMessage({defaultMessage:"Upload a file",id:"Zc9xq9TzDD"}),onClick:()=>(0,C.U_)(t)},...i?[i]:[],...r?[r]:[],...o?[o]:[],...E,...S?[{key:"divider1",type:"divider",label:""},S]:[]]})({placement:t,actions:W,inputMenuIsOpen:n}),K=U({actions:W,rootItems:V,menuType:"plus",inputMenuIsOpen:n,setInputMenuIsOpen:l}),q=(0,o.ey)({actions:W}),X=U({actions:W,rootItems:q,menuType:"tools",inputMenuIsOpen:i,setInputMenuIsOpen:S}),$=(0,r.useMemo)(()=>({...K,styleModalOpenWithScreen:G,setStyleModalOpenWithScreen:Y,createProjectModalIsOpen:E,setCreateProjectModalIsOpen:I,githubModalIsOpen:T,setGithubModalIsOpen:D,gmailAuthModalIsOpen:O,setGmailAuthModalIsOpen:L,createPromptArgumentModalIsOpen:B,setCreatePromptArgumentModalIsOpen:H}),[K,G,Y,E,I,T,D,O,L,B,H]),J=(0,r.useMemo)(()=>({...X,mcpDirectoryModalIsOpen:R,setMcpDirectoryModalIsOpen:P}),[X,R,P]);return(0,s.jsx)(z.Provider,{value:$,children:(0,s.jsx)(F.Provider,{value:J,children:a})})}function Y(){return(0,r.useContext)(z)}function B(){return(0,r.useContext)(F)}},55134:(e,t,a)=>{a.d(t,{f:()=>i,y:()=>l});var s=a(42605),n=a(88775);let l=()=>{let{prompt:e}=(0,n.QT)(),{beamChatUuid:t,setBeamChatUuid:a,isNewBeamChat:l,setIsNewBeamChat:i,setPrompt:r,promptInputRef:o}=(0,s.o)();return s=>{l&&!s&&i(!1),t===s?a(void 0):(a(s),e.length>0&&"@"===e[e.length-1]&&r(e.slice(0,-1)),setTimeout(()=>{var e;null==(e=o.current)||e.focus()},250))}},i=()=>{let{setIsNewBeamChat:e}=(0,s.o)();return()=>{e(!0)}}},55146:(e,t,a)=>{a.d(t,{E:()=>p,I:()=>m});var s=a(19736),n=a(74813),l=a(64328),i=a(4869),r=a(21113),o=a.n(r),d=a(27541),c=a(7620),u=a(2327);let m=()=>{let e="new-conversation-params-for-navigation",t=(0,i.useQueryClient)(),a=(0,c.useCallback)(()=>{let t=localStorage.getItem(e);if(!t)return{};try{let e=JSON.parse(t);return o()(e,e=>Date.now()-e.created_at<6e4)}catch(t){localStorage.removeItem(e)}return{}},[]);return{prepareNewConversation:(0,c.useCallback)((s,n)=>{let l={created_at:Date.now(),...n};t.setQueryData([e,s],l);let i=a();i[s]=l;try{localStorage.setItem(e,JSON.stringify(i))}catch(e){}},[t,a]),getCreateParamsForConvo:(0,c.useCallback)(s=>{let n=a(),l=t.getQueryData([e,s])||n[s];t.removeQueries({queryKey:[e,s]});let i=o()(n,(e,t)=>t!==s);return localStorage.setItem(e,JSON.stringify(i)),l},[t,a])}};function p(){var e;let{setTemporaryConversationUuid:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,n.st)(),{data:i}=(0,s.Fn)(),{mutateAsync:r}=(0,s.CW)(),[o,p]=(0,u.d)(),{prepareNewConversation:h}=m(),{account:x}=(0,l.YL)(),f=(0,d.useRouter)();return(0,c.useCallback)(async e=>{var s;let{model:n,project_uuid:l,include_conversation_preferences:d,paprika_mode:c,compass_mode:u,create_mode:m,name:g,is_temporary:y,is_new_beam_chat:v,beam_chat_uuid:b}=e,j=r({uuid:o,name:null!=g?g:"",model:n,project_uuid:l,include_conversation_preferences:d,paprika_mode:c,compass_mode:u,create_mode:m,is_temporary:y,is_new_beam_chat:v,beam_chat_uuid:b});if(h(o,e),await j,y)null==t||t(o);else if((null==x||null==(s=x.settings)?void 0:s.has_finished_claudeai_onboarding)===!1){let e=new URLSearchParams;e.append("returnTo","/chat/".concat(o));let t="/onboarding?".concat(e.toString());f.push(t)}else void 0!==b?f.push("/beam/".concat(b,"/chat/").concat(o)):f.push("/chat/".concat(o));return p(),(null==i?void 0:i.is_first_conversation)&&await a.track({event_key:"chat.conversation.first_conversation_created",surface:"claude.ai"}),{uuid:o}},[r,o,p,i,a,f,h,null==x||null==(e=x.settings)?void 0:e.has_finished_claudeai_onboarding,t])}},55839:(e,t,a)=>{a.d(t,{CD:()=>o});var s=a(1613),n=a(64328),l=a(80688),i=a(2e3),r=a(79052);let o=()=>{let e=(0,r.$f)(),t=(0,r.vT)(),a=(0,r.K6)(),{data:s}=d(i.v8.GDRIVE),n=null==s?void 0:s.state;return!!(e&&t&&a&&n&&[i.I5.CREATED,i.I5.UPDATING,i.I5.PENDING].includes(n))},d=e=>{let{account:t,activeOrganization:a}=(0,n.YL)(),r=null==t?void 0:t.uuid,o=null==a?void 0:a.uuid;return(0,s.Sk)("/api/organizations/".concat(o,"/sync/ingestion/").concat(e,"/progress"),{queryKey:[l.hx,{orgUuid:o,accountUuid:r,syncSourceType:e}],enabled:!!a,refetchInterval:e=>{let t;return!!(e.state.data&&(t=e.state.data.state,[i.I5.CREATED,i.I5.PENDING,i.I5.UPDATING].includes(t)))&&6e4},meta:{noToast:!0}})}},58841:(e,t,a)=>{a.d(t,{u:()=>u,i:()=>m});var s=a(54568),n=a(99969),l=a.n(n),i=a(7620);function r(e,t){switch(t.type){case"OPEN_COMPASS_STATUS":return{...e,selectedItem:{type:"compass",data:t.data}};case"SELECT_ATTACHMENT":return{...e,selectedItem:{type:"attachment",attachment:t.attachment}};case"SELECT_ARTIFACT":return{...e,selectedItem:{type:"artifact",id:t.id,versionUuid:t.versionUuid}};case"SELECT_DOC":return{...e,selectedItem:{type:"doc",id:t.id}};case"SELECT_FILE":return{...e,selectedItem:{type:"file",path:t.path,toolType:t.toolType,messageId:t.messageId}};case"CLEAR_SELECTED":return{...e,selectedItem:null,activeMessageUuid:void 0};case"SET_ACTIVE_MESSAGE_UUID":return{...e,activeMessageUuid:t.uuid};case"UPDATE_ATTACHMENTS":return{...e,attachments:t.attachments};case"UPDATE_FILES":return{...e,files:t.files};case"UPDATE_SYNC_SOURCES":return{...e,syncSources:t.syncSources};case"UPDATE_STREAMING_FILE":{var a,s;let n=new Map(e.streamingFiles),l=n.get(t.path);return n.set(t.path,{content:t.content,renderAs:t.renderAs,showingInRightPane:null!=(s=null!=(a=t.showingInRightPane)?a:null==l?void 0:l.showingInRightPane)&&s}),{...e,streamingFiles:n}}case"CLEAR_STREAMING_FILE":{let a=new Map(e.streamingFiles);return a.delete(t.path),{...e,streamingFiles:a}}default:return e}}let o={selectedItem:null,attachments:[],files:[],syncSources:[],activeMessageUuid:void 0,conversationUuid:void 0,streamingFiles:new Map},d={chatResourceState:o,dispatchChatResource:l()},c=(0,i.createContext)(d);function u(e){let{children:t,conversationUuid:a}=e,[n,l]=(0,i.useReducer)(r,{...o,conversationUuid:a}),d=(0,i.useMemo)(()=>({chatResourceState:n,dispatchChatResource:l}),[n,l]);return(0,s.jsx)(c.Provider,{value:d,children:t})}function m(){return(0,i.useContext)(c)}},61105:(e,t,a)=>{a.d(t,{E:()=>n,V:()=>l});var s=a(7620);function n(e){let t=[];for(let s of e){var a;for(let e of null!=(a=s.files_v2)?a:s.files)"file_kind"in e&&t.push(e)}return t}let l=e=>(0,s.useMemo)(()=>n(e),[e])},65016:(e,t,a)=>{a.d(t,{D$:()=>c});var s=a(45054),n=a(10369),l=a(8468),i=a(10665),r=a(35391);let o="advanced",d=["enabled_web_search","enabled_bananagrams","enabled_sourdough","enabled_foccacia"];function c(e){let{toggleConversationSetting:t,batchToggleConversationSettings:a}=(0,i.r)(),c=(0,i.v)("compass_mode"),u=(0,r.YW)(),m=(0,l.Gm)(e),{addSuccess:p}=(0,s.Y)(),h=(0,n.A)(),x=(0,i.v)("enabled_web_search"),f=(0,i.v)("enabled_bananagrams"),g=(0,i.v)("enabled_sourdough"),y=(0,i.v)("enabled_foccacia"),v=(0,i.v)("enabled_mcp_tools");return{toggleSearchTool:(e,s)=>{if(s)return void t(e,s);!function(e){let{remainingToolCount:t,compassMode:a}=e;return 0===t&&a===o}({remainingToolCount:function(e){let{toolToIgnore:t,currentStates:a}=e,s=0;for(let e of d)e!==t&&a[e]&&s++;return a.enabled_mcp_tools&&Object.values(a.enabled_mcp_tools).some(e=>!!e)&&s++,s}({toolToIgnore:e,currentStates:{enabled_web_search:null!=x&&x,enabled_bananagrams:null!=f&&f,enabled_sourdough:null!=g&&g,enabled_foccacia:null!=y&&y,enabled_mcp_tools:v}}),compassMode:c})?t(e,s):a({compass_mode:null,[e]:!1})},toggleResearchMode:e=>{var s,n,l;if(!e)return void t("compass_mode",null);(s=m,n=u,l=c,!s&&n&&l!==o)?(a({enabled_web_search:!0,compass_mode:o}),p(h.formatMessage({defaultMessage:"Web search enabled automatically for Research",id:"ss4xBdPHtN"}))):t("compass_mode",o)},canAutoEnableWebSearch:!m&&u,toggleConversationSetting:t,batchToggleConversationSettings:a}}},68034:(e,t,a)=>{a.d(t,{h:()=>d});var s=a(54568),n=a(44995),l=a(64328),i=a(84617);a(7620);var r=a(59666),o=a(59951);function d(){let{allowSelfUpgrade:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(function(e){let t=(0,l.UC)(),a=(0,l.wi)(),s=(0,l.bu)(),i=(0,l.tP)(),r=(0,n.fZ)(),d=(0,o.o)();return r?(i||t)&&e?a||s||i?!t&&s?"subscribe-max":!t&&i?"subscribe-max-20x":"subscribe":"subscribe-pro-only":d?"enable-overages":"none":"contact-sales"}(e)){case"contact-sales":return(0,s.jsx)(c,{});case"subscribe":return(0,s.jsx)(u,{});case"subscribe-pro-only":return(0,s.jsx)(m,{});case"subscribe-max":return(0,s.jsx)(p,{});case"subscribe-max-20x":return(0,s.jsx)(h,{});case"enable-overages":return(0,s.jsx)(x,{});case"none":return null}}function c(){let{websiteBaseUrl:e}=(0,n._r)();return(0,s.jsx)(i.Y,{href:"".concat(e,"/contact-sales"),className:"text-sm",children:(0,s.jsx)(r.A,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function u(){return(0,s.jsx)(i.Y,{href:"/upgrade?hide_free=true",className:"text-sm",children:(0,s.jsx)(r.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function m(){return(0,s.jsx)(i.Y,{href:"/upgrade/pro",className:"text-sm",children:(0,s.jsx)(r.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function p(){return(0,s.jsx)(i.Y,{href:"/upgrade?hide_pro=true",className:"text-sm",children:(0,s.jsx)(r.A,{defaultMessage:"Subscribe to Max",id:"8ACH3Vf732"})})}function h(){return(0,s.jsx)(i.Y,{href:"/upgrade",className:"text-sm",children:(0,s.jsx)(r.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function x(){return(0,s.jsx)(i.Y,{href:"/settings/usage",className:"text-sm",children:(0,s.jsx)(r.A,{defaultMessage:"Keep working",id:"YJG5oUjsVT"})})}},68522:(e,t,a)=>{a.d(t,{V:()=>aE});var s=a(2348),n=a(54568),l=a(37541),i=a(21266),r=a(68067),o=a(9679),d=a(72902),c=a(39109),u=a(61295),m=a(7620),p=a(10369),h=a(86141),x=a(9596),f=a(50746),g=a(83158),y=a(47479),v=a(18800);let b=e=>{let{attachments:t,files:a,syncSourceResults:s,onRemoveAttachment:l,onRemoveFile:i,onRemoveSyncSource:r,isUploadingFile:o,isUploadingSync:d}=e;return(0,n.jsxs)("div",{className:"border-border-300/25 border-t-0.5 rounded-b-2xl bg-bg-100 !p-3.5 !m-0 flex flex-row overflow-x-auto gap-3 px-3.5 py-2.5 -my-1",children:[t.map((e,t)=>(0,n.jsx)(g.NM,{file:e,size:"md",onRemoveFile:()=>l(t),isEditable:!0},t)),a.map((e,t)=>(0,n.jsx)(g.NM,{file:e,showWarnings:!0,size:"md",onRemoveFile:()=>i(t),isEditable:!0},e.file_uuid)),(0,n.jsx)(y.NG,{isShown:o}),s.map(e=>{let{syncSource:t,uuid:a}=e;return(0,n.jsx)(v.V,{uuid:a,syncSource:t,onRemove:()=>r(a),isEditable:!0},a)}),(0,n.jsx)(y.NG,{isShown:d})]})};var j=a(42605),w=a(55188),M=a(89568),_=a(88775),k=a(73619),A=a(44894),N=a(45054),C=a(2e3),S=a(59666),E=a(79052),I=a(51561),T=a(49629),D=a(96614),O=a(71462),L=a(18727),R=a(24407),P=a(17421),z=a(86545),F=a(47831);let U=e=>{var t,a;let{model:s,projectUuid:l}=e,{allModelOptions:i}=(0,z.A9)(),r=(0,F.ED)(l),o=(0,F.Pb)(l),d=null!=(a=null==(t=i.find(e=>e.model===s))?void 0:t.slow_kb_warning_threshold)?a:155e3,c=!o&&(null!=r?r:0)>d?(0,n.jsx)("div",{className:"max-md:hidden",children:(0,n.jsx)(S.A,{defaultMessage:"Large knowledge may slow responses",id:"d6mr4c6d+8"})}):void 0;return(0,n.jsx)("div",{className:"text-text-400 text-xs ml-2",children:null!=c?c:void 0})};var G=a(52135),Y=a(64328),B=a(60687),H=a(63911),W=a(23812),V=a(87483),K=a(13910),q=a(47592),X=a(30586),$=a(95617),J=a(65315),Z=a(17560),Q=a(19977),ee=a(69287),et=a(66365),ea=a(35415),es=a(30541),en=a(8468),el=a(74326),ei=a(10665),er=a(97208);let eo=e=>{let{remaining:t,total:a}=e;return(0,n.jsxs)("span",{className:"inline-flex items-center gap-0.5 text-accent-secondary-100 bg-bg-000 border-0.5 border-border-300 rounded-full px-2 py-0.5 text-xs ml-1",children:[(0,n.jsx)("span",{children:t}),(0,n.jsx)("span",{children:"/"}),(0,n.jsx)("span",{children:a})]})};var ed=a(66912);let ec=e=>{let{model:t}=e,a=t.name.replace("Claude",""),s=a.startsWith("\uD83E\uDD2B")?(0,n.jsx)(K.Tooltip,{tooltipContent:a,children:(0,n.jsx)("span",{children:"\uD83E\uDD2B"})}):a;return(0,n.jsx)("div",{className:"font-claude-response inline-flex gap-[3px] text-[14px] h-[14px] leading-none items-baseline",children:(0,n.jsx)("div",{className:"flex items-center gap-[4px]",children:(0,n.jsx)("div",{className:"whitespace-nowrap select-none",children:s})})})};var eu=a(74813),em=a(22147),ep=a(27541);let eh=e=>{let{anchorRef:t,onClose:a,onSelectModel:s}=e,l=(0,ep.useRouter)(),o=(0,Y.zc)(),d=(0,Y.O9)(),u=(0,Y.mV)(),{mutateAsync:p}=(0,es.x)(),{allModelOptions:h}=(0,z.A9)(),x=(0,J.wc)(),{track:f}=(0,eu.st)(),{value:g}=(0,r.fS)("voldemort_luna_lovegood"),y=x[J.m],v=h.find(e=>e.model===y);(0,m.useEffect)(()=>{v&&g&&f({event_key:"claudeai.model_upsell.tooltip.viewed",model_id:v.model})},[v,g,f]);let b=async()=>{await p({spotlight:X.L.VOLDEMORT_LUNA_LOVEGOOD,action:X.f.DISMISSED}),f({event_key:"claudeai.model_upsell.tooltip.dismissed",model_id:null==v?void 0:v.model}),a()},j=async()=>{a(),await p({spotlight:X.L.VOLDEMORT_LUNA_LOVEGOOD,action:X.f.INTERACTED}),f({event_key:"claudeai.model_upsell.tooltip.clicked",model_id:null==v?void 0:v.model}),l.push("/upgrade")},w=async()=>{v&&s&&s(v.model),a(),await p({spotlight:X.L.VOLDEMORT_LUNA_LOVEGOOD,action:X.f.INTERACTED}),f({event_key:"claudeai.model_upsell.tooltip.clicked",model_id:null==v?void 0:v.model})};return v&&g?(0,n.jsx)(c.N,{children:(0,n.jsxs)(em.U,{anchorRef:t,side:"bottom",align:"start",onClose:b,introDelay:.2,accentColor:"secondary",children:[(0,n.jsx)(W.$,{variant:"ghost",size:"icon_xs",onClick:b,className:"!absolute !top-2 !right-2 !text-accent-secondary-000 hover:!text-accent-secondary-100 !w-6 !h-6 !p-0 !rounded-md hover:!bg-accent-secondary-100/10",children:(0,n.jsx)(H.X,{size:12})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"font-base-bold text-accent-secondary-000 pr-6",children:(0,n.jsx)(i.YX,{id:"twilight_forest_echo"})}),(0,n.jsx)("p",{className:"font-base text-accent-secondary-000",children:(0,n.jsx)(i.YX,{id:"silver_mountain_breeze"})})]}),(0,n.jsx)("div",{className:"space-y-2",children:d||o||u?(0,n.jsx)(W.$,{variant:"outline",size:"sm",onClick:w,className:"w-full !bg-transparent !border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10 !rounded-lg font-small-bold",children:(0,n.jsx)(i.YX,{id:"emerald_river_dawn"})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(W.$,{variant:"outline",size:"sm",onClick:j,className:"w-full !bg-transparent !border-accent-secondary-100 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10 !rounded-lg font-small-bold",children:(0,n.jsx)(i.YX,{id:"crystal_meadow_path"})})})})]})]})}):null};function ex(){let e=(0,s._)(["\n  uppercase\n  mt-0.3\n  bg-accent-pro-100/10\n  text-accent-pro-000\n  rounded-full\n  px-2\n  ml-2\n  -mr-1\n  border-0.5\n  border-accent-pro-100/10\n  leading-4\n  h-4\n  text-[0.6rem]\n  flex-shrink-0\n"]);return ex=function(){return e},e}function ef(){let e=(0,s._)(["\n  border-0.5\n  border-border-300\n  -mr-1\n  ml-2\n  translate-y-px\n  rounded-full\n  px-2\n  py-px\n  text-xs\n  text-text-500\n  group-hover:bg-bg-100\n"]);return ef=function(){return e},e}let eg=l.J.div(ex()),ey=l.J.div(ef()),ev=(0,n.jsx)(S.A,{defaultMessage:"Upgrade to Claude Pro to use our best and latest models",id:"GFsmqWxmnh"}),eb={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},ej=e=>{var t,a;let s,{model:l,currentModelOption:r,opensInNewChat:o,onSelect:c,tag:u,tooltip:h,onUpgradeClick:x}=e,f=(0,p.A)(),g=(0,m.useMemo)(()=>({"haiku-3-5-description":(0,n.jsx)(S.A,{defaultMessage:"Fastest model for daily tasks",id:"75wJbzj8Tm",description:"A description of the AI model"}),"sonnet-3-7-description":(0,n.jsx)(S.A,{defaultMessage:"Our most intelligent model yet",id:"WW0Apyq96E",description:"A description of the AI model"}),"telescope-cinnamon-lampshade":(0,n.jsx)(i.YX,{id:"telescope_cinnamon_lampshade"}),"origami-glacier-marmalade":(0,n.jsx)(i.YX,{id:"origami_glacier_marmalade"})}),[]),{data:y}=(0,ea.jc)(),v=(0,Y.h0)(),b=(0,et.useLayer)("trials_freemium"),j=l.model===(null==r?void 0:r.model),w=l.name.replace("Claude","").trim(),M=!v,_=b.get("free_opus",!1),k=l.model.startsWith("claude-opus-4");if(k&&M&&_&&y&&void 0!==y.remaining&&y.resets_at){let e=new Date(1e3*y.resets_at),t=f.formatDate(e,{month:"short",day:"numeric"});s=f.formatMessage({defaultMessage:"{remaining} remaining until {date}",id:"httnsxXSeU"},{remaining:y.remaining,date:t})}let A=k&&M&&_&&(null==y?void 0:y.remaining)===0,N=A?"Upgrade":u;return(0,n.jsx)(K.Tooltip,{tooltipContent:h,side:"right",children:(0,n.jsxs)(V.tJ,{onClick:()=>{j||N||A?("Upgrade"===N||"PRO"===N||A)&&(null==x||x()):c(l)},className:(0,d.A)("group pr-1 py-1.5",("Upgrade"===N||"PRO"===N||A)&&"cursor-pointer"),disabled:A&&"Upgrade"!==N,children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-1 text-sm",children:(0,n.jsx)("div",{className:"flex items-center gap-1.5",children:(0,n.jsx)("div",{children:w})})}),N&&!j&&"Upgrade"===N?(0,n.jsx)(ed.M,{as:"button",className:"mt-0.3 ml-2 -mr-1 flex-shrink-0",onClick:e=>{e.stopPropagation(),null==x||x()}}):N&&!j?(0,n.jsx)(eg,{children:N}):null,!j&&o&&!N&&!A&&(0,n.jsx)(ey,{children:(0,n.jsx)(S.A,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,n.jsxs)("div",{className:"text-text-500 pr-4 text-xs mt-1",children:[null!=(a=g[null!=(t=l.description_i18n_key)?t:""])?a:l.description,s&&(0,n.jsx)("div",{className:"mt-0.5",children:s})]})]}),j&&(0,n.jsx)(Z.J,{className:"text-accent-secondary-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})},ew=e=>{let{models:t,currentModelOption:a,opensInNewChat:s,handleModelSelect:l,hasMultiModalContent:r,upsellMode:o}=e,d=(0,m.useMemo)(()=>({"velvet-bicycle-thunderstorm":(0,n.jsx)(i.YX,{id:"velvet_bicycle_thunderstorm"})}),[]),c=(0,er.Ob)(),u=(0,Y.h0)(),p=(0,et.useLayer)("trials_freemium").get("free_opus",!1),h=!u,x=()=>{window.location.href="/upgrade"};return(0,n.jsx)(n.Fragment,{children:t.map(e=>(0,n.jsx)(ej,{model:e,currentModelOption:a,opensInNewChat:s,onSelect:l,hasMultiModalContent:r,tag:o&&e.model!==(null==a?void 0:a.model)&&h&&!(p&&e.model.startsWith("claude-opus-4")||e.model.startsWith("claude-sonnet-4"))?c?"Upgrade":"PRO":void 0,tooltip:(e=>{var t,s;return o&&e.model!==(null==a?void 0:a.model)&&h&&!(p&&e.model.startsWith("claude-opus-4")||e.model.startsWith("claude-sonnet-4"))?ev:null!=(s=d[null!=(t=e.notice_text_i18n_key)?t:""])?s:e.notice_text})(e),onUpgradeClick:x},e.model))})},eM=e=>{let{selectedModel:t,conversationUuid:a,onSelect:s,placement:l,hasMultiModalContent:i,open:o,onOpenChange:c,isNewConversation:p}=e,h=!p,{allModelOptions:x,mainModels:f,overflowModels:g}=(0,z.A9)(),y=(0,D.Z3)(a||null),v=null!=t?t:y,b=(0,m.useRef)(null),[j,w]=(0,m.useState)(!1),M=(0,ei.v)("paprika_mode"),_=(0,el.j)(),k=(0,en.G8)(),{toggleConversationSetting:A}=(0,ei.r)(),N=(0,J.wc)(),{mutateAsync:C}=(0,es.x)(),E=x.find(e=>e.model===v);E||(E=eb);let{value:I}=(0,r.fS)("model_selector_enabled"),T=(0,Y.h0)(),{selectedTier:O,shouldOverrideFeatureAccess:L,isTierSelectorEnabled:R}=(0,B.t)(),P=R&&L&&!!O,F=P?O===$.d7.FREE:!I&&!T,U=(0,et.useLayer)("trials_freemium").get("free_opus",!1),{data:K}=(0,ea.jc)(),{setStickyModelPreference:Z}=(0,G.F)(),[er,ed]=(0,m.useState)(!1),{value:eu}=(0,r.fS)("voldemort_luna_lovegood"),{data:em}=(0,es.g)(),ep=v.startsWith("claude-opus-4")&&!T&&U&&K&&void 0!==K.remaining&&void 0!==K.limit;(0,m.useEffect)(()=>{eu&&(null==em?void 0:em.spotlight)===X.L.VOLDEMORT_LUNA_LOVEGOOD&&(E.model===N[J.m]?C({spotlight:X.L.VOLDEMORT_LUNA_LOVEGOOD,action:X.f.NOT_TARGETED}).catch(e=>(0,ee.Cp)(e,{extra:{message:"Failed to set spotlight action",spotlight:X.L.VOLDEMORT_LUNA_LOVEGOOD,action:X.f.NOT_TARGETED}})):w(!0))},[null==em?void 0:em.spotlight,eu,E,N,C]);let ex=e=>{let t=!T&&U;(I||P&&"free"!==O||t)&&(M&&!_(e.model)&&A("paprika_mode",null),k(e.model)||A("compass_mode",null),Z(e.model),s(e))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(V.ms,{className:(0,d.A)("relative"),..."bottom"===l?{side:"top",sideOffset:4}:{side:"bottom",sideOffset:4},align:"end",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:o,onOpenChange:e=>{c&&c(e),e||ed(!1)},trigger:(0,n.jsx)(u.P.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},className:"overflow-hidden shrink-0 p-1 -m-1",children:(0,n.jsxs)(W.$,{ref:b,variant:"ghost",size:"sm","data-testid":"model-selector-dropdown",append:(0,n.jsx)(H.bi,{className:"opacity-75"}),children:[(0,n.jsx)(ec,{model:E}),ep&&(0,n.jsx)(eo,{remaining:K.remaining,total:K.limit})]})}),children:[(0,n.jsx)(ew,{models:f,currentModelOption:E,opensInNewChat:h,handleModelSelect:ex,hasMultiModalContent:i,upsellMode:F}),g.length>0&&((0,q.Fr)()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V.DG,{}),(0,n.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,n.jsx)(S.A,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,n.jsx)(ew,{models:g,currentModelOption:E,opensInNewChat:h,handleModelSelect:ex,hasMultiModalContent:i,upsellMode:F})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V.DG,{}),(0,n.jsxs)(V.MS,{children:[(0,n.jsxs)(V.Wn,{className:"pl-2 py-1.5 gap-2",children:[(0,n.jsx)("div",{className:"group-hover:text-text-100  text-sm",children:(0,n.jsx)(S.A,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,n.jsx)(Q.K,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,n.jsx)(V.cm,{children:(0,n.jsx)(V.FV,{sideOffset:4,children:(0,n.jsx)(ew,{models:g,currentModelOption:E,opensInNewChat:h,handleModelSelect:ex,hasMultiModalContent:i,upsellMode:F})})})]})]}))]}),j&&(0,n.jsx)(eh,{anchorRef:b,onClose:()=>w(!1),onSelectModel:e=>{let t=x.find(t=>t.model===e);t&&ex(t)}})]})};var e_=a(11739),ek=a(72446),eA=a(13784),eN=a(23820),eC=a(3075);let eS=e=>{let{isOpen:t,onClose:a,onConfirm:s,isLoading:l=!1}=e,i=(0,m.useCallback)(e=>{"Enter"!==e.key||l||s()},[s,l]);return(0,m.useEffect)(()=>(t&&window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}),[t,i]),(0,n.jsxs)(eC.aF,{isOpen:t,onClose:a,title:(0,n.jsx)(S.A,{defaultMessage:"Want to stop researching?",id:"H+/TRHeeuc"}),children:[(0,n.jsx)("div",{className:"mt-4 mb-6",children:(0,n.jsx)(S.A,{defaultMessage:"This can’t be undone. If you want to research this topic again, you can ask in this chat or start a new session.",id:"RuV1dagwp6"})}),(0,n.jsxs)(eC.vW,{children:[(0,n.jsx)(W.$,{variant:"danger",onClick:s,disabled:l,autoFocus:!0,children:(0,n.jsx)(S.A,{defaultMessage:"Stop research",id:"l3tljn/kXe"})}),(0,n.jsx)(W.$,{variant:"secondary",onClick:a,children:(0,n.jsx)(S.A,{defaultMessage:"Keep researching",id:"ODR/0L48DC"})})]})]})},eE=e=>{let{prompt:t,files:a,attachments:s,syncSourceUuids:l,conversation:i,onSend:r,onStop:o,isSending:d,isDisabled:u,disabledReason:m,currentCompassTask:p}=e,h=(()=>{if(p)return"researching";if(i){let{isSampling:e,isStoppingSampling:t}=i;if(e)return t?"stopping":"sampling"}return t.length>0||a.length>0||s.length>0||l.length>0?"drafting":"empty"})();return(0,n.jsx)(c.N,{children:"sampling"===h||"stopping"===h?(0,n.jsx)(eT,{onStop:o,isLoading:"stopping"===h},"stop"):"researching"===h?(0,n.jsx)(eI,{conversationId:null==i?void 0:i.id,taskId:p},"stop_research"):(0,n.jsx)(eD,{isSending:d,isDisabled:u,disabledReason:m,onSend:r},"send")})},eI=e=>{let{conversationId:t,taskId:a}=e,s=(0,p.A)(),[l,i]=(0,m.useState)(!1),{mutate:r,isPending:o}=(0,en.hs)(t,null!=a?a:""),d=(0,m.useCallback)(()=>{t&&a&&(r(),i(!1))},[t,a,r]),c=(0,m.useCallback)(()=>{i(!0)},[]);return(0,m.useEffect)(()=>{let e=e=>{"Escape"!==e.key||o||i(!0)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[o]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.Tooltip,{tooltipContent:(0,n.jsx)(S.A,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),keyboardShortcut:"Esc",children:(0,n.jsx)(W.$,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:c,"aria-label":s.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:o?(0,n.jsx)(ek.N,{className:"animate-spin",size:18}):(0,n.jsx)(eA.X,{weight:"bold",size:16})})}),(0,n.jsx)(eS,{isOpen:l,onClose:()=>i(!1),onConfirm:d,isLoading:o})]})},eT=e=>{let{onStop:t,isLoading:a}=e,s=(0,p.A)();return(0,m.useEffect)(()=>{let e=e=>{"Escape"!==e.key||a||t()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,a]),(0,n.jsx)(K.Tooltip,{tooltipContent:(0,n.jsx)(S.A,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),keyboardShortcut:"Esc",children:(0,n.jsx)(W.$,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:()=>t(),"aria-label":s.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:a?(0,n.jsx)(ek.N,{className:"animate-spin",size:18}):(0,n.jsx)(eA.X,{weight:"bold",size:16})})})},eD=e=>{let{isSending:t,isDisabled:a,disabledReason:s,onSend:l}=e,i=(0,p.A)(),r=(0,m.useCallback)(()=>{(0,e_.R)("event","msg_sent",{location:"chat_input"}),l()},[l]);return(0,n.jsx)(u.P.div,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.15,scale:{type:"spring",stiffness:600,damping:30},opacity:{duration:.1}}},children:(0,n.jsx)(K.Tooltip,{tooltipContent:s,children:(0,n.jsx)("div",{children:(0,n.jsx)(W.$,{variant:"flat",size:"icon_sm",className:"!rounded-lg !h-8 !w-8",disabled:a,onClick:()=>r(),"aria-label":i.formatMessage({defaultMessage:"Send message",id:"Xx0WZVz8QS"}),children:t?(0,n.jsx)(ek.N,{className:"animate-spin",weight:"bold",size:16}):(0,n.jsx)(eN.D,{weight:"bold",size:16})})})})})};var eO=a(18088);a(97509);var eL=a(85705);let eR=e=>{let{style:t,children:a,duration:s=200,delay:l=0,easing:i="ease-in-out",className:r="",onTransitionEnd:o=()=>void 0}=e,d=(0,m.useRef)(null),[c,u]=(0,m.useState)("auto"),p=(0,m.useRef)(null);return(0,m.useEffect)(()=>{if(d.current)return p.current=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect.height;u("".concat(e,"px"))}}),p.current.observe(d.current),()=>{p.current&&p.current.disconnect()}},[]),(0,n.jsx)("div",{style:{height:c,transitionDelay:"".concat(l,"ms"),transitionTimingFunction:i,transitionDuration:"".concat(s,"ms"),transitionProperty:"height",...t},className:r,onTransitionEnd:()=>{o()},children:(0,n.jsx)("div",{className:"w-full",ref:d,children:a})})};var eP=a(16256),ez=a(89835),eF=a(50571),eU=a(15912),eG=a(78067),eY=a(97595),eB=a(93220),eH=a(65016),eW=a(785),eV=a(98304);let eK=m.forwardRef((e,t)=>{let{indicatorActive:a,disabled:s,text:l,tag:i,className:r,buttonClassName:o,tooltip:c,hideIndicatorText:m,icon:p,showRemoveIcon:h,showCaretIcon:x,...f}=e,g=(0,n.jsx)(u.P.div,{className:(0,d.A)("flex",l?"shrink min-w-8":"shrink-0",r),initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},children:(0,n.jsxs)(W.$,{variant:"unstyled",size:"unset",className:(0,d.A)("border-0.5 transition-all h-8 min-w-8 rounded-lg flex items-center px-[7.5px] group !pointer-events-auto !outline-offset-1",a?"text-accent-secondary-100 bg-accent-secondary-100/[8%] border-accent-secondary-200/20":"text-text-300 border-border-300",!s&&(a?"active:scale-[0.98] hover:text-accent-secondary-000 hover:bg-accent-secondary-100/[12%]":"active:scale-[0.98] hover:text-text-200/90 hover:bg-bg-100"),o),disabled:s,"aria-pressed":a,...f,children:[p,!!l&&!m&&(0,n.jsxs)("div",{className:"min-w-0 flex items-center",children:[(0,n.jsx)("p",{className:"min-w-0 pl-1 text-xs text-ellipsis whitespace-nowrap break-words overflow-hidden shrink",children:l}),!!i&&(0,n.jsx)(eL.u,{tag:i,className:"!top-0 !ml-1"})]}),x&&(0,n.jsx)(eW.a,{size:12,className:"ml-1 opacity-70"}),!s&&h&&(0,n.jsx)("div",{className:"duration-100 w-0 group-hover:w-3 opacity-0 group-hover:opacity-70 transition-all ml-0 group-hover:ml-1",children:(0,n.jsx)(eV.X,{size:12})})]})});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(K.Tooltip,{tooltipContent:c,disableHoverableContent:!0,side:"bottom",align:"center",children:g})})});eK.displayName="InputMenuButton";var eq=a(85524);let eX=e=>{let{path:t}=e,a={drive:(0,p.A)().formatMessage({defaultMessage:"Paste a Drive link in the chat to upload it",id:"ZJxjEilF0C"})},s=t&&t in a?a[t]:null;return s?(0,n.jsxs)("div",{className:"w-full bg-bg-100 border-t-0.5 border-border-300 opacity-80 text-text-500 flex flex-row items-center gap-2.5 px-3 py-1 font-small",children:[(0,n.jsx)(eq.R,{size:14}),s]}):null};var e$=a(19920),eJ=a(16),eZ=a(26982);let eQ=e=>{let{tooltip:t,text:a,tag:s,showCaretIcon:l,indicatorActive:i=!1,hideIndicatorText:r,canShowDot:o,onDoubleClick:d,menuType:c,menuView:h,inputMenuIsOpen:x,setInputMenuIsOpen:f}=e,g=(0,p.A)(),y=(0,m.useRef)(null),{rootItems:v}=h,b={indicatorActive:i,text:a||"",tooltip:t},j=(0,er.gB)(),w="tools"===c&&j;if(w){b.tooltip=g.formatMessage({defaultMessage:"Style",id:"7mL9QEUFav"});let e=v.find(e=>"option"===e.type&&e.isChecked);e&&"Default"!==e.key&&(b.indicatorActive=!0,b.text=e.label)}let M=v.filter(e=>{let{indicatorActive:t}=e;return t}).length,_=(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:["plus"===c?(0,n.jsx)(u.P.div,{animate:{rotate:45*!!x},transition:{type:"spring",stiffness:650,damping:32,duration:.1},children:(0,n.jsx)(eJ.F,{size:16})}):"research"===c?(0,n.jsx)(H.is,{size:16}):w?(0,n.jsx)(H.P_,{size:16}):(0,n.jsx)(eZ.l,{size:16}),(0,n.jsx)(e0,{isShown:o&&M>0})]}),k="plus"===c?g.formatMessage({defaultMessage:"attachments",id:"whkEDsy4V6",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):"research"===c?g.formatMessage({defaultMessage:"research",id:"PUcnDUZD0/",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):w?g.formatMessage({defaultMessage:"styles",id:"G91kUvt+GD",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):g.formatMessage({defaultMessage:"tools",id:"yd3KUET1r+",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"});return(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(eK,{tag:s,showCaretIcon:l,hideIndicatorText:!!r,icon:_,id:"input-".concat(c,"-menu-trigger"),ref:y,onClick:()=>{f(!x)},onKeyDown:e=>{x||"Space"!==e.code&&"ArrowDown"!==e.code||f(!0)},onDoubleClick:d?e=>{e.preventDefault(),null==d||d()}:void 0,"aria-expanded":x,"aria-haspopup":"listbox","aria-controls":"input-menu","data-testid":"input-menu-".concat(c),"aria-label":g.formatMessage({defaultMessage:"Open {menuType} menu",id:"Larie1pvYJ"},{menuType:k}),...b})})},e0=e=>{let{isShown:t}=e;return!!t&&(0,n.jsx)(u.P.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},children:(0,n.jsx)("div",{className:"h-1.5 w-1.5 bg-accent-secondary-200 rounded-full mr-0.5"})})};var e1=a(81023),e5=a(54594),e2=a(3424);let e6={forward:{initial:{x:"20%",opacity:0},animate:{x:0,opacity:1}},back:{initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1}},none:{initial:{x:0},animate:{x:0}}},e3=e=>{let{placement:t,canShowDot:a}=e,s=(0,m.useRef)(null),l=(0,p.A)(),i=(0,e5.tl)(),r=(0,eF.AY)(),o=(0,eF.M8)();return(0,n.jsxs)("div",{ref:s,children:[(0,n.jsx)(e7,{canShowDot:a,placement:t,menuType:"tools",...i,tooltip:l.formatMessage({defaultMessage:"Search and tools",id:"lhFEU+uT6i"})}),(0,n.jsx)(eU.V,{canShowNux:o,anchorRef:s,side:"bottom",text:l.formatMessage({defaultMessage:"Add your everyday tools and apps to get the best out of Claude",id:"olaMSdwPL6"}),id:"research-rmcp-tools-nux-1",nuxItem:{dateAdded:"2025-05-14",priority:eY.c.HIGH,showAfterOthersDismiss:!0}}),(0,n.jsx)(eU.V,{canShowNux:r,anchorRef:s,side:"bottom",text:l.formatMessage({defaultMessage:"MCP is here now! Access integrations in this menu.",id:"NkJar0wFk+"}),id:"mcp-tools-nux-1",nuxItem:{dateAdded:"2025-04-29",priority:eY.c.HIGH,showAfterOthersDismiss:!0}})]})},e4=e=>{let{placement:t,canShowDot:a}=e,s=(0,e5.CH)();return(0,n.jsx)(e7,{placement:t,menuType:"plus",canShowDot:a,...s})},e9=e=>{let t,{hideIndicatorText:a}=e,s=(0,p.A)(),{conversation:l,model:i,setModel:r}=(0,j.o)(),o=(0,ei.v)("compass_mode"),{toggleResearchMode:d,canAutoEnableWebSearch:c}=(0,eH.D$)(l),u=(0,en.g7)(),m=(0,en.BU)(),h=(0,en.Gm)(l),x=(0,D.Z3)((null==l?void 0:l.id)||null),f=(0,en.G8)()(null!=i?i:x),g=(0,en.G8)()(x),y=!l&&!f&&g;if(!u)return null;m?h||c?f||y||(t=s.formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"})):t=s.formatMessage({defaultMessage:"Enable a search integration to use research",id:"WyiVeak7w5"}):t=s.formatMessage({defaultMessage:"Your administrator must enable a search tool to use research",id:"CzjOV5rgPZ"});let v=!!t;return(0,n.jsx)(eK,{disabled:v,tooltip:t,hideIndicatorText:a,icon:(0,n.jsx)(H.is,{size:16}),onClick:()=>{v||(y&&r(x),d("advanced"!==o))},indicatorActive:!v&&"advanced"===o,text:s.formatMessage({defaultMessage:"Research",id:"JEe7dVso7F"}),className:"!shrink-0"})},e8={id:"mcp-add-connectors-nux",nuxItem:{dateAdded:"2025-07-11",priority:eY.c.HIGH,showAfterOthersDismiss:!0}},e7=e=>{let{text:t,tag:a,showCaretIcon:s,indicatorActive:l,canShowDot:i,hideIndicatorText:r,tooltip:o,placement:p,menuType:h,path:x,menuView:f,highlightedItemKey:g,setHighlightedItemKey:y,handleClickItem:v,inputMenuIsOpen:b,setInputMenuIsOpen:j,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,handleBack:_,animationDirection:k}=e,{currentItems:A}=f,N=(0,ez.L)(()=>{j(!1)},["mouseup","touchend"]),C=(0,m.useRef)(null),E=(0,m.useRef)(null),I=(0,m.useRef)(null),T=(0,m.useRef)(null),[D,O]=(0,m.useState)(void 0),[L,R]=(0,m.useState)("bottom"===p?"top":"bottom"),[P,z]=(0,m.useState)(0),F=(0,ep.useSearchParams)(),{shouldShow:U}=(0,eB.z)(e8.id,e8.nuxItem),G="true"===F.get(eG.HU)&&U&&"tools"===h;(0,m.useEffect)(()=>{G&&(j(!0),I.current&&(I.current.scrollTop=I.current.scrollHeight))},[G,j]),(0,m.useEffect)(()=>{if(!C.current||!E.current)return;let e=C.current.getBoundingClientRect(),{updatedHeightAvailable:t,updatedDropdownSide:a}=te({placement:p,triggerRectTop:e.top,triggerRectBottom:e.bottom});O(Math.min(422,t)),R(a);let s=E.current.getBoundingClientRect();z(Math.min(0,window.innerWidth-s.right-8))},[p,b]);let Y=(0,er.Hd)(),B=("plus"===h||"tools"===h)&&Y?(0,n.jsx)(e$.s,{path:x,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,handleBack:_}):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"relative shrink-0",onClick:e=>{e.preventDefault()},ref:N,children:[(0,n.jsx)("div",{ref:C,children:(0,n.jsx)(eQ,{tag:a,tooltip:o,text:t,showCaretIcon:s,indicatorActive:l,hideIndicatorText:r,canShowDot:i,menuType:h,menuView:f,inputMenuIsOpen:b,setInputMenuIsOpen:j,onDoubleClick:"plus"===h?()=>(0,e2.U_)(p):void 0})}),(0,n.jsx)("div",{ref:E,className:(0,d.A)("w-[20rem] absolute max-w-[calc(100vw-16px)]","top"===L?"bottom-10":"top-10",b?"block":"hidden"),children:(0,n.jsx)(c.N,{children:b&&(0,n.jsx)(u.P.div,{ref:I,initial:{opacity:0,scale:.95,y:"top"===L?8:-8,x:-8},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:.95,y:"top"===L?8:-8,x:-8},transition:{type:"spring",stiffness:650,damping:23,mass:.6,height:{ease:"easeInOut"}},className:(0,d.A)("relative w-full will-change-transform h-auto overflow-y-auto overscroll-auto flex z-dropdown bg-bg-000 rounded-xl overflow-hidden border-border-300 border-0.5 shadow-diffused shadow-[hsl(var(--always-black)/6%)]","top"===L?"flex-col-reverse":"flex-col"),onMouseEnter:()=>y(null),style:{maxHeight:D?"".concat(D,"px"):void 0,left:P},onClick:e=>{e.stopPropagation(),(0,e1.l)()},children:(0,n.jsxs)(eR,{duration:100,className:(0,d.A)("flex flex-col min-h-0 w-full !ease-out","top"===L?"justify-end":"justify-start"),children:[(0,n.jsxs)("div",{className:"p-1.5 flex flex-col",children:["bottom"===L&&B,(0,n.jsx)(u.P.div,{variants:e6[k],initial:"initial",animate:"animate",className:"flex flex-col",transition:{x:{duration:.15,ease:eP.A.outCirc},opacity:{duration:.25,ease:"easeInOut"}},children:("top"===L?[...A].reverse():A).filter(e=>{let{menuItemHidden:t}=e;return!t}).map(e=>"addIntegrations"===e.key?(0,n.jsx)("div",{ref:T,children:(0,n.jsx)(eL.$,{item:e,onClick:()=>v(e),isHighlighted:g===e.key})},e.key):(0,n.jsx)(eL.$,{item:e,onClick:()=>v(e),isHighlighted:g===e.key},e.key))},null!=x?x:"root"),"top"===L&&B]}),(0,n.jsx)(eX,{path:x})]})})})})]}),(0,n.jsx)(eU.V,{canShowNux:G&&!!T.current&&b,anchorRef:T,side:"right",text:(0,n.jsx)(S.A,{defaultMessage:"Find and add more of your favorite tools in <span>Add connectors</span>.",id:"2icgWBPsqj",values:{span:e=>(0,n.jsx)("span",{className:"font-bold",children:e})}}),...e8})]})},te=e=>{let{placement:t,triggerRectTop:a,triggerRectBottom:s}=e,n=window.innerHeight-s-8-8;if("bottom"===t){let e=a-76-8;return e<160&&n>e?{updatedDropdownSide:"bottom",updatedHeightAvailable:n}:{updatedDropdownSide:"top",updatedHeightAvailable:e}}{let e=a-8-8;return n<160&&e>n?{updatedDropdownSide:"top",updatedHeightAvailable:e}:{updatedDropdownSide:"bottom",updatedHeightAvailable:n}}};a(35580),a(45538),a(70780);var tt=a(90215);let ta=e=>{let{menuItem:t,handleClick:a,limitInfo:s,...l}=e,{handleClickItem:i}=(0,e5.CH)();if(!t||t.isDisabled||"pro"===t.tag||"new chat"===t.tag||!t.indicatorActive)return null;let{indicatorActive:r}=t,o=!!t.menuItemHidden,d=s?(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[l.icon,(0,n.jsx)(eo,{remaining:s.remaining,total:s.total})]}):l.icon;return(0,n.jsx)(eK,{onClick:null!=a?a:()=>i(t),indicatorActive:r,disabled:o,showRemoveIcon:!0,...l,icon:d})};a(55134);let ts=e=>{let{hideIndicatorText:t,hideIndicators:a}=e,s=(0,p.A)();return((0,r.fS)("claudeai_beam").value,a)?null:(0,n.jsx)(tt.o,{children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(0,n.jsx)(tn,{}),(0,n.jsx)(tl,{itemKey:$.xd.COMPASS,tooltip:s.formatMessage({defaultMessage:"Research mode",id:"lYf0AUt2RH"})}),(0,n.jsx)(ti,{hideIndicatorText:t}),(0,n.jsx)(tr,{hideIndicatorText:t}),""]})})},tn=()=>{let e=(0,p.A)(),{menuView:{rootItems:t}}=(0,e5.tl)(),a=(0,Y.h0)(),s=(0,et.useLayer)("trials_freemium"),{data:l}=(0,ea.EY)(),i=t.find(e=>e.key===$.xd.EXTENDED_THINKING),o=(0,r.P0)("thinking_sticky_default_on","hide_thinking_chat_indicator",!1,r.e_);if(!i||o)return null;let d=s.get("free_thinking",!1),c=!a&&d&&l&&void 0!==l.remaining&&void 0!==l.limit&&i.indicatorActive;return(0,n.jsx)(ta,{hideIndicatorText:!0,menuItem:i,icon:i.icon,tooltip:e.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),limitInfo:c?{remaining:l.remaining,total:l.limit}:null})},tl=e=>{let{itemKey:t,tooltip:a}=e,{menuView:{rootItems:s}}=(0,e5.CH)(),{menuView:{rootItems:l}}=(0,e5.tl)(),i=[...s,...l].find(e=>e.key===t);return i?(0,n.jsx)(ta,{hideIndicatorText:!0,menuItem:i,icon:i.icon,tooltip:a}):null},ti=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:a}}=(0,e5.tl)(),s=(0,e2.pi)(),l=a.find(e=>"styles"===e.key);return l&&"optionGroup"===l.type?(0,n.jsx)(ta,{hideIndicatorText:t,menuItem:l,icon:(0,n.jsx)(H.P_,{size:16}),text:l.secondaryText,buttonClassName:"!shrink",handleClick:()=>s("Default")}):null},tr=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:a}}=(0,e5.CH)(),s=(0,e2.$V)(),l=a.find(e=>e.key===$.xd.PROJECTS);return l&&"optionGroup"===l.type?(0,n.jsx)(ta,{hideIndicatorText:t,menuItem:l,icon:(0,n.jsx)(H.Jt,{size:16}),text:l.secondaryText,buttonClassName:"!shrink-[2]",handleClick:()=>s(void 0)}):null},to=R.z.object({enabled:R.z.boolean(),system_prompt:R.z.string().optional()}),td=e=>{let{placement:t,isDisabled:a}=e,s=(0,p.A)(),{value:l}=(0,r.fS)("claudeai_beam");(0,r.iW)("prompt_improver_config",{enabled:!1},to);let{prompt:i}=(0,_.QT)(),o=(0,_.QN)(),{model:d,setModel:c,attachments:u,files:h,syncSourceUuids:x,sendMessage:f,stopSampling:g,conversation:y,isSending:v,isChatSyncing:b,isProjectSyncing:w,isModelSelectorOpen:M,setIsModelSelectorOpen:k,isNewConversation:A,currentCompassTask:N,improvePrompt:C,isImprovingPrompt:S}=(0,j.o)(),E=b||w?s.formatMessage({defaultMessage:"Syncing knowledge...",id:"QuwefnZNVj"}):void 0,I=(0,m.useMemo)(()=>{var e;return[...h,...null!=(e=null==y?void 0:y.files)?e:[]].some(e=>e.file_kind===O.M.Image||e.file_kind===O.M.SanitizedDocument)},[h,y]),T=(0,m.useCallback)(e=>c(e.model),[c]),[D,R]=(0,L.w)({box:"border-box"}),z=R.width||null,F=null===z||z<480,G=null===z||z<396;return(0,P.QJ)(),(0,n.jsxs)("div",{className:"flex gap-2.5 w-full items-center",ref:D,children:[(0,n.jsxs)("div",{className:"relative flex-1 flex items-center gap-2 shrink min-w-0",children:[(0,n.jsx)(e4,{placement:t,canShowDot:null!==z&&G}),(0,n.jsx)(e3,{placement:t,canShowDot:null!==z&&G}),"",(0,n.jsx)(e9,{hideIndicatorText:F}),"",null!==z&&(0,n.jsx)(ts,{hideIndicatorText:F,hideIndicators:G}),(0,n.jsx)(U,{model:d,projectUuid:o})]}),(0,n.jsx)(eM,{selectedModel:d,onSelect:T,hasMultiModalContent:I,placement:t,open:M,onOpenChange:k,isNewConversation:A}),(0,n.jsx)(eE,{isSending:v,isDisabled:a,disabledReason:E,prompt:i,files:h,attachments:u,syncSourceUuids:x,conversation:y,currentCompassTask:N,onSend:()=>f(),onStop:()=>g()})]})};var tc=a(67441),tu=a(5231);let tm=e=>{let{disabled:t=!1,enableScreenDrop:a=!1}=e,{onDrop:s}=(0,j.o)();return(0,n.jsx)(tc.wC,{disabled:t,onDrop:s,enableScreenDrop:a,children:(0,n.jsx)(tp,{})})},tp=()=>{let{dragState:e}=(0,tc.t1)(),t=e===tc.mq.DRAGGING_ON_TARGET,a=e===tc.mq.DRAGGING_OFF_TARGET||e===tc.mq.DRAGGING_ON_TARGET;return a?(0,n.jsx)(c.N,{children:a&&(0,n.jsx)(u.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute top-0 border border-dashed bg-clip-padding rounded-2xl min-h-4 h-full w-full border-accent-secondary-100 bg-bg-000 overflow-hidden z-10",children:(0,n.jsx)("div",{className:(0,d.A)("flex items-center justify-center h-full w-full transition-colors",t?"bg-accent-secondary-900":"bg-accent-secondary-900/50"),children:(0,n.jsxs)("p",{className:"text-accent-secondary-100 flex flex-row items-center gap-2.5",children:[(0,n.jsx)(tu._,{size:20,className:"opacity-50"}),(0,n.jsx)(S.A,{defaultMessage:"Drop files here to add to chat",id:"IYBR/J+nuA"})]})})},"chat-input-drop-zone-overlay")}):null};var th=a(1613),tx=a(4114),tf=a(58720),tg=a(14935),ty=a.n(tg),tv=a(96547),tb=a(68010);function tj(e){var t,a;let{isOpen:s,onClose:l,prompt:i,serverUuid:r}=e,o=(0,p.A)(),d=(0,m.useCallback)(()=>{h({}),l()},[l]),c=(0,tv.vW)(d),[u,h]=(0,m.useState)({}),x=null==i||null==(t=i.arguments)?void 0:t.some(e=>e.required&&!u[e.name]);return i?(0,n.jsxs)(eC.aF,{title:o.formatMessage({defaultMessage:"Enter prompt inputs",id:"zDs90mJ5UJ"}),subtitle:(0,n.jsxs)("div",{className:"flex flex-col gap-1 mt-1",children:[i.name,(0,n.jsx)(tb.M,{text:i.description})]}),isOpen:s,onClose:d,modalSize:"lg",children:[(0,n.jsx)("div",{className:"flex flex-col gap-4 max-h-[500px] mb-4 overflow-y-auto",children:null==(a=i.arguments)?void 0:a.map(e=>(0,n.jsx)("div",{className:"flex flex-col gap-1",children:(0,n.jsx)(tf.ks,{required:e.required,label:"".concat(ty()(e.name.toLowerCase())).concat(e.required?"*":""),placeholder:e.description,value:u[e.name]||"",onValueChange:t=>h(a=>({...a,[e.name]:null!=t?t:""})),onBlur:()=>{h(t=>{var a;return{...t,[e.name]:(null!=(a=t[e.name])?a:"").trim()}})},error:e.required&&""===u[e.name]},e.name)},e.name))}),(0,n.jsxs)(eC.vW,{children:[(0,n.jsx)(W.$,{disabled:x,onClick:()=>void c({serverUuid:r,prompt:i,args:u}),children:(0,n.jsx)(S.A,{defaultMessage:"Add prompt",id:"8UhdEv01LN"})}),(0,n.jsx)(W.$,{variant:"secondary",onClick:d,children:(0,n.jsx)(S.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]}):null}var tw=a(34385),tM=a(93714),t_=a(22167),tk=a(31312),tA=a(5690);let tN=e=>{let{moveAttachments:t=!1,handleProjectCreated:a,isOpen:s,handleClose:l,syncSources:i=[],attachments:r=[],setSyncSourceUuids:o,setAttachments:d}=e,[c,u]=(0,m.useState)(null),{addError:p}=(0,N.Y)(),h=(0,tk.n)();return tC({project:c,syncSources:i,attachments:r,setSyncSourceUuids:o,setAttachments:d}),(0,n.jsxs)(eC.aF,{isOpen:s,onClose:l,modalSize:"xl",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsx)("h1",{className:"font-heading text-text-200 mb-4",children:t?(0,n.jsx)(S.A,{defaultMessage:"Create a project with attachments",id:"wSxz4Q9mjA"}):(0,n.jsx)(S.A,{defaultMessage:"Create a project",id:"HR5A+UPiIu"})}),(0,n.jsx)(W.$,{onClick:l,size:"icon",variant:"ghost",children:(0,n.jsx)(eV.X,{size:16})})]}),s&&(0,n.jsx)(tA.Kk,{syncSources:t?i:void 0,onProjectCreated:e=>{t&&u(e),a(e)},onError:e=>p(e.message,{error:e}),onCancel:l,strings:h})]})},tC=e=>{let{project:t,syncSources:a,attachments:s,setSyncSourceUuids:n,setAttachments:l}=e,i=(0,m.useRef)(!1),{addSuccess:r}=(0,N.Y)(),o=(0,p.A)(),{mutate:d}=(0,tw.fh)(null==t?void 0:t.uuid),{mutate:c}=(0,tM.pz)(null==t?void 0:t.uuid),u=(0,m.useCallback)(()=>{t&&(s.length||a.length&&t.is_private)&&(s.forEach(e=>{let{file_name:t,extracted_content:a}=e;d({file_name:t,content:a})}),t.is_private&&(a.forEach(e=>{let t=(0,t_.tS)(e);t&&c(t)}),n([])),l([]),r(o.formatMessage({defaultMessage:"Attachments successfully added to {projectName}",id:"xw8MJ6Kd/h"},{projectName:t.name||"your project"})))},[t,r,s,d,l,c,n,a,o]);(0,m.useEffect)(()=>{t&&!i.current&&(i.current=!0,u())},[t,u])};var tS=a(11930),tE=a(39500),tI=a(66420),tT=a(56706),tD=a(84617),tO=a(3574),tL=a(79289),tR=a(57292),tP=a(20673),tz=a(49299),tF=a(96442),tU=a(16178),tG=a(13982),tY=a(59074);let tB=()=>{let{addError:e}=(0,N.Y)();return{handleRateLimitError:(t,a)=>{t instanceof tU.LG&&429===t.statusCode?"thinking_messages_rate_limit_exceeded"===t.errorCode?e("You’ve reached your weekly limit for thinking messages. Please try again next week.",{error:t}):"opus_messages_rate_limit_exceeded"===t.errorCode?(0,tY.T)():(e("You’ve reached the limit for Claude messages at this time. Please wait before trying again.",{error:t}),(0,tG.D)()):e(a,{error:t})}}},tH=(0,tF.default)(()=>a.e(320).then(a.bind(a,10320)).then(e=>({default:e.WritingAnimation})),{loadableGenerated:{webpack:()=>[10320]},ssr:!1}),tW={default:{type:"spring",stiffness:650,damping:60},opacity:{type:"tween",ease:"easeOut",duration:.35}},tV=(0,m.forwardRef)((e,t)=>{let{setScreen:a,onStyleChange:s,animateBoolRef:l}=e,i=(0,p.A)(),r=(0,eu.st)(),[o,d]=(0,m.useState)(!1),[h,x]=(0,m.useState)(""),{handleRateLimitError:f}=tB(),{mutateAsync:g}=(0,tT.f$)(),y=(0,m.useRef)(null),v=(0,m.useRef)(null);(0,m.useEffect)(()=>{o&&setTimeout(()=>{var e;return null==(e=v.current)?void 0:e.focus()},50)},[o]);let[b,j]=(0,m.useState)(!1),[w,M]=(0,m.useState)(!1),_=(0,m.useRef)(null),k=(0,m.useRef)(null),C=4e3,{handleFileUpload:E,handleTextUpload:I}=function(e){let[t,a]=(0,m.useState)(!1),{activeOrganization:s}=(0,Y.YL)(),{addError:n}=(0,N.Y)(),l=(0,th.mn)();return{handleFileUpload:async i=>{if(t||!s)return;if(a(!0),!(0,A.eT)(i))try{let t=await (0,A.F9)(i);await e(t),a(!1);return}catch(e){}let r=new FormData;r.append("file",i);try{let t=await l("/api/organizations/".concat(s.uuid,"/convert_document"),{method:"POST",body:r});if(!t.ok)throw Error("Document conversion failed");let a=await t.json();if(!(null==a?void 0:a.extracted_content))throw Error("Document conversion failed: No extracted content");await e(a.extracted_content)}catch(e){n(e instanceof Error?e.message:"Error uploading file",{error:e})}finally{a(!1)}},handleTextUpload:async n=>{!t&&s&&0!==n.trim().length&&(a(!0),await e(n),a(!1))},isUploading:t}}(async e=>{try{_.current=await g({content_example:e})}catch(e){f(e,i.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"})),j(!1)}}),T=()=>{_.current?s(_.current,!0):k.current=setTimeout(T,C=1e3)},D=async()=>{R(),await I(h)},O=async e=>{let t=Array.from(e.dataTransfer.files);t&&(M(!0),setTimeout(R,20),await E(t[0]))},L=async e=>{let t=e.target.files;t&&(R(),await E(Array.from(t)[0])),e.target.value=""},R=()=>{j(!0),k.current=setTimeout(T,C)};return(0,n.jsx)(u.P.div,{ref:t,className:"w-full h-full grid place-items-center",exit:{opacity:0,scale:.8},transition:l.current?tW:{duration:0},children:(0,n.jsxs)(c.N,{mode:"popLayout",children:[b&&(0,n.jsx)(u.P.div,{className:"w-full h-full grid place-items-center",initial:{opacity:0},animate:{opacity:1},transition:tW,children:(0,n.jsx)(tq,{})},"CreateStyleAnalyzingContentScreen"),!b&&(0,n.jsxs)(u.P.div,{className:"w-full h-full pt-1 flex flex-col sm:grid sm:grid-cols-2 sm:gap-4",children:[(0,n.jsxs)(u.P.div,{exit:{opacity:0,y:40,transition:tW},className:"sm:h-full text-center flex flex-col gap-2 items-center justify-center px-2 pt-8 pb-8 sm:pt-14 sm:pb-20",children:[(0,n.jsx)("div",{className:"relative pb-2 w-full flex items-center justify-center",children:(0,n.jsx)(tH,{})}),(0,n.jsx)("p",{className:"text-text-300 font-claude-response sm:text-lg",children:(0,n.jsx)(S.A,{defaultMessage:"Share a writing example or describe your style and Claude will make a custom writing style tailored just for you.",id:"2qm6Zfzfx3"})})]},"CreatStyleStartScreenExplainer"),(0,n.jsx)(u.P.div,{className:"h-full flex-1",exit:{opacity:0,x:0,scale:.8,transition:{basicTransition:tW}},children:o?(0,n.jsxs)("div",{className:"h-full flex flex-col gap-2 p-2 rounded-xl border-0.5 border-border-300",children:[(0,n.jsx)("textarea",{ref:v,className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:i.formatMessage({defaultMessage:"Paste at least a few paragraphs of example writing, including from multiple various sources if you’d like, for Claude to analyze and the match style of...",id:"mC+9IzmmMY"}),value:h,onChange:e=>x(e.target.value),required:!0}),(0,n.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,n.jsx)(W.$,{variant:"secondary",onClick:()=>d(!1),children:(0,n.jsx)(S.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(W.$,{onClick:D,children:(0,n.jsx)(S.A,{defaultMessage:"Create style",id:"OC52fhpn7g"})})]})]}):(0,n.jsxs)(tc.wC,{className:"w-full h-full text-center border-dashed border border-border-300 bg-bg-000 rounded-xl relative grid place-items-center",onDrop:O,children:[(0,n.jsx)(tK,{showDropCover:w},"DropZoneOverlay"),(0,n.jsx)("input",{ref:y,type:"file",className:"hidden",accept:(0,A.cm)({imagesEnabled:!1}).join(","),onChange:L,multiple:!0}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(V.ms,{trigger:(0,n.jsx)(W.$,{variant:"flat",className:"mt-2 font-medium !text-accent-secondary-100 bg-accent-secondary-900 hover:!bg-accent-secondary-100/15 gap-2",prepend:(0,n.jsx)(tO.C,{weight:"bold"}),children:(0,n.jsx)(S.A,{defaultMessage:"Add writing example",id:"EhXT0lXWRc"})}),children:[(0,n.jsx)(V.tJ,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{y.current&&y.current.click()},children:[(0,n.jsx)(tL.x,{size:16}),(0,n.jsx)(S.A,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,n.jsx)(V.tJ,{onClick:()=>d(!0),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(tR.v,{size:16}),(0,n.jsx)(S.A,{defaultMessage:"Paste text content",id:"nVQ9XcjUIh"})]})})]}),(0,n.jsxs)("div",{className:"text-xs text-text-400 mt-3 flex flex-col gap-1 max-sm:pb-8",children:[(0,n.jsx)("p",{children:window.innerWidth<=640?(0,n.jsx)(S.A,{defaultMessage:"Select or paste existing doc, post, message, etc.",id:"7oFd31Vmu3"}):(0,n.jsx)(S.A,{defaultMessage:"Select, drop, or paste existing doc, post, message, etc.",id:"ugXnNZ7Ix/"})}),(0,n.jsx)("p",{children:(0,n.jsx)(S.A,{defaultMessage:"Content is not stored after matching style.",id:"bLEGIyr72h"})})]})]}),(0,n.jsx)("div",{className:"absolute w-full bottom-6",children:(0,n.jsxs)(tD.Y,{className:"text-sm gap-1.5",onClick:()=>{r.track({event_key:"styles.custom.describe_clicked"}),a(tS.I.CREATE_MANUALLY)},children:[(0,n.jsx)(tP.u,{}),(0,n.jsx)(S.A,{defaultMessage:"Describe style instead",id:"p6hP+KeXkD"})]})})]})},"CreatStyleStartScreenDropZone")]},"CreatStyleStartScreen")]})})});tV.displayName="CreateStyle";let tK=e=>{let{showDropCover:t}=e,{dragState:a}=(0,tc.t1)(),s=a===tc.mq.DRAGGING_OFF_TARGET||a===tc.mq.DRAGGING_ON_TARGET||t;return(0,n.jsx)(c.N,{children:s&&(0,n.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:(0,d.A)("absolute -inset-px z-10 flex flex-col justify-center rounded-xl border border-dashed transition-colors",a===tc.mq.DRAGGING_ON_TARGET||t?"bg-accent-secondary-900 border-accent-secondary-200 text-accent-secondary-000":"bg-bg-100 border-border-200 text-text-300"),children:(0,n.jsxs)("div",{className:"py-1.5 text-center",children:[(0,n.jsx)("div",{className:"relative inline-block opacity-60",children:(0,n.jsx)(tz.p,{size:36,weight:"thin"})}),(0,n.jsx)("div",{className:"font-claude-response pt-2 pb-4 italic",children:(0,n.jsx)(S.A,{defaultMessage:"Drop example writing here to match the style",id:"VcDT1Dt8dq"})})]})},"drop-zone-overlay")})},tq=()=>(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,n.jsx)(tH,{animate:!0}),(0,n.jsx)(u.P.div,{className:"font-claude-response italic text-lg",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{opacity:{delay:.2,ease:"easeOut",duraation:.6},y:{delay:.2,type:"spring",stiffness:230,damping:20}},children:(0,n.jsx)(S.A,{defaultMessage:"Analyzing your writing...",id:"AnDnGKCn6M"})})]});var tX=a(40888),t$=a(37513),tJ=a(59175),tZ=a(49937);let tQ={objective:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tX.W,{})," ",(0,n.jsx)(S.A,{defaultMessage:"Define style objective",id:"gJB/90MGQ7"})]}),description:"Describe the main purpose and goal of this writing style — whether to teach, analyze, persuade, inspire, etc.",placeholder:"Try something like:\nI want to teach complex topics step-by-step, with a focus on building understanding.",promptPrepend:"I’d like the writing to serve this purpose:"},audience:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tZ.t,{})," ",(0,n.jsx)(S.A,{defaultMessage:"Tailor to an audience",id:"TYdBxyl/f3"})]}),description:"Describe details of the target audience you’d like Claude to write for including relevant information, needs, or preferences.",placeholder:"Try something like:\nWrite for marketing professionals. They’re tech-savvy and appreciate a dash of humor with their data.",promptPrepend:"I’d like to tailor this style to a specific audience:"},voicetone:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t$.r,{})," ",(0,n.jsx)(S.A,{defaultMessage:"Use specific voice & tone",id:"1Vo908p7lJ"})]}),description:"Think about characteristics like formality, emotion, personality, and how you want the written responses to feel.",placeholder:"Try something like:\nWrite in a warm, approachable tone with light professional humor - like a friendly mentor.",promptPrepend:"I’d like to write in this voice and tone:"},general:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tP.u,{})," ",(0,n.jsx)(S.A,{defaultMessage:"Describe generally",id:"f3JnPS+B3+"})]}),description:"Describe in detail how you would like Claude to write. Be as specific as you can.",placeholder:"Try something like:\nWrite like an excited scientist explaining fascinating discoveries - technical but energetic.",promptPrepend:"I’d like to write like this:"},custom:{label:(0,n.jsx)(S.A,{defaultMessage:"Use custom instructions (advanced)",id:"hSfu0Sz47T"}),description:"Write exact custom instructions for this style instead of generating a style prompt automatically. Claude will ignore instructions that don’t follow our guidelines.",placeholder:"Write style custom instructions here...",promptPrepend:""}},t0=(0,m.forwardRef)((e,t)=>{let{setScreen:a,onStyleChange:s}=e,l=(0,p.A)(),i=(0,eu.st)(),[r,o]=(0,m.useState)(!1),[h,x]=(0,m.useState)(""),[f,g]=(0,m.useState)(Object.keys(tQ)[0]),{handleRateLimitError:y}=tB(),{mutateAsync:v}=(0,tT.f$)(),b=(0,m.useRef)(null);(0,m.useEffect)(()=>{setTimeout(()=>{var e;return null==(e=b.current)?void 0:e.focus()},50)},[f]);let j=h.replace(/\s/g,"").length>24,w=async()=>{if(!r&&j){o(!0);try{let e="custom"===f?{prompt:h}:{input_text:tQ[f].promptPrepend+"\n"+h},t=await v(e);s(t,!1)}catch(e){y(e,l.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"}))}finally{o(!1)}}},M=e=>{i.track({event_key:"styles.custom.describe_selected",key:e}),g(e)};return(0,n.jsxs)(u.P.div,{ref:t,className:"w-full h-full flex flex-col sm:grid sm:grid-cols-2 gap-4 pt-3",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:h-full sm:pr-3",children:[(0,n.jsxs)("div",{className:"flex-1 text-text-300",children:[(0,n.jsx)("p",{className:"mb-1 sm:mb-2 text-sm font-medium",children:(0,n.jsx)(S.A,{defaultMessage:"Generate style from a starting point:",id:"cz09/5alWg"})}),(0,n.jsx)("ul",{className:"hidden sm:flex flex-col gap-1.5",children:Object.keys(tQ).map(e=>(0,n.jsx)("li",{children:(0,n.jsxs)("button",{className:(0,d.A)("flex gap-1.5 items-center font-ui h-11 rounded-lg border border-border-400 hover:border-border-300 px-3 w-full text-left transition active:scale-[1.015] hover:bg-bg-200",f===e&&"!bg-accent-secondary-900 text-accent-secondary-000 !border-accent-secondary-100/80","custom"===e&&"mt-2 text-sm"),onClick:()=>M(e),children:[(0,n.jsx)("div",{className:"w-4 h-4 rounded-full bg-bg-100 grid place-items-center border border-border-300 mr-1",children:f===e&&(0,n.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-accent-secondary-100"})}),tQ[e].label]})},e))}),(0,n.jsx)("div",{className:"sm:hidden",children:(0,n.jsx)(V.ms,{trigger:(0,n.jsx)(W.$,{variant:"ghost",append:(0,n.jsx)(eW.a,{}),className:"w-full !border !border-border-300",children:(0,n.jsx)("div",{className:"flex-1 text-left flex items-center gap-1",children:tQ[f].label})}),children:Object.keys(tQ).map(e=>(0,n.jsx)(V.tJ,{onSelect:()=>M(e),children:(0,n.jsx)("div",{className:"flex items-center gap-1",children:tQ[e].label})},e))})})]}),(0,n.jsx)("div",{className:"mb-4 max-sm:hidden",children:(0,n.jsxs)(tD.Y,{className:"text-sm gap-1",onClick:()=>a(tS.I.CREATE),children:[(0,n.jsx)(tJ.f,{}),(0,n.jsx)(S.A,{defaultMessage:"Never mind, I’ll add an example",id:"PpPoeCEz4X"})]})})]}),(0,n.jsxs)("form",{className:"flex flex-col h-full rounded-xl border-0.5 border-border-300 bg-bg-200 px-3 py-2 gap-2",onSubmit:e=>{e.preventDefault(),w()},children:[(0,n.jsx)("p",{className:"pt-0 p-1 text-text-300 font-claude-response max-sm:text-sm",children:tQ[f].description}),(0,n.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,n.jsx)("textarea",{ref:b,className:" min-h-0 w-full h-full bg-bg-000 border border-border-200 p-3 leading-snug rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:tQ[f].placeholder,value:h,required:!0,onChange:e=>x(e.target.value)}),(0,n.jsx)(c.N,{children:h.length>0&&!j&&(0,n.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:.1},className:"absolute bottom-1 right-1 left-1 py-2 px-2 rounded-md text-sm bg-accent-secondary-900 text-text-200 text-center",children:(0,n.jsx)(S.A,{defaultMessage:"Be as descriptive as possible to help Claude generate the best possible style for you",id:"3ObAHHjHgF"})})})]}),(0,n.jsx)(K.Tooltip,{tooltipContent:j?"":l.formatMessage({defaultMessage:"More description needed in order to generate style",id:"vX4dBOsKs3"}),side:"bottom",className:"text-center",children:(0,n.jsx)("div",{className:"flex items-center w-full justify-center pb-1",children:(0,n.jsx)(W.$,{className:"w-full",type:"submit",loading:r,disabled:!j,children:"custom"===f?(0,n.jsx)(S.A,{defaultMessage:"Create style",id:"OC52fhpn7g"}):(0,n.jsx)(S.A,{defaultMessage:"Generate style",id:"tILvvoBa87"})})})})]})]})});t0.displayName="CreateStyleManually";var t1=a(79383),t5=a(41284),t2=a(92276),t6=a(40220),t3=a(17060),t4=a(43747),t9=a(84267),t8=a(27076),t7=a(12614),ae=a(33953),at=a(88801);function aa(){let[e,t]=(0,eO.Vc)("userHiddenStyles",[]),a=(0,m.useCallback)(e=>{let a=(0,at.X)(e);t(e=>[...e,a])},[t]),s=(0,m.useCallback)(()=>{t([])},[t]),n=(0,m.useCallback)(t=>t.filter(t=>{let a=(0,at.X)(t);return!e.includes(a)}),[e]);return{hiddenPresetStyles:e,setHiddenPresetStyles:t,addHiddenPresetStyle:a,resetHiddenPresetStyles:s,filterHiddenStyles:n}}var as=function(e){return e.VIEW="view",e.EDIT="edit",e.EDIT_MANUALLY="edit_manually",e}(as||{});let an=R.z.array(R.z.object({key:R.z.string(),name:R.z.string(),nameKey:R.z.string().optional(),text:R.z.string(),textKey:R.z.string().optional()})),al=[],ai=e=>{let{isSaveButton:t,children:a}=e;return(0,n.jsx)("div",{className:(0,d.A)("flex gap-1.5",t?"sm:absolute sm:top-5 sm:right-16 max-sm:mt-3 max-sm:-mb-2":"absolute top-5 right-16"),children:a})},ar=(0,m.forwardRef)((e,t)=>{let{animateBoolRef:a,style:s,setCurrentStyle:l,returnToListScreen:i,setChatStyle:r,setIsEditing:o,setIsEditingName:d}=e,c=(0,p.A)(),h=(0,at.X)(s),x="default"===s.type,[f,g]=(0,m.useState)("view"),{mutateAsync:y}=(0,tT.lo)(h,x),{handleRateLimitError:v}=tB(),b=async e=>{let{prompt:t,editInput:a}=e;try{let e=await y({prompt:t,edit_instructions:a});e&&l(e)}catch(e){throw v(e,c.formatMessage({defaultMessage:"Failed to edit style. Please try again.",id:"1WkY08RVLW"})),Error}},j=e=>{o("edit"===e||"edit_manually"===e),g(e)};return(0,n.jsxs)(u.P.div,{className:"flex-1 min-h-0 grid sm:grid-cols-2 gap-3 pt-3",ref:t,children:["view"===f&&(0,n.jsxs)(ai,{children:[(0,n.jsx)(W.$,{variant:"secondary",className:"text-sm max-sm:hidden",onClick:()=>r(s),children:(0,n.jsx)(S.A,{defaultMessage:"Use style",id:"f7VY0ldE+0"})}),(0,n.jsx)(am,{style:s,returnToListScreen:i,onRename:()=>d(!0),setStateToManualEdit:()=>j("edit_manually")})]}),(0,n.jsxs)(u.P.div,{className:"min-h-0",initial:!!a.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.1},opacity:{duration:.3,delay:.1}},children:["view"===f&&(0,n.jsx)(ac,{style:s,onClick:()=>j("edit")}),"edit"===f&&(0,n.jsx)(ao,{style:s,updateStyle:b,onClose:()=>j("view")}),"edit_manually"===f&&(0,n.jsx)(ad,{style:s,updateStyle:b,onClose:()=>j("view")})]}),(0,n.jsx)(au,{style:s,animateBoolRef:a})]})});ar.displayName="EditStyle";let ao=e=>{let{style:t,updateStyle:a,onClose:s}=e,l=(0,p.A)(),i=(0,m.useRef)(t.prompt),r=(0,m.useRef)(null),[o,h]=(0,m.useState)(!1),[x,f]=(0,m.useState)(!1),[g,y]=(0,m.useState)([]),[v,b]=(0,m.useState)(""),j=async e=>{if(e.preventDefault(),o||x)return!1;await w(v)},w=async e=>{b(""),h(!0),y([...g,e]);try{await a({editInput:e})}catch(e){b(v),y(e=>e.slice(0,-1))}h(!1)},M=async()=>{g.length&&(f(!0),await a({prompt:i.current}),f(!1)),s()},_=(0,m.useMemo)(()=>{if(!t.attributes)return[];let e=Math.floor(Math.random()*t.attributes.length),a=e+1<t.attributes.length?e+1:e-1;return[l.formatMessage({defaultMessage:"A bit more {attribute}",id:"au1WTQvqDg"},{attribute:t.attributes[e].name.toLowerCase()}),l.formatMessage({defaultMessage:"Much less {attribute}",id:"dIbq/Ow8Zn"},{attribute:t.attributes[a].name.toLowerCase()})]},[t.attributes,l]);return(0,m.useEffect)(()=>{if(g.length>0){var e;null==(e=r.current)||e.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})}},[g,t.summary]),(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 p-2.5 rounded-xl border border-accent-secondary-100/50 bg-bg-100 ",children:[(0,n.jsxs)("div",{className:(0,d.A)("border-0.5 rounded-lg p-3 pt-2.5 mb-2 relative transition bg-gradient-to-b",o?"border-border-300 from-accent-secondary-900/50 to-accent-secondary-900/10":"border-accent-secondary-100/50 from-accent-secondary-900/75 to-accent-secondary-900/25"),children:[(0,n.jsx)("div",{className:(0,d.A)("font-claude-response font-normal text-pretty leading-snug text-text-200 transition",o?"opacity-0 scale-[0.975]":"delay-150 duration-150 ease-out"),children:t.summary}),(0,n.jsx)(c.N,{children:o&&(0,n.jsx)(u.P.div,{className:"absolute inset-0 grid place-items-center",initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},children:(0,n.jsx)(t5.a,{state:"thinking"})})})]}),(0,n.jsx)("ul",{ref:r,className:"flex-1 min-h-0 overflow-y-auto flex flex-col gap-2",children:g.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"inline-block py-2 px-3 rounded-lg bg-bg-300 text-sm",children:e})},e))}),g.length>0?(0,n.jsx)("div",{className:"text-sm text-center text-text-500",children:(0,n.jsx)(S.A,{defaultMessage:"Ask for more edits, save, or discard changes",id:"zOxoAYYCog"})}):(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("div",{className:"text-sm text-text-500 mb-2",children:(0,n.jsx)(S.A,{defaultMessage:"Describe how you’d like to edit the style, like:",id:"PRDvfjUkNA"})}),(0,n.jsx)("ul",{className:"flex flex-col gap-2",children:_.map((e,t)=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:t=>{t.preventDefault(),w(e)},className:"text-sm font-medium h-8 px-3 rounded-full border-0.5 border-border-200 text-text-200 bg-gradient-to-b hover:text-text-000 hover:from-bg-400/0 hover:to-bg-400/50 hover:border-border-100 active:scale-x-[0.985] active:scale-y-[0.995] transition",children:e})},t))})]}),(0,n.jsx)("form",{className:"mb-1.5 mx-0.5",onSubmit:e=>j(e),children:(0,n.jsx)(tf.ks,{autoFocus:!0,className:"w-full",name:"inputText",placeholder:l.formatMessage({defaultMessage:"Ask Claude to edit the style...",id:"5D1Fao75P8"}),size:"lg",value:v,onChange:e=>b(e.target.value),append:(0,n.jsx)(c.N,{children:v.length>0&&(0,n.jsx)(u.P.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0,transition:{ease:"easeIn",duration:.1}},children:(0,n.jsx)(W.$,{type:"submit",size:"icon_sm",variant:"flat",disabled:o||x,children:(0,n.jsx)(t6.D,{})})})})})})]}),(0,n.jsxs)(ai,{isSaveButton:!0,children:[(0,n.jsx)(W.$,{onClick:s,disabled:o||x||v.length>0||0===g.length,children:(0,n.jsx)(S.A,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,n.jsx)(W.$,{onClick:M,disabled:o,loading:x,variant:"secondary",children:g.length>0?(0,n.jsx)(S.A,{defaultMessage:"Discard",id:"nmpevlUATU"}):(0,n.jsx)(S.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},ad=e=>{let{style:t,updateStyle:a,onClose:s}=e,[l,i]=(0,m.useState)(!1),[r,o]=(0,m.useState)(t.prompt),d=(0,p.A)(),c=async e=>{e.preventDefault(),i(!0),await a({prompt:r}),i(!1),s()};return(0,n.jsxs)("form",{className:"flex flex-col gap-2 h-full min-h-0 p-3 pt-2 rounded-xl border-0.5 border-border-200",onSubmit:e=>c(e),children:[(0,n.jsx)("div",{className:"text-center text-sm text-text-200 font-medium",children:(0,n.jsx)(S.A,{defaultMessage:"Edit style instructions manually",id:"+qSf1b/LLJ"})}),(0,n.jsx)("textarea",{className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:d.formatMessage({defaultMessage:"Describe your style instructions",id:"nk7EX3l+b4"}),value:r,disabled:l,onChange:e=>o(e.target.value),autoFocus:!0}),(0,n.jsxs)(ai,{isSaveButton:!0,children:[(0,n.jsx)(W.$,{type:"submit",loading:l,children:(0,n.jsx)(S.A,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,n.jsx)(W.$,{onClick:()=>{o(t.prompt),s()},disabled:l,variant:"secondary",children:(0,n.jsx)(S.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},ac=e=>{let{style:t,onClick:a}=e,s="default"===t.type;return(0,n.jsxs)("div",{className:(0,d.A)("flex flex-col items-center h-full px-6 gap-4 rounded-lg sm:rounded-xl max-sm:mx-1.5",!s&&"bg-gradient-to-b from-accent-secondary-900/75 to-accent-secondary-900/25 border border-accent-secondary-100/50",s&&"bg-bg-300 border border-border-300"),children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("div",{className:(0,d.A)("w-fit px-4 py-2 pb-2.5 gap-2.5 rounded-b-lg font-medium text-xs",s?"bg-bg-400 text-text-300":"bg-accent-secondary-200/10 text-accent-secondary-100"),children:s?(0,n.jsx)(S.A,{defaultMessage:"Preset style",id:"qwpRSZtBAV"}):(0,n.jsx)(S.A,{defaultMessage:"Your custom style",id:"o/vLK7B7mw"})})}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-1.5 pb-4",children:[!s&&(0,n.jsx)(K.Tooltip,{className:"text-center",tooltipContent:(0,n.jsx)(S.A,{defaultMessage:"Full style instructions are generated and include more than shown in summary. You can edit instructions manually from the options menu",id:"R5PMcY1ELo"}),children:(0,n.jsxs)("div",{className:"flex items-center gap-1 cursor-help opacity-50 hover:opacity-60",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:(0,n.jsx)(S.A,{defaultMessage:"Style summary",id:"hVmQ4DO8io"})}),(0,n.jsx)(eq.R,{size:12,className:"translate-y-px",weight:"bold"})]})}),(0,n.jsx)("div",{"data-testid":"style-summary",className:"font-claude-response text-xl font-normal text-pretty leading-snug text-center flex-1 flex items-center",children:"default"===t.type&&t.summaryKey?(0,n.jsx)(i.X5,{id:t.summaryKey}):t.summary})]}),(0,n.jsx)("div",{className:"flex-1 flex items-center text-sm",children:s?(0,n.jsx)(S.A,{defaultMessage:"Preset styles are not editable",id:"qjKy0s/reb"}):(0,n.jsx)(W.$,{variant:"outline",onClick:a,className:"!border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10",prepend:(0,n.jsx)(t7.f,{weight:"bold"}),children:(0,n.jsx)(S.A,{defaultMessage:"Edit with Claude",id:"wdKoWlVN+G"})})})]})},au=e=>{let{style:t,animateBoolRef:a}=e,s=(0,p.A)(),[l,o]=(0,m.useState)(""),[h,x]=(0,m.useState)(),f=(0,m.useRef)(t.prompt),g=(0,m.useRef)(h),y=(0,r.T9)("claude_style_previews","previewExamples",al,an),{handleRateLimitError:v}=tB(),{isPending:b,mutateAsync:j}=(0,tT.n7)(),w=(0,m.useCallback)(async()=>{if(h)try{let e=await j({style_prompt:t.prompt,example_key:h.key,example_text:h.textKey?(0,i.fl)({id:h.textKey,intl:s}):h.text});o(e)}catch(e){v(e,s.formatMessage({defaultMessage:"Failed to preview style. Please try again.",id:"B2A4x/wbTg"}))}},[v,j,h,t.prompt,s]);return(0,m.useEffect)(()=>{var e;(f.current!==t.prompt||(null==(e=g.current)?void 0:e.key)!==(null==h?void 0:h.key))&&(f.current=t.prompt,g.current=h,w())},[w,h,t.prompt]),(0,n.jsx)(u.P.div,{className:(0,d.A)("max-sm:hidden flex flex-col gap-2 h-full min-h-0 p-2 rounded-xl border-0.5 border-border-300 transition-colors",h?"bg-bg-000/70":"bg-bg-000/20"),initial:!!a.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.2},opacity:{duration:.3,delay:.2}},children:h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center text-sm px-2 font-medium text-text-200",children:[(0,n.jsx)(S.A,{defaultMessage:"Previewing with",id:"tNFdPqESDT"}),(0,n.jsx)(V.ms,{align:"center",trigger:(0,n.jsx)(W.$,{variant:"ghost",size:"unset",className:"!px-1 !py-0.5 gap-0.5 !text-accent-secondary-100 hover:!bg-accent-secondary-900",append:(0,n.jsx)(ae.a,{className:"translate-y-px"}),children:h?h.nameKey?(0,n.jsx)(i.X5,{id:h.nameKey}):h.name:(0,n.jsx)(S.A,{defaultMessage:"Example",id:"xrCRnH/mKK"})}),children:y.map(e=>(0,n.jsx)(V.tJ,{disabled:b,onClick:()=>x(e),children:e.nameKey?(0,n.jsx)(i.X5,{id:e.nameKey}):e.name},e.key))})]}),(0,n.jsxs)(t2.E,{className:"p-2 pt-0 min-h-0 overflow-y-scroll",children:[(0,n.jsx)("div",{className:"bg-bg-300 -mx-0.5 mb-2 py-1.5 px-2 text-sm rounded-lg text-pretty",children:h.textKey?(0,n.jsx)(i.X5,{id:h.textKey}):h.text}),(0,n.jsx)(c.N,{children:b?(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(t5.a,{state:"writing"})}):(0,n.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},children:(0,n.jsx)(t1.fP,{className:"font-claude-response flex-1 flex flex-col gap-2",text:l})})})]})]}):(0,n.jsx)("div",{className:"flex-1 grid place-items-center text-center",children:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"text-sm text-text-500 font-medium mb-4",children:(0,n.jsx)(S.A,{defaultMessage:"Preview with an example...",id:"YdUmd5z6YL"})}),(0,n.jsx)("div",{className:"flex flex-wrap justify-center gap-2 w-full",children:y.map(e=>(0,n.jsx)("button",{onClick:()=>x(e),className:"\n                    rounded-full\n                    border-0.5\n                    border-border-300\n                    text-sm\n                    text-text-400\n                    font-medium\n                    h-8\n                    px-3\n                    flex\n                    items-center\n                    bg-gradient-to-b\n                    from-always-black/0\n                    to-always-black/5\n                    hover:bg-accent-secondary-900\n                    hover:text-accent-secondary-000\n                    hover:border-accent-secondary-100/50\n                    transition-colors",children:e.nameKey?(0,n.jsx)(i.X5,{id:e.nameKey}):e.name},e.key))})]})})})},am=e=>{let{style:t,returnToListScreen:a,onRename:s,setStateToManualEdit:l}=e,i=(0,at.X)(t),r="default"===t.type,{isPending:o,mutateAsync:d}=(0,tT.M$)(i),{addHiddenPresetStyle:c}=aa(),{clearStoredStyle:u,storedStyle:m}=(0,tx.p)(),{addError:h}=(0,N.Y)(),x=(0,p.A)(),f=async()=>{if(r)c(t),setTimeout(()=>{a()},500);else try{await d(),m&&"uuid"in m&&m.uuid===t.uuid&&u(),a()}catch(e){h(x.formatMessage({defaultMessage:"Failed to delete style. Please try again.",id:"4eIHICfKCI"}),{error:e})}};return(0,n.jsxs)(V.ms,{align:"end",unstyledTrigger:!0,trigger:(0,n.jsxs)(W.$,{variant:"ghost",className:"max-sm:min-w-8 max-sm:px-2 sm:pl-3 sm:pr-2",children:[(0,n.jsxs)("span",{className:"hidden sm:flex items-center gap-1",children:[(0,n.jsx)(S.A,{defaultMessage:"Options",id:"NDV5MqT9ww"}),"\xa0",(0,n.jsx)(ae.a,{})]}),(0,n.jsx)("span",{className:"sm:hidden",children:(0,n.jsx)(t3.L,{weight:"bold",size:20})})]}),children:[!r&&(0,n.jsx)(V.tJ,{disabled:o,onClick:()=>{s()},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(t4.g,{className:"mr-2"}),(0,n.jsx)(S.A,{defaultMessage:"Rename style",id:"sEO8vFphTF"})]})}),"Concise"===i?(0,n.jsx)(V.q,{className:"text-sm",children:(0,n.jsx)(S.A,{defaultMessage:"Concise style can’t be hidden",id:"zTztS+Om9I"})}):(0,n.jsx)(V.tJ,{className:"pr-0 !text-danger-000",disabled:o,onClick:f,children:r?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(t9.C,{}),(0,n.jsx)(S.A,{defaultMessage:"Hide preset style",id:"z44N28JZYv"})]}):(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(t8.l,{}),(0,n.jsx)(S.A,{defaultMessage:"Delete style",id:"fAqSoPl78t"})]})}),!r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V.DG,{}),(0,n.jsx)(V.tJ,{onClick:l,children:(0,n.jsx)(S.A,{defaultMessage:"Edit style manually",id:"H+z4uo2Wfn"})})]})]})},ap=e=>{let{size:t=16,className:a}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:a,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M8.5 4.5c-3 2-4.5 4-5.5 8L2.5 15l1-1.5"}),(0,n.jsx)("path",{d:"M3 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C9 1.9 9 .9 8 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,n.jsx)("path",{d:"M10.5 11v4m-2-2h4"})]})};var ah=a(59880),ax=a(94879),af=a(19610),ag=a(82356),ay=a(85401);let av=(0,m.forwardRef)((e,t)=>{let{setScreen:a,styles:s,onStyleChange:l}=e,{hiddenPresetStyles:i,resetHiddenPresetStyles:r}=aa(),{sortStyles:o,setOrder:d}=function(){let[e,t]=(0,eO.Vc)("userStylesOrder",[]);return{sortStyles:(0,m.useCallback)(t=>[...t].sort((t,a)=>{let s=(0,at.X)(t),n=(0,at.X)(a);if("Default"===s)return -1;if("Default"===n)return 1;let l=e.indexOf(s),i=e.indexOf(n);return -1===l&&-1===i?0:-1===l?1:-1===i?-1:l-i}),[e]),stylesOrder:e,setOrder:(0,m.useCallback)(e=>{t(e.map(e=>(0,at.X)(e)))},[t])}}(),[c,p]=(0,m.useState)([]),h=(0,m.useCallback)(e=>{let t=[...i,"Default"];return o(e.filter(e=>!t.includes((0,at.X)(e))))},[i,o]);(0,m.useEffect)(()=>{p(h(s))},[s,h]);let x=(0,m.useCallback)(e=>{Array.isArray(e)&&(p(e),d(e))},[d]),f=(0,m.useMemo)(()=>s.some(e=>"custom"===e.type),[s]);return(0,n.jsxs)(u.P.div,{exit:{opacity:0,transition:{duration:0}},ref:t,className:"flex-1 min-h-0 flex flex-col -mx-3",children:[(0,n.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,n.jsx)(af.x,{as:"ul",axis:"y",values:c,onReorder:x,layoutScroll:!0,className:"pl-3 pr-3 pb-2 overflow-y-auto max-h-full [mask-image:linear-gradient(to_top,hsl(var(--always-black)/0%)_0%,_hsl(var(--always-black)/100%)_3%)]",children:c.map(e=>(0,n.jsx)(ab,{style:e,onClick:()=>l(e,!1)},(0,at.X)(e)))}),!f&&(0,n.jsxs)(u.P.div,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{delay:.3,ease:"easeOut",duration:.3}},exit:{opacity:0},className:"flex bg-gradient-to-b from-accent-pro-900/20 to-accent-pro-900/50 py-3 pl-3.5 pr-5 mx-3 rounded-lg border-0.5 border-border-300 text-text-300 text-sm",children:[(0,n.jsx)("div",{className:"font-ui-serif font-medium mr-4 text-accent-pro-000 mt-px whitespace-nowrap",children:(0,n.jsx)(S.A,{defaultMessage:"Tip",id:"4j1TGZubAJ"})}),(0,n.jsx)("p",{children:(0,n.jsx)(S.A,{defaultMessage:"Choose from preset styles or create your own custom style to tailor elements of Claude’s written responses such as tone, voice, vocabulary, detail level, and more. <link>Learn about styles</link>",id:"pwT6iI4QV7",values:{link:e=>(0,n.jsx)(tD.Y,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",target:"_blank",children:e})}})})]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-4 mx-3",children:[(0,n.jsx)(W.$,{onClick:()=>a(tS.I.CREATE),prepend:(0,n.jsx)(ap,{}),children:(0,n.jsx)(S.A,{defaultMessage:"Create custom style",id:"9y/YEanHck"})}),i.length>0&&(0,n.jsx)(tD.Y,{onClick:r,children:(0,n.jsx)(S.A,{defaultMessage:"Reset preset styles",id:"EITqrHaUNi"})})]})]})});av.displayName="ListStyles";let ab=e=>{let{style:t,onClick:a}=e,s="default"===t.type,l=(0,ag.m)(),[r,o]=(0,m.useState)(!1);return(0,n.jsxs)(ay.N,{value:t,dragListener:!1,dragControls:l,dragTransition:{bounceStiffness:500,bounceDamping:40},onDragStart:()=>o(!0),onDragEnd:()=>o(!1),className:"relative my-2 min-w-0",children:[(0,n.jsxs)("button",{className:(0,d.A)("\n          flex\n          items-center\n          w-full\n          h-11\n          py-4\n          pl-1\n          pr-3\n          min-w-0\n          rounded-lg\n          transition\n          border-0.5\n          border-border-300\n          bg-bg-100\n          bg-gradient-to-b\n          from-bg-300/0\n          to-bg-300/50\n          select-none\n          relative\n        ",r?"scale-y-[1.015] scale-x-[1.0025] shadow-md":"group hover:enabled:from-accent-secondary-200/0 hover:enabled:to-accent-secondary-200/10 hover:enabled:border-accent-secondary-200/50"),onClick:a,children:[(0,n.jsx)("div",{className:"flex min-w-0 items-center flex-1 pl-7 truncate",children:"default"===t.type&&t.nameKey?(0,n.jsx)(i.X5,{id:t.nameKey}):t.name}),s&&(0,n.jsx)("div",{className:"mr-0.5 rounded-full px-2 py-0.5 bg-text-300/5 text-text-400 font-medium text-[0.625rem]",children:(0,n.jsx)(S.A,{defaultMessage:"Preset",id:"EucS2pAMVS"})}),(0,n.jsx)("div",{className:"text-accent-secondary-200 opacity-0 scale-50 transition group-hover:scale-100 group-hover:opacity-100",children:s?(0,n.jsx)(ah.Q,{}):(0,n.jsx)(t4.g,{})})]}),(0,n.jsx)("div",{onPointerDown:e=>l.start(e),onClick:e=>e.stopPropagation(),className:"w-7 h-7 absolute left-1 top-1/2 -translate-y-1/2 grid place-items-center cursor-move text-text-500 hover:text-accent-secondary-000",children:(0,n.jsx)(ax.H,{size:16,weight:"bold"})})]})},aj=e=>{let{openWithScreen:t,onClose:a,styles:s,setChatStyle:l}=e,r=(0,p.A)(),o=!!t,d=(0,eu.st)(),[u,h]=(0,m.useState)(t||tS.I.LIST),[x,f]=(0,m.useState)(),[g,y]=(0,m.useState)(!1),[v,b]=(0,m.useState)(!1),j=(0,m.useRef)(!1);(0,m.useEffect)(()=>{t&&h(t)},[t]);let w=()=>{j.current=!1,h(tS.I.LIST),y(!1),b(!1)},M=()=>{(!g||window.confirm(r.formatMessage({defaultMessage:"Are you sure? Closing while editing may not synchronize changes.",id:"0XdWZrmwXu"})))&&(d.track({event_key:"styles.modal",open:!1}),w(),a())},_=(e,t)=>{j.current=t,f(e),h(tS.I.EDIT),y(!1),b(!1)};return(0,n.jsx)(eC.aF,{modalSize:"xl",title:(e=>{switch(e){case tS.I.CREATE:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(S.A,{defaultMessage:"Create a style",id:"/pKvFi9Ak4"})});case tS.I.CREATE_MANUALLY:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(S.A,{defaultMessage:"Describe your style",id:"Ntblq5cSRe"})});case tS.I.LIST:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(S.A,{defaultMessage:"Customize your styles",id:"dn3MiW/vUH"})});case tS.I.EDIT:return(0,n.jsx)("div",{className:"w-10/12 sm:w-5/12 md:w-7/12",children:v?(0,n.jsx)(aw,{style:x,onClose:e=>{e&&f(e),b(!1)}}):(0,n.jsx)("button",{title:x.name,className:"w-full font-ui-serif font-normal text-left truncate cursor-text h-9 pr-4 leading-none translate-y-px text-text-200 hover:text-text-000",onClick:()=>!g&&b(!0),children:g?(0,n.jsx)(S.A,{defaultMessage:"Edit {name}",id:"s3IOQQ+nJU",values:{name:x.name}}):"default"===x.type&&x.nameKey?(0,n.jsx)(i.X5,{id:x.nameKey}):x.name})})}})(u),icon:(e=>{switch(e){case tS.I.CREATE:case tS.I.EDIT:return(0,n.jsx)(W.$,{variant:"ghost",size:"icon_sm",disabled:g,onClick:()=>w(),children:(0,n.jsx)(tE.n,{})});case tS.I.CREATE_MANUALLY:return(0,n.jsx)(W.$,{variant:"ghost",size:"icon_sm",onClick:()=>h(tS.I.CREATE),children:(0,n.jsx)(tE.n,{})});case tS.I.LIST:return null}})(u),isOpen:o,onClose:M,className:"h-[35rem] !bg-gradient-to-b from-bg-100 to-bg-200 !pt-5 !pb-7",prependBeforeCloseButton:(0,n.jsx)(n.Fragment,{children:u===tS.I.LIST&&(0,n.jsx)(K.Tooltip,{tooltipContent:r.formatMessage({defaultMessage:"Learn more about styles ↗",id:"nuhnis5YtY"}),children:(0,n.jsx)("div",{className:"mr-1",children:(0,n.jsx)(W.$,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",variant:"ghost",className:"text-text-300",size:"icon",target:"_blank",children:(0,n.jsx)(tI.v,{size:18})})})})}),hasCloseButton:!0,children:(0,n.jsxs)(c.N,{mode:"popLayout",children:[u===tS.I.CREATE&&(0,n.jsx)(tV,{onStyleChange:_,setScreen:h,animateBoolRef:j},"CreateStyleScreen"),u===tS.I.CREATE_MANUALLY&&(0,n.jsx)(t0,{onStyleChange:_,setScreen:h},"CreateStyleManuallyScreen"),u===tS.I.LIST&&(0,n.jsx)(av,{setScreen:h,styles:s,onStyleChange:_},"ListStylesScreen"),u===tS.I.EDIT&&x&&(0,n.jsx)(ar,{animateBoolRef:j,style:x,returnToListScreen:w,setIsEditingName:b,setCurrentStyle:f,setIsEditing:y,setChatStyle:e=>{l(e),M()}},"EditStyleScreen")]})})},aw=e=>{let{style:t,onClose:a}=e,s=(0,at.X)(t),l="default"===t.type,r=(0,p.A)(),[o,d]=(0,m.useState)("default"===t.type&&t.nameKey?(0,i.fl)({id:t.nameKey,intl:r}):t.name),{isPending:c,mutateAsync:u}=(0,tT.lo)(s,l),h=async()=>{a(await u({name:o}))};return(0,n.jsx)("form",{className:"w-full",onSubmit:async e=>{e.preventDefault(),await h()},children:(0,n.jsx)(tf.ks,{autoFocus:!0,className:"w-full",value:o,maxLength:64,onChange:e=>d(e.target.value),error:0===o.length,append:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W.$,{variant:"ghost",type:"button",size:"unset",className:"w-7 h-7 rounded-md mr-1",onClick:()=>a(),disabled:c,children:(0,n.jsx)(eV.X,{})}),(0,n.jsx)(W.$,{variant:"flat",size:"unset",className:"w-7 h-7 rounded-md",type:"submit",loading:c,children:(0,n.jsx)(Z.J,{weight:"bold"})})]})})})};var aM=a(96469),a_=a(34096);let ak=()=>{let e=(0,_.QN)(),{setProjectUuid:t,setSyncSourceUuids:a,setIsUploadingGithubSync:s,syncSourceUuids:l,attachments:i,setAttachments:r}=(0,j.o)(),{styleModalOpenWithScreen:o,setStyleModalOpenWithScreen:d,createProjectModalIsOpen:c,setCreateProjectModalIsOpen:u,githubModalIsOpen:p,setGithubModalIsOpen:x,gmailAuthModalIsOpen:f,setGmailAuthModalIsOpen:g,createPromptArgumentModalIsOpen:y,setCreatePromptArgumentModalIsOpen:v}=(0,e5.CH)(),{mcpDirectoryModalIsOpen:b,setMcpDirectoryModalIsOpen:w}=(0,e5.tl)(),{personalizedStyleOptions:M}=(0,tx.p)(),k=(0,eF.sb)(),A=(0,e2.pi)(),N=(0,m.useCallback)(e=>{a(t=>[...t,e.uuid]),s(!1)},[a,s]),C=(0,h.NY)(l),S=(0,th.B7)(C);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(aj,{openWithScreen:o,onClose:()=>d(null),styles:M,setChatStyle:e=>A(e.key)}),(0,n.jsx)(a_.r,{isOpen:!!f,onClose:()=>g(!1),callerIdentifier:"inputMenu"}),(0,n.jsx)(tN,{moveAttachments:!!(null==c?void 0:c.moveAttachments),isOpen:!!(null==c?void 0:c.isOpen),handleClose:()=>u(null),handleProjectCreated:e=>{t(e.uuid),u(null)},syncSources:S,attachments:i,setSyncSourceUuids:a,setAttachments:r}),(0,n.jsx)(aM.s,{location:"chat",projectUuid:e,isOpen:p,onClose:()=>x(!1),onCreated:N,setIsUploadingGithubSync:s}),y&&(0,n.jsx)(tj,{isOpen:y.isOpen,onClose:()=>v(null),serverUuid:y.serverUuid,prompt:y.prompt}),k&&(0,n.jsx)(eG.TY,{isOpen:b,setIsOpen:w,showManageButton:!0})]})};function aA(){let e=(0,s._)(["\n  !box-content\n  flex\n  flex-col\n  bg-bg-000\n  mx-2\n  md:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  cursor-text\n  z-10\n  rounded-2xl\n"]);return aA=function(){return e},e}function aN(){let e=(0,s._)(["\n  bg-bg-100 \n  w-full \n  h-2\n"]);return aN=function(){return e},e}function aC(){let e=(0,s._)(["\n  flex \n  w-full \n  min-w-0 \n  flex-col\n"]);return aC=function(){return e},e}let aS=(0,m.forwardRef)((e,t)=>{let{disabled:a,placement:s,placeholder:l,onSubmit:g,onReady:y,onRetry:v,enableScreenDrop:O=!1,disableDropZone:L=!1}=e,R=(0,p.A)(),P=(0,e5.CH)(),{prompt:z,tipTapEditorState:F}=(0,_.QT)(),U=(0,_.QN)(),G=(0,_.Jy)(e=>e.previewPrompt),{setPrompt:Y,setAttachments:B,setFiles:H,attachments:W,setTipTapEditorState:V,files:K,syncSourceUuids:q,isUploadingDriveSync:X,isUploadingGithubSync:$,sendMessage:J,conversation:Z,isChatSyncing:Q,isProjectSyncing:ee,setSyncSourceUuids:et,isSending:ea,focusInput:es,promptInputRef:en,willRedirectOnSubmit:el,hasBlockingWarning:ei,isUploadingFile:er,setIsUploadingFile:eo,validateMaxUploadLimit:ed,onPasteFiles:ec,uploadInputProps:eu,hasAttachments:em,isNewConversation:ep,isImprovingPrompt:eh}=(0,j.o)(),{incognitoModeEnabled:ex}=(0,w.S)();(0,m.useImperativeHandle)(t,()=>({setContent:(e,t,a)=>{Y(e,{forceUpdateTiptap:!0}),B("function"==typeof t?t(W):t),H("function"==typeof a?a(K):a)},sendMessage:J,setAttachments:e=>{B("function"==typeof e?e(W):e)},getAttachments:()=>W})),(()=>{let{setPrompt:e,setAttachments:t,setFiles:a}=(0,_.Tc)(e=>({setPrompt:e.setPrompt,setAttachments:e.setAttachments,setFiles:e.setFiles}),"useSavePromptOnFail"),{failedStreamRetryData:s,setFailedStreamRetryData:n}=(0,D.x)();(0,m.useEffect)(()=>{null!==s&&(e(s.prompt),t(s.attachments),a(s.files),n(null))},[s,t,n,a,e])})();let{fetchInputAutocompletion:ef}=(0,x.$z)(null==Z?void 0:Z.id),eg=function(e,t,a,s,n,l){let[i,r]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{let e=e=>{"Shift"===e.key&&r(!0)},t=e=>{"Shift"===e.key&&r(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,m.useCallback)(e=>{var a,r,o;let d=null==(r=e.clipboardData)||null==(a=r.files)?void 0:a.length,c=null==(o=e.clipboardData)?void 0:o.getData("text/plain"),u=null==c?void 0:c.length;if(u&&!d){let e=(0,I.$)(c);e&&l(e)}if(d&&!u){s({newUploads:Array.from(e.clipboardData.files)})&&n(e.clipboardData.files),e.preventDefault();return}s({numNewPotentialAttachments:1,showError:!1})&&(!u||c.length<4e3||i||(e.preventDefault(),t(e=>[...e,{file_name:"",file_size:c.length,file_type:"txt",extracted_content:c}])))},[s,t,n,l,i])}(0,B,0,ed,ec,(()=>{let{prompt:e}=(0,_.QT)(),{setSyncSourceUuids:t,isAtMaxNumUploads:a,setIsUploadingDriveSync:s}=(0,j.o)(),l=(0,E.LP)(),{addError:i}=(0,N.Y)(),r=(0,p.A)(),{mutate:o}=(0,h.EF)({onMutate:()=>{s(!0)},onSuccess:e=>{t(t=>[...t,e.uuid]),s(!1)},onError:e=>{s(!1),i((0,T.J)(e),{error:e})},meta:{noToast:!0}}),{isDriveAuthenticated:d,initDriveAuth:c}=(0,E.cI)({callerIdentifier:"chat-input",handleAuthSuccess:()=>{for(let t of e.match(/(https?:\/\/[^\s]+)/gi)||[]){let e=(0,I.$)(t);e&&u(e,!0)}}}),u=(0,m.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(l||t){if(!d&&!t)return void i((0,n.jsx)("span",{children:(0,n.jsx)(S.A,{defaultMessage:"<button>Authenticate</button> to paste link as attachment",id:"85AH1hyv0s",values:{button:e=>(0,n.jsx)("button",{className:"underline",onClick:c,children:e})}})}));if(a)return void i(r.formatMessage({defaultMessage:"You can add at most {maxUploads, plural, one {# attachment} other {# attachments}} to a message.",id:"wvnM4s8976"},{maxUploads:A.XA.maxTotalUploadsPerMessage}));o({sync_source_type:C.v8.GDRIVE,sync_source_config:{uri:e}})}},[l,d,a,o,c,i,r]);return u})()),ey=(0,k.U)(U),{value:ev}=(0,r.fS)("test_gated_strings"),{value:eb}=(0,r.fS)("claudeai_beam"),ej=(0,o.q)(),ew=a||ea||0===z.length&&0===W.length&&0===K.length&&0===q.length||er||X||$||Q||ee||ei||ey||(null==Z?void 0:Z.isSampling)===!0,eM=(0,m.useCallback)(async()=>{!ew&&(await J(),g&&g())},[ew,g,J]),e_=(0,m.useCallback)(e=>{V(e)},[V,P,eb]),ek=(0,m.useCallback)(e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.closest("[role]")||t.closest("a")||t.closest("input")||t.closest("select")||t.closest("textarea")||es()},[es]),eA=(0,m.useRef)(null),eN=(0,h.NY)(q).map((e,t)=>{let{data:a}=e;return{syncSource:a,uuid:q[t]}}),eC=(0,n.jsx)(c.N,{initial:!1,children:em&&(0,n.jsx)(u.P.div,{className:"overflow-hidden rounded-b-2xl",initial:{height:0},animate:{height:"auto"},exit:{height:0},children:(0,n.jsx)(b,{isUploadingFile:er,isUploadingSync:X||$,attachments:W,files:K,syncSourceResults:eN,onRemoveAttachment:e=>{B(t=>t.filter((t,a)=>a!==e))},onRemoveFile:e=>{H(t=>t.filter((t,a)=>a!==e))},onRemoveSyncSource:e=>{et(t=>t.filter(t=>t!==e))}})},"attachments")});return ej?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(aD,{onPasteCapture:e=>{var t,a;(null==en||null==(a=en.current)||null==(t=a.getEditor())?void 0:t.isFocused)&&eg(e)},children:[(0,n.jsx)("input",{ref:eA,id:"chat-input-file-upload-".concat(s),"data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0 select-none",...eu}),"bottom"===s&&(0,n.jsx)("div",{className:"px-3 md:px-2",children:(0,n.jsx)(f.Q,{placement:s,onRetry:(e,t)=>null==v?void 0:v(e,t)})}),(0,n.jsxs)(aI,{onClick:ek,className:(0,d.A)("border border-transparent",el&&ea&&"animated-loading-background",eh?"transition-all duration-500 ring-1 ring-border-300/50 dark:ring-border-300/50":"",ex?"border-dashed bg-clip-padding !border-border-200 shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)] focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%)]":"shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%),0_0_0_0.5px_hsla(var(--border-300)/0.15)] hover:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)] focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)] hover:focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)]"),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3.5 m-3.5",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(M.P,{ref:en,prompt:z,tipTapEditorState:F,setTipTapEditorState:e_,onSubmit:eM,onReady:y,placement:s,placeholder:null!=l?l:ep?ev?(0,i.O)({id:"spread_attempt_mind",intl:R}):R.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}):ev?(0,i.O)({id:"window_edge_kiwi",intl:R}):R.formatMessage({defaultMessage:"Reply to Claude...",id:"kSt28+RchS"}),fetchInputAutocompletion:ef,className:G?"!opacity-0":void 0}),(0,n.jsx)(c.N,{children:G?(0,n.jsx)(u.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"self-start absolute pointer-events-none inset-0 text-text-500 line-clamp-2",children:G}):eh&&z?(0,n.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 pointer-events-none overflow-hidden rounded",children:(0,n.jsx)(u.P.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-always-white/20 dark:via-always-white/10 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,ease:"easeInOut",repeat:1/0}})}):null})]}),(0,n.jsx)(td,{placement:s,isDisabled:ew})]}),(0,n.jsx)(tm,{disabled:L,enableScreenDrop:O}),eC]}),"bottom"!==s&&(0,n.jsx)("div",{className:"px-3 md:px-2",children:(0,n.jsx)(f.Q,{placement:s,onRetry:(e,t)=>null==v?void 0:v(e,t)})}),"bottom"===s&&(0,n.jsx)(aT,{})]}),(0,n.jsx)(ak,{})]}):(0,n.jsxs)(aD,{children:[(0,n.jsx)(aI,{className:"bottom"===s?"h-[99px]":"h-[123px]"}),"bottom"===s&&(0,n.jsx)(aT,{})]})});aS.displayName="ChatInputContent";let aE=(0,m.forwardRef)((e,t)=>{let{disabled:a,placement:s,placeholder:l,onSubmit:i,onReady:r,onRetry:o,enableScreenDrop:d=!1,disableDropZone:c=!1}=e;return(0,n.jsx)(e5.Xx,{placement:s,children:(0,n.jsx)(aS,{ref:t,disabled:a,placement:s,placeholder:l,onSubmit:i,onReady:r,onRetry:o,enableScreenDrop:d,disableDropZone:c})})});aE.displayName="ChatInput";let aI=l.J.div(aA()),aT=l.J.div(aN()),aD=l.J.fieldset(aC())},69524:(e,t,a)=>{a.d(t,{B:()=>v});var s=a(54568),n=a(19736),l=a(64328),i=a(58720),r=a(23812),o=a(3075),d=a(84617),c=a(57291),u=a(68067),m=a(95617),p=a(7620),h=a(10369),x=a(59666),f=a(24443),g=a(61105);function y(e){let{value:t,children:a}=e;return(0,s.jsx)("option",{value:t,children:a})}function v(e){var t,a,v,b,j,w;let{conversationUuid:M,message:_,requestedFeedbackType:k,setRequestedFeedbackType:A,isOpen:N,onClose:C,onSuccess:S,showOptions:E=!0}=e,I=(0,h.A)(),[T,D]=(0,p.useState)(""),{data:O}=(0,n.Bq)(M),L=null==O?void 0:O.chat_messages.some(e=>(0,c.Xz)(e).length>0),R=(0,g.V)(null!=(v=null==O?void 0:O.chat_messages)?v:[]).length>0,{mutate:P}=(0,n.HA)(M,_,!!L,{onSuccess:S}),z=(0,p.useId)(),F=null!=(b=null==(t=_.content)?void 0:t.some(e=>"thinking"===e.type))&&b,U="raven"===(0,l.$b)(),G=(0,f.SK)(),Y=(0,u.fS)("claude_ai_report_content_option").value,B=null;return(null==O||null==(a=O.settings)?void 0:a.enabled_web_search)&&(B=null!=(w=null==(j=_.content)?void 0:j.some(e=>"tool_use"===e.type&&"web_search"===e.name))&&w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{value:m.kj.FLAG_WEB_OVER,children:(0,s.jsx)(x.A,{defaultMessage:"Shouldn’t have searched the web",id:"T+mr27AakV"})}),(0,s.jsx)(y,{value:m.kj.FLAG_WEB_SOURCES,children:(0,s.jsx)(x.A,{defaultMessage:"Don’t like the cited sources",id:"MBNotx/VaO"})}),(0,s.jsx)(y,{value:m.kj.FLAG_WEB_URL,children:(0,s.jsx)(x.A,{defaultMessage:"Report a URL",id:"BMYqsjhycd"})})]}):(0,s.jsx)(y,{value:m.kj.FLAG_WEB_UNDER,children:(0,s.jsx)(x.A,{defaultMessage:"Should have searched the web",id:"CS8kdzupd9"})})),(0,s.jsxs)(o.aF,{isOpen:N,title:I.formatMessage({defaultMessage:"Feedback",id:"Ejhdi47Jk5"}),onClose:C,children:[(0,s.jsx)("div",{className:"mt-4 flex flex-col",children:(null==k?void 0:k.includes("flag"))&&E&&(0,s.jsxs)(i.l6,{className:"my-2 max-w-md",label:I.formatMessage({defaultMessage:"What type of issue do you wish to report? (optional)",id:"IFWIi9rs1t"}),value:k,onChange:e=>{A(e.target.value||m.kj.FLAG)},children:[(0,s.jsx)(y,{value:m.kj.FLAG,children:(0,s.jsx)(x.A,{defaultMessage:"Select…",id:"q0+99kUbd6"})}),(0,s.jsx)(y,{value:m.kj.FLAG_BUG,children:(0,s.jsx)(x.A,{defaultMessage:"UI bug",id:"0uIYueAyDB"})}),(0,s.jsx)(y,{value:m.kj.FLAG_REFUSAL,children:(0,s.jsx)(x.A,{defaultMessage:"Overactive refusal",id:"Jl0Mn6yDBI"})}),R&&(0,s.jsx)(y,{value:m.kj.FLAG_FILE,children:(0,s.jsx)(x.A,{defaultMessage:"Poor image understanding",id:"227KYxHrx5"})}),(0,s.jsx)(y,{value:m.kj.FLAG_INSTRUCTIONS,children:(0,s.jsx)(x.A,{defaultMessage:"Did not fully follow my request",id:"2uOw8LgMwG"})}),(0,s.jsx)(y,{value:m.kj.FLAG_FACTS,children:(0,s.jsx)(x.A,{defaultMessage:"Not factually correct",id:"topE9Q6MGe"})}),(0,s.jsx)(y,{value:m.kj.FLAG_INCOMPLETE,children:(0,s.jsx)(x.A,{defaultMessage:"Incomplete response",id:"ZNEcy7OM5r"})}),F&&(0,s.jsx)(y,{value:m.kj.FLAG_THOUGHTS,children:(0,s.jsx)(x.A,{defaultMessage:"Issue with thought process",id:"zOab+24EWo"})}),B,G&&(0,s.jsx)(y,{value:m.kj.FLAG_MEMORY,children:(0,s.jsx)(x.A,{defaultMessage:"Memory not applied correctly",id:"lNOB6Omh4y"})}),Y&&(0,s.jsx)(y,{value:m.kj.FLAG_CONTENT,children:(0,s.jsx)(x.A,{defaultMessage:"Report content",id:"vfibES+z8T"})}),(0,s.jsx)(y,{value:m.kj.FLAG_OTHER,children:(0,s.jsx)(x.A,{defaultMessage:"Other",id:"/VnDMl81rh"})})]})}),k===m.kj.FLAG_WEB_URL||k===m.kj.FLAG_CONTENT?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-text-300 border-0.5 border-border-300 rounded-lg p-12 text-sm",children:(0,s.jsx)(x.A,{defaultMessage:"Please use this <link>form</link> to report violative content.",id:"QSjqvNNsUq",values:{link:e=>(0,s.jsx)(d.Y,{href:"https://docs.google.com/forms/d/e/1FAIpQLSeO9Hzkyf_hQ2fYkfP_cqAcJG5kdlkg1wF4drQEFK9Z6db7jg/viewform",target:"_blank",children:e})}})}),(0,s.jsx)(o.vW,{children:(0,s.jsx)(r.$,{variant:"secondary",onClick:C,children:(0,s.jsx)(x.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,s.jsx)("label",{htmlFor:z,className:"text-text-400 mb-2 text-sm",children:(0,s.jsx)(x.A,{defaultMessage:"Please provide details: (optional)",id:"og1W/bIZdx"})}),(0,s.jsx)(i.fs,{id:z,className:"text-sm",placeholder:(null==k?void 0:k.includes("flag"))||(null==k?void 0:k.includes("sc"))?I.formatMessage({defaultMessage:"What was unsatisfying about this response?",id:"+DB/t6WTki"}):I.formatMessage({defaultMessage:"What was satisfying about this response?",id:"yJFWG3mK1I"}),value:T,onChange:e=>{D(e.target.value)}})]}),(0,s.jsx)("p",{className:"text-text-500 mt-3 italic leading-tight",children:(0,s.jsx)("small",{children:(0,s.jsx)(x.A,{defaultMessage:"Submitting this report will send the entire current conversation to Anthropic for future improvements to our models. <link>Learn More</link>",id:"laRJ009b4f",values:{link:e=>(0,s.jsx)(d.Y,{target:"_blank",rel:"noopener",href:U?"https://privacy.anthropic.com/en/articles/9957937-how-does-anthropic-use-submitted-feedback":"https://privacy.anthropic.com/en/articles/10023565-how-does-anthropic-use-submitted-feedback",children:e})}})})}),(0,s.jsxs)(o.vW,{children:[(0,s.jsx)(r.$,{onClick:()=>{k&&(P({type:k,reason:T||void 0}),C())},children:(0,s.jsx)(x.A,{defaultMessage:"Submit",id:"wSZR47Y5kj"})}),(0,s.jsx)(r.$,{variant:"secondary",onClick:C,children:(0,s.jsx)(x.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})]})}},70780:(e,t,a)=>{var s=a(95617),n=a(45538);n.gr.BeamTemplateAskClaudeV1,s.xd.EXTENDED_THINKING,n.gr.BeamTemplatePmV1,s.xd.EXTENDED_THINKING,n.gr.BeamTemplateDsV1,s.xd.EXTENDED_THINKING},73619:(e,t,a)=>{a.d(t,{U:()=>n});var s=a(47831);let n=e=>{let t=(0,s.ED)(e),{maxKbTokens:a}=(0,s.AO)();return void 0!==t&&t>a}},81023:(e,t,a)=>{a.d(t,{l:()=>l});var s=a(47592),n=a(95839);let l=()=>{if((0,s.fJ)())return;let e=document.getElementById(n.I);e&&e.focus()}},83158:(e,t,a)=>{a.d(t,{Dk:()=>r,NM:()=>i,lD:()=>d,sv:()=>o});var s=a(54568),n=a(44894),l=a(47479);let i=e=>{let{file:t,size:a,showWarnings:n,onRemoveFile:i,onClick:r,isEditable:o}=e;return"xxs"===a?(0,s.jsx)(l.M1,{file:t}):(0,s.jsx)(l.NM,{file:t,showWarnings:n,handleRemove:i,handleClick:r,isEditable:o})};function r(e){let t=e.match(/\.[^/.]+$/);return t&&(0,n.cm)({imagesEnabled:!0}).includes(t[0].toLowerCase())?e.replace(/\.[^/.]+$/,""):e}let o=()=>(0,s.jsx)(l.Iq,{title:"Images hidden in shared chats",isError:!0}),d=()=>(0,s.jsx)(l.Iq,{title:"Files hidden in shared chats",isError:!0})},88801:(e,t,a)=>{a.d(t,{X:()=>s});function s(e){return"default"===e.type?e.key:e.uuid}},89568:(e,t,a)=>{a.d(t,{P:()=>B});var s=a(54568),n=a(7620);let l=(0,n.createContext)({setOverrideSubmit:()=>!1});var i=a(47592),r=a(33912),o=a(89501),d=a(15701),c=a(36526),u=a(10195),m=a(69584),p=a(12917),h=a(47833),x=a(43906),f=a.n(x);let g=new d.hs("inputAutocomplete"),y=()=>({decoration:null,completion:null}),v=(e,t)=>d.LN.atEnd(e).$anchor.pos===t.$anchor.pos,b=e=>{let{editor:t}=e;if(!v(t.state.doc,t.state.selection))return!1;let a=g.getState(t.state);return!!a.decoration&&(t.view.dispatch(t.state.tr.insertText(a.completion.content)),!0)},j=(e,t,a,s)=>{let n=e.getMeta(g);if(n&&n.prompt===s.doc.textContent&&(t.completion=n),!v(s.doc,s.selection)||!t.completion||t.completion.prompt!==s.doc.textContent)return t.decoration=null,t;let l=document.createElement("span");l.className="text-text-500",l.textContent=t.completion.content;let i=document.createElement("span");i.className="ml-1 px-1 border rounded-lg align-[1px] font-medium text-xs text-text-500",i.textContent="Tab";let r=s.selection.$head.pos,o=h.NZ.widget(r,l),d=h.NZ.widget(r,i);return t.decoration=h.zF.create(s.doc,[o,d]),t},w=c.YY.create({name:"inputAutocompletion",addOptions:()=>({fetchInputAutocompletion:e=>Promise.resolve("")}),addProseMirrorPlugins(){let e=f()(async(e,t)=>{try{let a=this.options.fetchInputAutocompletion,s=await a(t);s&&e.dispatch(e.state.tr.setMeta(g,{prompt:t,content:s}))}catch(e){}},300);return[new d.k_({key:g,state:{init:y,apply:j},props:{decorations(e){return this.getState(e).decoration}},view:t=>{let{textContent:a}=t.state.doc;return a.length>=3&&e(t,a),{update:(t,a)=>{var s;let{state:n}=t,{doc:l}=n;!a.doc.eq(l)&&(null==(s=g.getState(n).completion)?void 0:s.prompt)!==l.textContent&&l.textContent.length>=3&&e(t,l.textContent)}}}})]},addKeyboardShortcuts:()=>({Tab:b})});var M=a(3971);let _=e=>0===e.state.selection.$from.parentOffset,k=e=>e.state.selection.$from.marks().some(e=>"code"===e.type.name),A=e=>"heading"===e.state.selection.$from.parent.type.name,N=e=>{let t=e.state.selection.$from;return t.parentOffset===t.parent.nodeSize-2},C=e=>{let t=e.state.tr;t.setStoredMarks([]),t.insertText("​"),e.view.dispatch(t)},S=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&(C(e),!0),E=e=>!(e.state.selection.$from.before()>0)&&e.chain().insertContentAt(0,"<p></p>").run(),I=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&e.chain().insertContent("<p></p>").run(),T=c.YY.create({name:"CodeBlockKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return"codeBlock"===t.state.selection.$from.parent.type.name&&!!_(t)&&E(t)}})}),D=c.YY.create({name:"InlineCodeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!k(t)&&!!_(t)&&E(t)},ArrowDown:e=>{let{editor:t}=e;return!!k(t)&&!!N(t)&&I(t)},ArrowRight:e=>{let{editor:t}=e;return!!k(t)&&!!N(t)&&S(t)},ArrowLeft:e=>{let{editor:t}=e;return!!k(t)&&!!_(t)&&(e=>!(e.state.selection.$from.before()>0)&&(C(e),!0))(t)}})}),O=c.YY.create({name:"HeadingKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!A(t)&&!!_(t)&&E(t)},ArrowDown:e=>{let{editor:t}=e;return!!A(t)&&!!N(t)&&I(t)}})}),L=c.YY.create({name:"BoldKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!t.state.selection.$from.marks().some(e=>"bold"===e.type.name)&&!!N(t)&&S(t)}})}),R=c.YY.create({name:"ItalicKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!t.state.selection.$from.marks().some(e=>"italic"===e.type.name)&&!!N(t)&&S(t)}})}),P=c.YY.create({name:"StrikeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!t.state.selection.$from.marks().some(e=>"strike"===e.type.name)&&!!N(t)&&S(t)}})}),z=c.YY.create({name:"PTagShiftEnterCreateExtension",addKeyboardShortcuts:()=>({"Shift-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0},"Alt-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0}})}),F=c.YY.create({name:"pasteCodeAsPlainText",addProseMirrorPlugins:()=>[new d.k_({key:new d.hs("pasteCodeAsPlainText"),props:{handlePaste:(e,t,a)=>{let{schema:s}=e.state;if(!t.clipboardData||!t.clipboardData.types.includes("vscode-editor-data"))return!1;let n=t.clipboardData.getData("text/plain"),l=s.text(n);return e.dispatch(e.state.tr.replaceSelectionWith(l)),!0}}})]}),U=()=>(0,s.jsx)(u.VR,{className:"code-block",children:(0,s.jsx)("pre",{className:"my-4 block rounded-md bg-[#282c34] p-2 text-[0.875rem] text-[#abb2bf]",children:(0,s.jsx)(u.$p,{as:"code"})})});var G=a(72902),Y=a(10369);let B=(0,n.forwardRef)((e,t)=>{let{className:a,disabled:c,prompt:h,tipTapEditorState:x,setTipTapEditorState:f,placeholder:g,onSubmit:y,onReady:v,placement:b,fetchInputAutocompletion:j}=e,{editor:_}=(e=>{let{tipTapEditorState:t,setTipTapEditorState:a,onReady:s,placeholder:n,extraEditorAttributes:l={},fetchInputAutocompletion:d}=e,c=[m.A.configure({codeBlock:!1,blockquote:!1,hardBreak:!1,heading:!1,horizontalRule:!1}),r.A.extend({addNodeView:()=>(0,u.gu)(U)}).configure({lowlight:p.l}),L,T,O,D,R,P,F,z,o.A.configure({placeholder:n,emptyEditorClass:"is-editor-empty before:!text-text-500 before:whitespace-nowrap"}),w.configure({fetchInputAutocompletion:d})];return{editor:(0,u.hG)({editorProps:{attributes:{enterkeyhint:"enter",...l}},onCreate:()=>{null==s||s()},autofocus:!(0,i.Fr)()&&"end",extensions:c,content:t,onUpdate(e){let{editor:t}=e,s=t.isEmpty,n=t.getJSON();a((0,M.DV)(n)),s&&t.commands.focus("end")}})}})({tipTapEditorState:x,setTipTapEditorState:f,onReady:v,placeholder:g,fetchInputAutocompletion:j,extraEditorAttributes:{role:"textbox","aria-label":(0,Y.A)().formatMessage({defaultMessage:"Write your prompt to Claude",id:"Lxn7p6AQvE"}),"aria-multiline":"true","aria-required":"false","aria-invalid":"false"}}),[k,A]=(0,n.useState)(!1);(0,n.useImperativeHandle)(t,()=>({setContent(e){e!==h&&(null==_||_.commands.setContent(e,!1,{preserveWhitespace:"full"}))},setEditable(e){_.setOptions({editable:e})},focus(){null==_||_.commands.focus()},getPosition:()=>null==_?void 0:_.state.selection.$anchor,getEditor:()=>_,getIsAtEnd(){if(!_)return;let e=_.state.selection.$anchor.pos;return d.LN.atEnd(_.state.doc).$anchor.pos===e},scrollToEnd(){_&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{_.commands.setTextSelection(_.state.doc.content.size),_.commands.scrollIntoView();let e=_.view.dom.parentElement;e&&(e.scrollTop=e.scrollHeight)})})}}),[_,h]),(0,n.useEffect)(()=>{null==_||_.setOptions({editable:!c})},[_,c]),(0,n.useEffect)(()=>{if(null!==_&&""!==g){let e=_.extensionManager.extensions.filter(e=>"placeholder"===e.name)[0];e&&(e.options.placeholder=g,_.view.dispatch(_.state.tr))}},[_,g]);let N=(0,n.useCallback)(e=>{"Enter"===e.key&&y&&(k||e.shiftKey||e.altKey||e.nativeEvent.isComposing||(0,i.Fr)()&&!e.metaKey&&!e.ctrlKey||(e.preventDefault(),y(e)))},[y,k]);return(0,s.jsx)(l.Provider,{value:{setOverrideSubmit:A},children:(0,s.jsx)(u.$Z,{className:(0,G.A)("max-h-96 w-full overflow-y-auto font-large break-words transition-opacity duration-200","bottom"===b?"min-h-[1.5rem]":"min-h-[3rem]",!(null==_?void 0:_.isEditable)&&"opacity-60",a),editor:_,onKeyDownCapture:N})})});B.displayName="PromptInput"},91755:(e,t,a)=>{a.d(t,{R:()=>m,V:()=>u});var s=a(54568),n=a(43465),l=a(47592),i=a(39613),r=a(11583),o=a(5655),d=a(7620);let c=(0,d.createContext)({isExpanded:!1,setIsExpanded:()=>void 0,closeSidebarOnMobile:()=>void 0,isMobile:!1,setForceMobileLayout:()=>void 0});function u(){return(0,d.useContext)(c)}function m(e){let{children:t}=e,[a,u]=(0,n.j)(i.eT.SIDEBAR_PINNED,!1),[m,p]=(0,n.j)(i.eT.SIDEBAR_VISIBLE_ON_LOAD,!1),{width:h}=(0,r.l)(),[x,f]=d.useState(!1),g=x||(0===h?!m:h<1024),[y,v]=d.useState(m&&a);(0,o.M)("keydown",e=>{var t,a,s;let n=(0,l.cX)()?e.metaKey:e.ctrlKey;if((null==(t=e.key)?void 0:t.toLowerCase())==="."&&n&&(e.preventDefault(),v(e=>!e)),(null==(a=e.key)?void 0:a.toLowerCase())==="/"&&n&&(e.preventDefault(),v(e=>!e)),(null==(s=e.key)?void 0:s.toLowerCase())==="u"&&n){let t=document.getElementById("chat-input-file-upload-onpage")||document.getElementById("chat-input-file-upload-modal")||document.getElementById("chat-input-file-upload-bottom");t instanceof HTMLInputElement&&(e.preventDefault(),t.click())}});let b=(0,d.useMemo)(()=>({isExpanded:y,setIsExpanded:e=>{v(e),g||u(e)},closeSidebarOnMobile:()=>{g&&y&&v(!1)},isMobile:g,setForceMobileLayout:f}),[y,v,g,u,f]);return(0,d.useEffect)(()=>{g?(p(!1),v(!1)):(p(!0),v(a))},[g,p,v,a]),(0,s.jsx)(c.Provider,{value:b,children:t})}},93220:(e,t,a)=>{a.d(t,{z:()=>i});var s=a(7620),n=a(98649),l=a(26250);function i(e,t){let{dateAdded:a,priority:i,showAfterOthersDismiss:r}=t,o=(0,s.useContext)(l.L),{dismiss:d,isDismissed:c}=(0,n.W)();if(!o)throw Error("useNux must be used within a NuxProvider");let{registerNux:u,unregisterNux:m,currentlyShowing:p}=o;return(0,s.useEffect)(()=>{if(!c(e))return u(e,{dateAdded:a,priority:i,showAfterOthersDismiss:r}),()=>m(e)},[e,a,i,r,c,u,m]),{shouldShow:p===e&&!c(e),dismiss:()=>{d(e),m(e)}}}},94629:(e,t,a)=>{a.d(t,{$3:()=>K,ey:()=>R});var s=a(54568),n=a(96614),l=a(86545),i=a(64328),r=a(21266),o=a(63911),d=a(9398),c=a(68067),u=a(2e3),m=a(95617),p=a(16),h=a(66365),x=a(27541),f=a(7620),g=a(10369),y=a(35415),v=a(96547),b=a(79052),j=a(74326),w=a(50571),M=a(12142),_=a(10665),k=a(22167),A=a(35391),N=a(42605),C=a(4114),S=a(45271),E=a(48778),I=a(65016),T=a(35580),D=a(97208);let O="inputMenu",L=()=>({isDisabled:!0,tooltip:(0,g.A)().formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"}),isChecked:!1}),R=e=>{let{actions:t}=e,a=(0,g.A)(),l=(0,v.lu)(),r=(0,i.O9)(),d=(0,i.zc)(),c=(0,i.h0)(),u=(0,w.sb)(),m=(0,D.Ob)(),{conversation:h,model:f}=(0,N.o)(),y=(0,n.Z3)((null==h?void 0:h.id)||null),b=null!=f?f:y,j=(0,x.useRouter)(),M=P({actions:t,currentModel:b}),_=V(),k=Y({actions:t}),A=B({actions:t}),C=H({currentModel:b,conversation:h});if((0,D.gB)())return k;let S=[...A?[A]:[],...C?[C]:[]];M.length&&(S=S.concat([...S.length?[{key:"divider1",type:"divider",label:""}]:[],...M]));let E=l&&(r||d);return(_.length||E||u)&&(S=S.concat([..._,...u?[{key:"divider2",type:"divider",label:""},{key:"addIntegrations",type:"button",icon:(0,s.jsx)(p.c,{size:16}),label:a.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),tag:c?void 0:m?"upgrade":"pro",onClick:c||!m?t.openMcpDirectoryModal:()=>{window.location.href="/upgrade"}},{key:"manageIntegrations",type:"button",icon:(0,s.jsx)(o.wB,{size:16}),label:a.formatMessage({defaultMessage:"Manage connectors",id:"cqx+RdJnHp"}),isExternal:!0,onClick:()=>{j.push("/settings/connectors")}}]:E?[{key:"divider2",type:"divider",label:""},{key:"addIntegrations",type:"button",icon:(0,s.jsx)(p.c,{size:16}),label:a.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),isExternal:!0,onClick:()=>{j.push("/settings/connectors")}}]:[]])),S},P=e=>{let{actions:t,currentModel:a}=e,s=z({currentModel:a}),n=F({currentModel:a}),l=G({actions:t,currentModel:a}),i=U({currentModel:a});return[...s?[s]:[],...n?[n]:[],...l?[l]:[],...i?[i]:[]]},z=e=>{let{currentModel:t}=e,a=(0,g.A)(),{conversation:n}=(0,N.o)(),l=(0,i.h0)(),r=(0,D.Ob)(),d=(0,A.Eu)(t),c=(0,A.be)(),u=(0,A.WJ)(),m=(0,A.fy)(n),{toggleSearchTool:p}=(0,I.D$)(n),h=L(),x=q("web_search");if(!c&&!r)return null;let f=m&&d;return c||!r||l?{key:"webSearch",type:"switch",label:a.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,s.jsx)(o.qz,{size:16}),isChecked:f,onClick:()=>p("enabled_web_search",!f),tag:x,...!u?{isDisabled:!0,tooltip:a.formatMessage({defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"})}:!d?h:null}:{key:"webSearch",type:"switch",label:a.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,s.jsx)(o.qz,{size:16}),isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}}},F=e=>{let{currentModel:t}=e,a=(0,g.A)(),{conversation:n}=(0,N.o)(),r=(0,i.h0)(),o=(0,D.Ob)(),{toggleSearchTool:c,toggleConversationSetting:u}=(0,I.D$)(n),m=(0,b.K6)(),p=(0,l.Wq)()(t,"gsuite_tools"),h=(0,b.$f)(n),{isDriveAuthenticated:x,initDriveAuth:f}=(0,b.cI)({callerIdentifier:O,handleAuthSuccess:()=>{u("enabled_bananagrams",!0)}}),y=L(),v=q("drive_search");if(!m&&!o)return null;let j={key:"driveSearch",icon:(0,s.jsx)(d.ft,{size:16}),label:a.formatMessage({defaultMessage:"{drive} search",id:"nUykp097rV"},{drive:"Drive"})};if(!m&&o&&!r)return{...j,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!x)return{...j,type:"button",isExternal:!0,secondaryText:a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:f,...p?null:y};let w=x&&h;return{...j,type:"switch",isChecked:w,onClick:()=>{c("enabled_bananagrams",!w)},tag:v,...p?null:y}},U=e=>{let{currentModel:t}=e,a=(0,g.A)(),{conversation:n}=(0,N.o)(),i=(0,D.Ob)(),{toggleSearchTool:r,toggleConversationSetting:o}=(0,I.D$)(n),c=(0,k.Ys)(u.v8.GCAL),m=(0,l.Wq)()(t,"gsuite_tools"),p=(0,k.X0)(u.v8.GCAL,n),h=(0,k.vm)(),x=(0,k.dJ)(u.v8.GCAL),{isAuthenticated:f,startAuth:y}=(0,k.ob)(u.v8.GCAL,{callerIdentifier:O,handleAuthSuccess:()=>{o("enabled_foccacia",!0)}}),v=L(),b=q("calendar_search");if(h&&x&&f||h&&!x||!c&&!i)return null;let j=a.formatMessage({defaultMessage:"Calendar search",id:"b7aUhdL5nd"}),w=a.formatMessage({defaultMessage:"Google Calendar",id:"kjenxGoM59"}),M={key:"gcal",label:h?w:j,icon:(0,s.jsx)(d.HI,{size:16})};if(!c&&i)return{...M,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!f){let e=a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),t=a.formatMessage({defaultMessage:"Reconnect",id:"Eg11ZYmdyO"});return{...M,type:"button",isExternal:!0,secondaryText:h?t:e,onClick:()=>{y()},...h?{tooltip:a.formatMessage({defaultMessage:"Sign back into Google to use our improved connectors",id:"NHTRwY1ogC"})}:{},...m?null:v}}let _=f&&p;return{...M,type:"switch",isChecked:_,onClick:()=>{r("enabled_foccacia",!_)},tag:b,...m?null:v}},G=e=>{let{actions:t,currentModel:a}=e,n=(0,g.A)(),{conversation:r}=(0,N.o)(),o=(0,i.h0)(),c=(0,D.Ob)(),{toggleSearchTool:m,toggleConversationSetting:p}=(0,I.D$)(r),h=(0,k.Ys)(u.v8.GMAIL),x=(0,l.Wq)()(a,"gsuite_tools"),f=(0,k.X0)(u.v8.GMAIL,r),y=L(),v=q("gmail_search"),b=(0,k.vm)(),j=(0,k.dJ)(u.v8.GMAIL),{isAuthenticated:w,startAuth:M}=(0,k.ob)(u.v8.GMAIL,{callerIdentifier:O,handleAuthSuccess:()=>{p("enabled_sourdough",!0)}});if(b&&j&&w||b&&!j||!h&&!c)return null;let _=n.formatMessage({defaultMessage:"Gmail search",id:"v0qteoUCm+"}),A=n.formatMessage({defaultMessage:"Gmail",id:"2hslSeuDXe"}),C={key:"gmail",label:b?A:_,icon:(0,s.jsx)(d.kw,{size:16})};if(!h&&c&&!o)return{...C,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!w){let e=n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),a=n.formatMessage({defaultMessage:"Reconnect",id:"Eg11ZYmdyO"});return{...C,type:"button",isExternal:!0,secondaryText:b?a:e,onClick:()=>{b?M():t.openGmailAuthModal()},...b?{tooltip:n.formatMessage({defaultMessage:"Sign back into Google to use our improved connectors",id:"NHTRwY1ogC"})}:{},...x?null:y}}let S=w&&f;return{...C,type:"switch",isChecked:S,onClick:()=>{m("enabled_sourdough",!S)},tag:v,...x?null:y}},Y=e=>{let{actions:t}=e,a=(0,g.A)(),{personalizedStyle:n}=(0,N.o)(),{personalizedStyleOptions:l}=(0,C.p)();return[...l.map(e=>{let a=(null==n?void 0:n.key)===e.key;return{key:e.key,type:"option",label:"default"===e.type&&e.nameKey?(0,s.jsx)(r.X5,{id:e.nameKey}):e.name,icon:(0,s.jsx)(o.P_,{size:16}),onClick:()=>{a?t.onStyleChange("Default"):t.onStyleChange(e.key)},isChecked:a}}),{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,s.jsx)(o.OM,{size:16}),label:a.formatMessage({defaultMessage:"Create & edit styles",id:"cY+Fgc8HvE"}),onClick:t.openStyleModal,nonSearchable:!0}]},B=e=>{let{actions:t}=e,a=(0,g.A)(),n=(0,D.Hd)(),{personalizedStyle:l}=(0,N.o)(),i=Y({actions:t}),r=a.formatMessage({defaultMessage:"Use style",id:"f7VY0ldE+0"});return{key:m.xd.STYLES,type:"optionGroup",icon:(0,s.jsx)(o.P_,{size:16}),label:r,secondaryText:(null==l?void 0:l.isDefault)||null==l?void 0:l.name,children:[...n?[]:[{type:"back",key:"styles-back",label:r}],...i],indicatorActive:l&&"Default"!==l.key}},H=e=>{let t,{currentModel:a,conversation:n}=e,l=(0,g.A)(),r=(0,_.v)("paprika_mode"),d=(0,j.J)(),u=(0,j.j)()(a),{toggleConversationSetting:p}=(0,_.r)(),{value:x}=(0,c.fS)("model_selector_enabled"),{data:v}=(0,y.EY)(),b=(0,i.h0)(),w=(0,h.useLayer)("trials_freemium"),M=L(),k=(0,D.Ob)();(0,f.useEffect)(()=>{let e=!b,t=w.get("free_thinking",!1),a=e&&t&&(null==v?void 0:v.remaining)===0,s=!n||0===n.messagesSoFar;a&&r&&!s&&p("paprika_mode",null)},[null==v?void 0:v.remaining,b,w,r,p,n]);let A=w.get("free_thinking",!1),N=d&&(x||A&&!b);if(!d||!x&&!A&&!k)return null;let C=l.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),S=!b,E=w.get("free_thinking",!1),I=S&&E&&(null==v?void 0:v.remaining)===0,T=!I&&!!r;if(S&&E&&v&&void 0!==v.remaining&&v.resets_at){let e=new Date(1e3*v.resets_at),a=l.formatDate(e,{month:"short",day:"numeric"});t=l.formatMessage({defaultMessage:"{remaining} remaining until {date}",id:"httnsxXSeU"},{remaining:v.remaining,date:a})}let O={key:m.xd.EXTENDED_THINKING,type:"switch",label:C,icon:(0,s.jsx)(o.Sw,{size:16}),isChecked:T,indicatorActive:T,...t&&{subtitle:t},...I&&{isDisabled:!0,tag:"upgrade",rateLimitReached:!0,onClick:()=>{window.location.href="/upgrade"}}};return N||!k||b?u?{...O,...I?{}:{onClick:()=>{p("paprika_mode",r?null:"extended")},tooltip:l.formatMessage({defaultMessage:"Allow Claude to think out loud for longer for trickier questions and challenges.",id:"bbgQqH7Grg"}),tooltipImage:{src:"/images/feature-preview/extended-thinking.png",width:200,height:108}}}:{...O,...M}:{...O,isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}}},W=e=>{let{showConnectAction:t,mcpToolsSetting:a,toggleMcpToolEnabled:n,remoteOnly:l}=e,i=(0,g.A)(),r=(0,M.Q)();return(0,T.Uz)({isConnecting:!1,...l?{type:"remote"}:{},...t?{}:{isConnected:!0}}).map(e=>{let t={key:e.uuid,label:e.name,icon:(0,s.jsx)(S.z,{size:16,type:e.iconType,src:e.iconSrc,name:e.name})};if(!e.isConnected)return{...t,type:"button",isExternal:!0,secondaryText:i.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>r({uuid:e.uuid,url:e.url})};let l=e.tools.map(t=>{let l=t.enabledKey,i=!1!==a[l];return{key:l,type:"switch",label:t.displayName,icon:(0,s.jsx)(S.z,{size:16,type:e.iconType,src:e.iconSrc,name:e.name}),isChecked:i,onClick:()=>{n(l,!i,e.url)}}}),d=l.filter(e=>"switch"===e.type&&e.isChecked).length,c=d>0,u=e.tools.length,m=[];return l.length>1&&m.push({key:"select-all",type:"button",label:c?i.formatMessage({defaultMessage:"Disable all tools",id:"8A9N39nihk"}):i.formatMessage({defaultMessage:"Enable all tools",id:"x4/g36jIjW"}),onClick:()=>{n(e.tools.map(e=>e.enabledKey),!c,e.url)},skipCloseOnClick:!0,nonSearchable:!0},{key:"divider1",type:"divider",label:""}),m.push(...l),0===m.length&&m.push({key:"empty",type:"button",label:i.formatMessage({defaultMessage:"No tools available",id:"+XSkrzcF/0"}),icon:(0,s.jsx)(o.k0,{size:16}),onClick:()=>void 0,isDisabled:!0}),{...t,type:"toggleGroup",enabledCount:d,totalCount:u,children:m,isChecked:c,onClick:()=>{n(e.tools.map(e=>e.enabledKey),!c,e.url)}}})},V=()=>{var e;let t=null!=(e=(0,_.v)("enabled_mcp_tools"))?e:{},{toggleMcpToolEnabled:a}=(0,w.es)(),{isInBeam:s}=(0,E.d)();return W({showConnectAction:!!s,mcpToolsSetting:t,toggleMcpToolEnabled:a})},K=()=>{var e;let t=(0,T.Uz)({type:"remote"}),a=null!=(e=(0,_.v)("enabled_mcp_tools"))?e:{},[s,n]=(0,f.useState)(()=>{let e=new Set(t.map(e=>e.uuid));return Object.fromEntries(Object.entries(a).filter(t=>{let[a]=t,s=a.split(":")[0];return e.has(s)}))});return{menuOptions:W({showConnectAction:!1,mcpToolsSetting:s,toggleMcpToolEnabled:function(e,t){n(a=>({...a,...Array.isArray(e)?Object.fromEntries(e.map(e=>[e,t])):{[e]:t}}))},remoteOnly:!0}),getEnabledRemoteTools:()=>{let e=[];for(let a of t)for(let t of a.tools)!1!==s[t.enabledKey]&&e.push({tool_name:t.name,server_uuid:a.uuid});return e}}},q=e=>(0,h.useDynamicConfig)("claude_ai_beta_tools").get("beta_tools",[]).includes(e)?"beta":void 0},95839:(e,t,a)=>{a.d(t,{I:()=>s});let s="chat-input-menu-search-input"},97208:(e,t,a)=>{a.d(t,{Hd:()=>o,Ob:()=>d,gB:()=>r});var s=a(64328),n=a(66365),l=a(35391),i=a(35580);let r=()=>{let e=(0,s.h0)(),t=(0,l.be)(),a=(0,i.Uz)().length>0;return!e&&!t&&a},o=()=>{let e=(0,s.h0)(),t=(0,i.Uz)().length>0;return e||t},d=()=>{let e=(0,s.h0)(),t=(0,n.useLayer)("trials_freemium");return!e&&t.get("show_upgrade_buttons",!1)}},97595:(e,t,a)=>{a.d(t,{c:()=>s});var s=function(e){return e[e.HIGH=30]="HIGH",e[e.MEDIUM=20]="MEDIUM",e[e.LOW=10]="LOW",e[e.NONE=0]="NONE",e}({})}}]);