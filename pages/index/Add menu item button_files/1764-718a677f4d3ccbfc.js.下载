try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="dcd87aa7-76f0-467b-8868-dbee93ccc7a5",e._sentryDebugIdIdentifier="sentry-dbid-dcd87aa7-76f0-467b-8868-dbee93ccc7a5")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1764,3812],{1720:(e,t,n)=>{n.d(t,{Loading:()=>l});var a=n(54568),r=n(72902),s=n(7620),i=n(59666);let l=(0,s.memo)(function(e){let{size:t="md",fullscreen:n=!1,inheritColor:l,delay:o=0}=e,[c,d]=(0,s.useState)(o>0);return(0,s.useEffect)(()=>{if(!o)return;let e=setTimeout(()=>d(!1),o);return()=>clearTimeout(e)},[o]),(0,a.jsx)("div",{className:(0,r.A)(n?"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2":"m-auto"),children:(0,a.jsx)("div",{className:(0,r.A)("sm"===t&&"h-4 w-4 border-2","md"===t&&"h-20 w-20 border-8",l?"border-current":"border-border-200","text-secondary inline-block animate-spin rounded-full border-solid border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",c&&"hidden"),role:"status",children:(0,a.jsx)("span",{className:"sr-only",children:(0,a.jsx)(i.A,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})})})},3217:(e,t,n)=>{n.d(t,{u:()=>h});var a=n(54568),r=n(64328),s=n(23812),i=n(79155),l=n(3075),o=n(13910),c=n(2e3),d=n(85524),u=n(7620),m=n(10369),f=n(59666),p=n(22167),g=n(20746);function h(e){let{type:t,onClose:n}=e,i=(0,r.mV)(),o=(0,m.A)(),{mutate:d,isPending:h}=(0,p.xc)({onSuccess:n}),[x,b]=(0,u.useState)(!1),y=(0,g.xI)(t);return(0,a.jsxs)(l.aF,{isOpen:!0,onClose:n,title:i?o.formatMessage({defaultMessage:"Disconnect {serverName} for your team?",id:"QktyTo9HSH"},{serverName:y}):o.formatMessage({defaultMessage:"Disconnect {serverName}?",id:"qlhEu4xmhz"},{serverName:y}),modalSize:"lg",children:[(0,a.jsx)("p",{className:"mt-4 mb-6 text-text-200",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{defaultMessage:"This will disconnect {serverName} for everyone on your team.",id:"W/2zE+LA7Z",values:{serverName:y}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(f.A,{defaultMessage:"They’ll be able to continue previous chats referencing {serverName} content, but Claude won’t be able to access new content or perform new tasks.",id:"febCGTUpcY",values:{serverName:y}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{defaultMessage:"You can still continue previous chats that reference {serverName} content.",id:"xonrKBdErN",values:{serverName:y}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(f.A,{defaultMessage:"However, Claude won’t be able to access new content or perform new tasks.",id:"GXIZPZXIvC"})]})}),t===c.v8.GITHUB&&(0,a.jsx)(v,{shouldDeleteOnDisable:x,setShouldDeleteOnDisable:b}),(0,a.jsxs)(l.vW,{children:[(0,a.jsx)(s.$,{onClick:n,variant:"secondary",children:(0,a.jsx)(f.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(s.$,{loading:h,onClick:()=>{d({type:t,enabled:!1,should_delete_on_disable:x}),n()},variant:"danger",children:x?(0,a.jsx)(f.A,{defaultMessage:"Disconnect and delete cached files",id:"cpicqQfn34"}):(0,a.jsx)(f.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})})]})]})}function v(e){let{shouldDeleteOnDisable:t,setShouldDeleteOnDisable:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,a.jsx)(i.f,{checkState:t?"checked":"unchecked",onClick:e=>{let{didCheck:t}=e;return n(t)},label:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-text-200",children:(0,a.jsx)(f.A,{defaultMessage:"Permanently delete cached GitHub files",id:"QWSlg2jyOj"})}),(0,a.jsx)(o.Tooltip,{tooltipContent:(0,a.jsx)(f.A,{defaultMessage:"We will never delete any files from GitHub, only files cached by claude.ai",id:"V7mFrvJBWC"}),children:(0,a.jsx)(d.R,{className:"text-text-400"})})]})})}),t&&(0,a.jsx)("div",{className:"flex items-start align-top min-h-[5rem] gap-2 mb-10 ml-10 text-danger-000",children:(0,a.jsxs)("ul",{className:"text-sm list-disc",children:[(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"File deletion will begin a few minutes after submission.",id:"09chittDG9"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"All files cached from GitHub will be permanently deleted from claude.ai.",id:"F1B0dvW0IP"})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.A,{defaultMessage:"An audit log will be written when deletion has completed.",id:"aNLDY0cpk9"})})]})})]})}},5924:(e,t,n)=>{n.d(t,{Qp:()=>u,eF:()=>d,w5:()=>c});var a=n(1613),r=n(64328),s=n(68067),i=n(65315),l=n(4869),o=n(27541);let c=()=>(0,s.fS)("fiddlehead").value,d=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=c(),s=(0,i.wc)(),{data:l,isFetched:d}=(0,a.Sk)("/api/oauth/organizations/".concat(t,"/oauth_tokens"),{enabled:!!(t&&n),staleTime:3e5}),u=(0,o.useSearchParams)().get("debug_fiddlehead_auth_override"),m=s[i.me],f=m&&(null==l?void 0:l.some(e=>e.application_name===m));return{isAuthenticated:null!==u?"1"===u:f,isFetched:d,initAuth:()=>{window.open(s[i.vf],"_blank")}}},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,s=c(),i=(0,l.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/fiddlehead/disconnect_and_delete_all"),"POST",{enabled:!!(t&&s),...e,onSuccess:function(){for(var t,a=arguments.length,r=Array(a),s=0;s<a;s++)r[s]=arguments[s];i.invalidateQueries({queryKey:["/api/oauth/organizations/".concat(n,"/oauth_tokens")]}),null==(t=e.onSuccess)||t.call(e,...r)}})}},7133:(e,t,n)=>{n.d(t,{S:()=>c});var a=n(54568),r=n(23812),s=n(3075),i=n(7620),l=n(59666),o=n(84543);function c(e){var t;let{platform:n,onClose:c,onSubmit:d,loading:u}=e,[m,f]=(0,i.useState)(n.issuer),[p,g]=(0,i.useState)(n.client_id),[h,v]=(0,i.useState)((null==(t=n.deployment_ids)?void 0:t[0])||""),x=!m.trim()||!p.trim()||!h.trim();return(0,a.jsx)(s.aF,{isOpen:!0,onClose:c,modalSize:"xl",title:(0,a.jsx)("div",{className:"flex gap-2 items-center",children:(0,a.jsx)(l.A,{defaultMessage:"Edit Canvas Instance",id:"aBsNZWVKN+"})}),subtitle:(0,a.jsx)(l.A,{defaultMessage:"Update your Canvas LMS instance configuration",id:"FqSEGC5V7F"}),children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x||d(n.id,m.trim().replace(/\/$/,""),p.trim(),h.trim())},className:"flex flex-col",children:[(0,a.jsx)(o.E,{domain:m,setDomain:f,clientId:p,setClientId:g,deploymentId:h,setDeploymentId:v}),(0,a.jsxs)(s.vW,{children:[(0,a.jsx)(r.$,{type:"submit",loading:u,disabled:x,children:(0,a.jsx)(l.A,{defaultMessage:"Save Changes",id:"3VI9mt1zm0"})}),(0,a.jsx)(r.$,{variant:"secondary",onClick:c,children:(0,a.jsx)(l.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})})}},13910:(e,t,n)=>{n.d(t,{Tooltip:()=>g});var a=n(2348),r=n(54568),s=n(37541),i=n(47592),l=n(7620),o=n(72902),c=n(61295),d=n(30563);function u(){let e=(0,a._)(["\n  px-2\n  py-1\n  text-xs\n  font-normal\n  font-ui\n  leading-tight\n  rounded-md\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return u=function(){return e},e}function m(){let e=(0,a._)(["\n  max-w-[337px]\n  z-tooltip\n  [*:disabled_&]:hidden\n"]);return m=function(){return e},e}function f(){let e=(0,a._)(["\n  p-1\n  font-small-bold\n  rounded-lg\n  shadow-md\n  text-white\n  bg-black/80\n  backdrop-blur\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return f=function(){return e},e}function p(){let e=(0,a._)(["\n  p-1\n  font-base\n  border-border-300\n  border-0.5\n  rounded-lg\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  text-text-100\n  bg-bg-100\n  break-words\n  z-tooltip\n  max-w-[13rem]\n  [*:disabled_&]:hidden\n"]);return p=function(){return e},e}function g(e){let{children:t,tooltipContent:n,contentStyle:a="default",side:s="top",sideOffset:c,align:u,className:m,delayDuration:f=200,keyboardShortcut:p,...g}=e,h=x[a],v=function(e){let t=(0,i.vm)();return(0,l.useMemo)(()=>{if(!e)return"";let n=e.toLowerCase().split("+").map(e=>e.trim()),a=[],r=[];n.forEach(e=>{["cmd","command","meta","ctrl","control","alt","option","shift"].includes(e)?a.push(e):r.push(e)});let s=["ctrl","control","alt","option","shift","cmd","command","meta"],i=[...a.sort((e,t)=>s.indexOf(e)-s.indexOf(t)).map(e=>t?({ctrl:"⌃",control:"⌃",alt:"⌥",option:"⌥",shift:"⇧",cmd:"⌘",command:"⌘",meta:"⌘"})[e]:({ctrl:"Ctrl",control:"Ctrl",alt:"Alt",option:"Alt",shift:"⇧",cmd:"Ctrl",command:"Ctrl",meta:"Ctrl"})[e]),...r.map(e=>{if(t){if("space"===e)return"␣";if("enter"===e||"return"===e)return"⏎";if("delete"===e||"backspace"===e)return"⌫";if("escape"===e||"esc"===e)return"Esc";if("tab"===e)return"⇥";if("up"===e)return"↑";if("down"===e)return"↓";if("left"===e)return"←";if("right"===e)return"→"}else{if("space"===e)return"Space";if("enter"===e||"return"===e)return"Enter";if("delete"===e||"backspace"===e)return"Backspace";if("escape"===e||"esc"===e)return"Esc";if("tab"===e)return"Tab";if("up"===e)return"Up";if("down"===e)return"Down";if("left"===e)return"Left";if("right"===e)return"Right"}return e.match(/^f\d+$/)||1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)})];return t?i.join(""):i.join("+")},[e,t])}(p||"");return(0,r.jsx)(d.Kq,{delayDuration:f,children:(0,r.jsxs)(d.bL,{...g,children:[(0,r.jsx)(d.l9,{asChild:!0,children:t}),(0,r.jsx)(d.ZL,{children:(0,r.jsx)("span",{children:(0,r.jsxs)(h,{className:(0,o.A)(m,!n&&"hidden"),sideOffset:null!=c?c:5,side:s,align:u,children:[n,p&&(0,r.jsx)("span",{className:"ml-1.5 opacity-70",children:v})]})})})]})})}let h=(0,s.J)(d.UC)(u()),v=(0,s.J)(d.UC)(m()),x={default:h,citation:e=>{let{children:t,...n}=e;return(0,r.jsx)(v,{...n,children:(0,r.jsx)(c.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"p-1 font-base text-text-200 bg-bg-100 break-words border-0.5 border-border-300/25 max-h-[300px] shadow-diffused shadow-[hsl(var(--always-black)/4%)] rounded-lg overflow-y-auto",children:t})})},inputMenu:(0,s.J)(d.UC)(f()),sampleImage:(0,s.J)(d.UC)(p())}},17421:(e,t,n)=>{n.d(t,{$D:()=>g,I5:()=>h,QJ:()=>p,ct:()=>A,eG:()=>y,gn:()=>v,iB:()=>f,oz:()=>x});var a=n(1613),r=n(64328),s=n(80688),i=n(68067),l=n(8019),o=n(65738),c=n(4869),d=n(7620),u=n(24407),m=n(74172);function f(){let{value:e}=(0,i.fS)("bad_moon_rising"),t="0"===new URLSearchParams(window.location.search).get("m");return e&&!t}function p(){return(0,i.fS)("yukon_gold").value}let g=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid;return(0,a.Sk)("/v1/sessions/organizations/".concat(i,"/sessions"),{queryKey:[s.Rv,{orgUuid:i}],enabled:!!n&&e,staleTime:3e4,refetchInterval:t,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function h(e,t){return{uuid:(0,l.b)(),session_id:t,type:"user",parent_tool_use_id:null,message:{role:"user",content:e}}}let v=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid;return(0,a.Sk)("/v1/sessions/organizations/".concat(n,"/sessions/").concat(e),{queryKey:[s.Ex,{orgUuid:n,sessionId:e}],enabled:!!t,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function x(){let e=b(),t=(0,i.T9)("bad_moon_rising_config","environment_id","",u.z.string()),n=(0,i.T9)("bad_moon_rising_prompt","main",void 0,u.z.string().optional());return(0,d.useCallback)(a=>{let{initialMessage:r,title:s,gitRepoUrl:i,gitBranch:l,overrideEnvironmentId:o}=a,c=[];r&&c.push({type:"event",data:r});let d=[],u=[];return i&&l&&(d.push({type:"git_repository",url:i}),u.push({type:"git_repository",git_info:{type:"github",repo:i.split("github.com/")[1],branches:[l]}})),e.mutateAsync({title:s,events:c,environment_id:o||t,session_context:{sources:d,outcomes:u,model:"claude-opus-4-1-20250805",custom_system_prompt:n}})},[e,t,n])}let b=()=>{let{activeOrganization:e}=(0,r.YL)(),t=(0,c.useQueryClient)(),n=null==e?void 0:e.uuid;return(0,a.L2)("/v1/sessions/organizations/".concat(n,"/sessions"),"POST",{onSuccess:()=>{t.invalidateQueries({queryKey:[s.Rv,{orgUuid:n}]})},meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};function y(){let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/dust/generate_title_and_branch"),"POST")}let j=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="/v1/sessions/ws/organizations/".concat(e,"/sessions/").concat(t,"/subscribe");n.replay&&(a+="?replay=true");let r="https:"===window.location.protocol?"wss:":"ws:";return"".concat(r,"//").concat(window.location.host).concat(a)},w=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid;return(0,a.Sk)("/v1/sessions/organizations/".concat(i,"/sessions/").concat(e,"/events"),{queryKey:[s.ri,{orgUuid:i,sessionId:e}],enabled:!!n&&t,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01"}})};class _{[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){return this.queue.length>0?Promise.resolve({done:!1,value:this.queue.shift()}):this.isDone?Promise.resolve({done:!0,value:void 0}):this.hasError?Promise.reject(this.hasError):new Promise((e,t)=>{this.readResolve=e,this.readReject=t})}enqueue(e){if(this.readResolve){let t=this.readResolve;this.readResolve=void 0,this.readReject=void 0,t({done:!1,value:e})}else this.queue.push(e)}done(){if(this.isDone=!0,this.readResolve){let e=this.readResolve;this.readResolve=void 0,this.readReject=void 0,e({done:!0,value:void 0})}}error(e){if(this.hasError=e,this.readReject){let t=this.readReject;this.readResolve=void 0,this.readReject=void 0,t(e)}}return(){return this.isDone=!0,this.returned&&this.returned(),Promise.resolve({done:!0,value:void 0})}constructor(e){this.returned=e,this.queue=[],this.isDone=!1,this.started=!1}}function A(e,t){let{data:n,isLoading:a,refetch:s}=w(e,!1),{inputStream:i,streamedMessages:c}=function(e,t,n){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],s=!(arguments.length>4)||void 0===arguments[4]||arguments[4],i=(0,d.useRef)(null),l=(0,d.useRef)(null),c=(0,d.useRef)(null),[u,m]=(0,d.useState)([]);(0,d.useEffect)(()=>{m([])},[e]);let f=(0,d.useRef)(null);(0,d.useEffect)(()=>{f.current=t},[t]);let{activeOrganization:p}=(0,r.YL)(),g=null==p?void 0:p.uuid,h=(0,d.useCallback)(()=>{l.current&&(l.current.abort(),l.current=null),c.current&&(c.current.done(),c.current=null),i.current=null},[]),v=(0,d.useCallback)(()=>{if(!a||!g||!e)return;h(),l.current=new AbortController,c.current=new _;let t=(0,o.P)({prompt:c.current,websocket:{url:j(g,e)},abortController:l.current});(async()=>{try{for await(let n of t){var e=f.current;if("result"===n.type&&"granted"===Notification.permission){let t=new Notification(e?"Claude updated ".concat(e):"Update from Claude",{body:"Your task is ready for review",icon:"/favicon.svg",badge:"/favicon.svg"});t.onclick=()=>{window.focus(),t.close()}}m(e=>[...e,n])}}catch(e){s&&e instanceof Error&&"WebSocket connection aborted by user"!==e.message&&v()}})(),n(),i.current=t},[a,g,e,h,n,f,s]);return(0,d.useEffect)(()=>{v()},[v]),(0,d.useEffect)(()=>()=>h(),[h]),{inputStream:c.current,streamedMessages:u}}(e,t,s),u=(0,m.T)(e),f=(0,m.j)(),p=(0,d.useMemo)(()=>a||!n?[]:n.data,[a,n]),g=(0,d.useMemo)(()=>{let e=new Set;for(let t of p)e.add(t.uuid);let t=[...p];for(let n of c)n.uuid&&!e.has(n.uuid)&&t.push(n);return t},[p,c]),h=(0,d.useCallback)(t=>{let n={uuid:(0,l.b)(),type:"user",session_id:e,parent_tool_use_id:null,message:{role:"user",content:t}};f(e,n),null==i||i.enqueue(n)},[i,f,e]),v=(0,d.useMemo)(()=>{if(0===u.length)return[];let e=new Set;for(let t of g)e.add(t.uuid);return u.filter(t=>!e.has(t.uuid))},[u,g]);return{loadingInitialMessages:a,sendMessage:h,messages:g,pendingMessages:v}}},18050:(e,t,n)=>{n.d(t,{AI:()=>c,I5:()=>d,n0:()=>o,qp:()=>u,so:()=>m});var a=n(1613),r=n(64328),s=n(80688);n(2e3);var i=n(4869);n(7620);var l=n(22167);let o=e=>{let{uri:t}=e,{data:n,isLoading:i}=(e=>{let{documentId:t}=e,{account:n,activeOrganization:i}=(0,r.YL)(),l=null==n?void 0:n.uuid,o=null==i?void 0:i.uuid,d=c();return(0,a.Sk)("/api/organizations/".concat(o,"/sync/mcp/outline/document/").concat(t),{queryKey:[s.hq,{accountUUID:l,orgUuid:o,documentId:t}],enabled:d})})({documentId:t});return{title:null==n?void 0:n.title,isLoading:i}},c=()=>{let{data:e}=(0,l.LN)();return!1},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid,l=c(),{data:o,refetch:d}=(0,a.Sk)("/api/organizations/".concat(i,"/sync/mcp/outline/auth"),{queryKey:[s.iP,{accountUUID:null==t?void 0:t.uuid,orgUuid:i}],enabled:!!(n&&l),staleTime:5e3}),{mutate:u,isPending:m}=(0,a.L2)("/api/organizations/".concat(i,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(n&&l),...e,onSuccess:function(){for(var t,n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];null==(t=e.onSuccess)||t.call(e,...a)}});return{isOutlineAuthenticated:!!(null==o?void 0:o.is_authenticated),refetch:d,initOutlineAuth:u,isLoadingOutlineAuthInit:m}},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,r.YL)(),l=null==t?void 0:t.uuid,o=null==n?void 0:n.uuid,d=c(),u=(0,i.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(o,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(n&&d),...e,onSuccess:function(){for(var t,n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];u.invalidateQueries({queryKey:[s.iP,{accountUUID:l,orgUuid:o}]}),null==(t=e.onSuccess)||t.call(e,...a)}})},m=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/connectors?redirect_url=".concat(e,"&open_outline_auth=true")}},20746:(e,t,n)=>{n.d(t,{ak:()=>l,cO:()=>s,lX:()=>o,xI:()=>i});var a=n(2e3),r=n(65315);let s="settings",i=e=>a.sb[e]||e,l=()=>{let e=(0,r.wc)();return t=>t===a.v8.FIDDLEHEAD&&e[r.Wj]?e[r.Wj]:t===a.v8.CUTTLEFISH&&e[r.in]?e[r.in]:a.sb[t]||t};function o(e,t){var n;return(null==(n=e.server)?void 0:n.type)==="remote"&&t(e.server)}},22271:(e,t,n)=>{n.d(t,{P:()=>h});var a=n(54568),r=n(64328),s=n(84284),i=n(23812),l=n(87483),o=n(13910),c=n(68067),d=n(17560),u=n(785),m=n(72902),f=n(59666),p=n(50571),g=n(10665);function h(e){var t,n;let{tool:h,server:v,children:x}=e,{account:b}=(0,r.YL)(),y=null!=(n=null==b||null==(t=b.settings)?void 0:t.enabled_mcp_tools)?n:{},j=(0,g.v)("enabled_mcp_tools")||{},{value:w}=(0,c.fS)("claude_ai_sticky_project_settings");w&&(y=j);let{toggleMcpToolEnabled:_,toggleMcpToolAlwaysApproved:A}=(0,p.es)(),{getApprovalSetting:C}=(0,p.BN)(),S=C(v.name,h),N="never"===S,M="always"===S,k=h.enabledKey,L=(e,t,n)=>(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[t,(0,a.jsx)("p",{className:"text-sm text-text-400",children:n})]}),(0,a.jsx)(d.J,{size:16,className:(0,m.A)("shrink-0",e?"opacity-1":"opacity-0")})]}),z=(0,a.jsx)(i.$,{variant:"outline",disabled:!1===y[k]||M,append:(0,a.jsx)(u.a,{size:16}),className:"!min-w-[200px] flex justify-between items-center",children:"never"===S?(0,a.jsx)(f.A,{defaultMessage:"Allow unsupervised",id:"R3Brpp1rTt"}):(0,a.jsx)(f.A,{defaultMessage:"Always ask permission",id:"vJAsn99Znq"})});return(0,a.jsxs)("div",{className:"flex flex-row gap-4 flex-shrink-0",children:[(0,a.jsx)("label",{children:(0,a.jsx)(s.j,{checked:!1!==y[k],onChange:e=>_(k,e.target.checked,v.url)})}),(0,a.jsx)("div",{className:"flex flex-grow",children:x}),(0,a.jsxs)(l.ms,{unstyledTrigger:!0,align:"start",trigger:M?(0,a.jsx)(o.Tooltip,{side:"top",tooltipContent:(0,a.jsx)(f.A,{defaultMessage:"Setting manged by your organization",id:"+y38sDfyun"}),children:(0,a.jsx)("div",{children:z})}):z,children:[(0,a.jsx)(l.tJ,{onClick:()=>{A(h.alwaysApprovedKey,!1)},children:L(!N,(0,a.jsx)(f.A,{defaultMessage:"Always ask permission",id:"vJAsn99Znq"}),(0,a.jsx)(f.A,{defaultMessage:"Your approval is required every time",id:"Ne5BQmk7c1"}))}),(0,a.jsx)(l.tJ,{onClick:()=>{A(h.alwaysApprovedKey,!0)},children:L(N,(0,a.jsx)(f.A,{defaultMessage:"Allow unsupervised",id:"R3Brpp1rTt"}),(0,a.jsx)(f.A,{defaultMessage:"Your approval is not required",id:"9AbpSd6OJA"}))})]})]})}},23812:(e,t,n)=>{n.d(t,{$:()=>f});var a=n(54568),r=n(1720),s=n(13910),i=n(54616),l=n(72902),o=n(19664),c=n.n(o),d=n(7620);let u="\n    text-text-000\n    font-base-bold\n    border-0.5\n    border-border-200\n    relative\n    overflow-hidden\n    transition\n    duration-100\n    hover:border-border-300/0\n    bg-bg-300/0\n    hover:bg-bg-400\n    backface-hidden",m=(0,i.F)("inline-flex\n  items-center\n  justify-center\n  relative\n  shrink-0\n  can-focus\n  select-none\n  disabled:pointer-events-none\n  disabled:opacity-50\n  disabled:shadow-none\n  disabled:drop-shadow-none",{variants:{variant:{primary:"bg-text-000\n        text-bg-000\n        font-base-bold\n        relative\n        overflow-hidden\n        transition-transform\n        will-change-transform\n        ease-[cubic-bezier(0.165,0.85,0.45,1)]\n        duration-150\n        hover:scale-y-[1.015]\n        hover:scale-x-[1.005]\n        backface-hidden\n        after:absolute\n        after:inset-0\n        after:bg-[radial-gradient(at_bottom,hsla(var(--bg-000)/20%),hsla(var(--bg-000)/0%))]\n        after:opacity-0\n        after:transition\n        after:duration-200\n        after:translate-y-2\n        hover:after:opacity-100\n        hover:after:translate-y-0\n        focus:!outline-text-000/75",flat:"bg-accent-main-000\n          text-oncolor-100\n          font-base-bold\n          transition-colors\n          hover:bg-accent-main-200\n          focus:!outline-accent-main-100/75",secondary:u,outline:u,ghost:"text-text-300\n          border-transparent\n          transition\n          font-base\n          duration-300\n          ease-[cubic-bezier(0.165,0.85,0.45,1)]\n          hover:bg-bg-300\n          aria-checked:bg-bg-400\n          aria-expanded:bg-bg-400\n          hover:text-text-100\n          aria-pressed:text-text-100\n          aria-checked:text-text-100\n          aria-expanded:text-text-100",danger:"bg-danger-200\n          text-oncolor-100\n          font-base-bold\n          transition\n          hover:scale-y-[1.015]\n          hover:scale-x-[1.005]\n          hover:opacity-95\n          focus:!outline-danger-100/50",unstyled:""},size:{default:"h-9 px-4 py-2 rounded-lg min-w-[5rem] active:scale-[0.985] whitespace-nowrap",sm:"h-8 rounded-md px-3 min-w-[4rem] active:scale-[0.985] whitespace-nowrap !text-xs",lg:"h-11 rounded-[0.6rem] px-5 min-w-[6rem] active:scale-[0.985] whitespace-nowrap !text-base",icon:"h-9 w-9 rounded-md active:scale-95 shrink-0",icon_xs:"h-6 w-6 rounded-md active:scale-95",icon_sm:"h-8 w-8 rounded-md active:scale-95",icon_lg:"h-11 w-11 rounded-[0.6rem] active:scale-95",inline:"px-0.5 rounded-[0.25rem]",unset:""},option:{rounded:"!rounded-full",prepend:"",append:""},state:{active:""}},compoundVariants:[{size:"default",option:"prepend",class:"pl-2 pr-3 gap-1"},{size:"lg",option:"prepend",class:"pl-2.5 pr-3.5 gap-1"},{size:"sm",option:"prepend",class:" pl-2 pr-2.5 gap-1"},{size:"default",option:"append",class:"pl-3 pr-2 gap-1"},{size:"lg",option:"append",class:"pl-3.5 pr-2.5 gap-1"},{size:"sm",option:"append",class:"pl-2.5 pr-2 gap-1"},{variant:"ghost",state:"active",class:"!bg-bg-400"}],defaultVariants:{variant:"primary",size:"default"}}),f=(0,d.forwardRef)((e,t)=>{let{className:n,variant:i,size:o,option:d,loading:u,href:f,onLinkClick:p,target:g,prepend:h,append:v,state:x,disabled:b,children:y,type:j="button",tooltip:w,tooltipSide:_="bottom",tooltipDelay:A,tooltipDisabled:C,tooltipHoverable:S=!1,...N}=e;h&&(d="prepend"),v&&(d="append");let M=(0,l.A)(m({variant:i,size:o,option:d,state:x,className:n}),u&&"text-transparent ![text-shadow:_none]"),k=(0,a.jsxs)(a.Fragment,{children:[u&&(0,a.jsx)("div",{className:(0,l.A)("absolute inset-0 flex items-center justify-center",i&&"flat"!==i&&"danger"!==i?"secondary"===i?"text-text-400":"text-bg-300":"text-bg-000"),children:(0,a.jsx)(r.Loading,{size:"sm",inheritColor:!0,delay:0})}),h,y,v]}),L=f?(0,a.jsx)(c(),{href:f,target:g||"_self",className:M,"aria-label":N["aria-label"],onClick:p,children:k}):(0,a.jsx)("button",{className:M,ref:t,disabled:b||u,type:j,...N,children:k});return w?(0,a.jsx)(s.Tooltip,{tooltipContent:w,side:_,delayDuration:A,disableHoverableContent:!S,children:(0,a.jsx)("div",{className:"w-fit",children:L})}):L});f.displayName="Button"},26819:(e,t,n)=>{n.d(t,{E:()=>s});var a=n(54568),r=n(72902);let s=e=>{let{color:t="default",size:n="default",children:s,className:i,uppercase:l}=e;return(0,a.jsx)("div",{className:(0,r.$)("inline-flex items-center align-middle leading-none flex-shrink-0","default"===t&&"bg-gradient-to-bl  from-bg-500/30  to-bg-500/70 text-text-300","flat"===t&&"bg-bg-500/40 text-text-200","secondary"===t&&"bg-accent-secondary-900/40 text-accent-secondary-200","pro"===t&&"bg-gradient-to-bl  from-accent-pro-200  to-accent-pro-100  text-oncolor-100","main"===t&&"bg-gradient-to-bl  from-accent-main-200/70  to-accent-main-100  text-oncolor-100","danger"===t&&"bg-danger-900 text-danger-200","default"===n&&"h-5 px-1.5 rounded-md text-[0.625rem]","sm"===n&&"h-4 px-1 rounded text-[0.625rem]","lg"===n&&"h-6 px-2 rounded-lg text-xs",l&&"uppercase",i),children:s})}},36016:(e,t,n)=>{n.d(t,{tn:()=>w,nB:()=>h,rW:()=>v,Cq:()=>x,JR:()=>j,b4:()=>b,yL:()=>y});var a=n(1613),r=n(64328),s=n(80688),i=n(2e3),l=n(28044),o=n(4869),c=n(27541),d=n(7620),u=n(17421),m=n(3111),f=n(22167),p=n(40459);let g="github_success",h=function(){var e;let{callerIdentifier:t,toggleGithubModalOpen:n,fetchImmediately:i=!1,pathname:o,queryString:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:p}=(0,r.YL)(),h=null==p?void 0:p.uuid,v=x(),[b,y]=(0,d.useState)(i),j=(e=>{let{shouldFetch:t=!1}=e,{activeOrganization:n}=(0,r.YL)(),i=null==n?void 0:n.uuid,l=x();return(0,a.Sk)("/api/organizations/".concat(i,"/sync/github/auth"),{queryKey:[s.Hv,{orgUuid:i}],enabled:!!(t&&n&&l)})})({shouldFetch:b}),w=(0,d.useCallback)(async()=>{var e,t;return b?null==(t=j.data)?void 0:t.is_authenticated:(y(!0),null==(e=(await j.refetch()).data)?void 0:e.is_authenticated)},[j,b]),{mutate:_}=(0,a.L2)("/api/organizations/".concat(h,"/sync/github/auth/start"),"POST",{enabled:!!(p&&v),onSuccess:e=>{if(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return!1;try{if(!e.startsWith("http://")&&!e.startsWith("https://"))return!1;let n=new URL(e);return"https:"===n.protocol&&t.some(e=>n.hostname===e||n.hostname.endsWith(".".concat(e)))}catch(e){return!1}}(e.redirect_url,["github.com"]))window.location.href=e.redirect_url;else throw Error("Invalid redirect URL received from auth endpoint")}}),A="".concat(g,"=").concat(t).concat(u?"&".concat(u):"");(0,f.FZ)({callerIdentifier:t,successParam:g,handleOpen:()=>{null==n||n(!0)}});let C=(0,c.useSearchParams)(),S=(0,l.V)(),N=(0,d.useRef)(!1),M=(0,c.usePathname)(),k=(0,m.d)({pathname:o||M,searchParams:C,queryString:A,isClaudeApp:S});return{checkIsGithubAuthenticated:w,initGithubAuth:()=>{if(v){if(S)return void window.open("/settings/connectors?open_in_browser=1&auth_start=github&origin=".concat(k));N.current||(N.current=!0,_({pre_auth_state:{origin:k}}))}},isGithubAuthenticated:null==(e=j.data)?void 0:e.is_authenticated,isLoading:j.isLoading}},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,i=x(),l=(0,o.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/sync/github/auth"),"DELETE",{enabled:!!(t&&i),...e,onSuccess:function(){for(var t,a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];l.invalidateQueries({queryKey:[s.Hv,{orgUuid:n}]}),null==(t=e.onSuccess)||t.call(e,...r)}})},x=()=>{let{data:e}=(0,f.LN)(),t=(0,r.mV)(),n=!!(Array.isArray(e)&&e.find(e=>e.type===i.v8.GITHUB&&e.enabled));return!!(!p.env.NEXT_PUBLIC_DISABLE_GITHUB_INTEGRATION&&(!t||n))},b=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=x();return(0,a.Sk)("/api/organizations/".concat(t,"/sync/github/repos"),{queryKey:[s.jL,{orgUuid:t}],enabled:!!(e&&n),meta:{noToast:!0}})},y=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=x();return(0,a.Sk)("/api/organizations/".concat(t,"/code/repos"),{queryKey:["SYNC_GH_REPOS_WITH_STATUS_QUERY_KEY",{orgUuid:t}],enabled:!!(e&&t&&n),meta:{noToast:!0}})};function j(){let e=(0,u.iB)();return(0,d.useCallback)(t=>{var n,a,r;return e?null==(n=t.status)?void 0:n.app_installed:(null==(a=t.status)?void 0:a.workflow_enabled)===!0&&(null==(r=t.status)?void 0:r.app_installed)===!0},[e])}let w=e=>{var t;let{owner:n,repo:i,branch:l}=e,o=(e=>{let{owner:t,repo:n,branch:i}=e,{activeOrganization:l}=(0,r.YL)(),o=null==l?void 0:l.uuid,c=x(),d=new URLSearchParams({owner:null!=t?t:"",repo:null!=n?n:""}).toString();return(0,a.Sk)("/api/organizations/".concat(o,"/sync/github/repo?").concat(d),{queryKey:[s.yB,{orgUuid:o,owner:t,repo:n}],enabled:!!(t&&n&&!i&&l&&c),meta:{noToast:!0}})})({owner:n,repo:i,branch:l}),c=(e=>{let{owner:t,repo:n,branch:i}=e,{activeOrganization:l}=(0,r.YL)(),o=null==l?void 0:l.uuid,c=x();return(0,a.Sk)("/api/organizations/".concat(o,"/sync/github/repo/").concat(t,"/").concat(n,"/tree/").concat(i),{queryKey:[s.o6,{orgUuid:o,owner:t,repo:n,branch:i}],staleTime:3e5,enabled:!!(t&&n&&i&&l&&c),meta:{noToast:!0}})})({owner:n,repo:i,branch:l||(null==(t=o.data)?void 0:t.default_branch)});return{data:{repo:o.data,tree:c.data},isFetching:o.isFetching||c.isFetching,error:o.error||c.error}}},37541:(e,t,n)=>{n.d(t,{J:()=>i});var a=n(72902),r=n(7620);function s(e){return function(t){for(var n=arguments.length,s=Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];let l=t.map(e=>e.replace(/\n/g,"").trim()),o=r.forwardRef((t,n)=>{let{className:i,...o}=t,c=s.map(e=>"function"==typeof e?e(t):e),d=Object.fromEntries(Object.entries(o).filter(e=>{let[t]=e;return!t.startsWith("$")}));return r.createElement(e,{...d,ref:n,className:(0,a.A)(l,c,"string"==typeof i?i:"")})});return o.displayName="string"==typeof e?e:e.displayName,o}}function i(e){return s(e)}i.a=s("a"),i.aside=s("aside"),i.button=s("button"),i.main=s("main"),i.div=s("div"),i.form=s("form"),i.nav=s("nav"),i.fieldset=s("fieldset"),i.header=s("header"),i.h1=s("h1"),i.h2=s("h2"),i.h3=s("h3"),i.h4=s("h4"),i.h5=s("h5"),i.th=s("th"),i.td=s("td"),i.input=s("input"),i.label=s("label"),i.p=s("p"),i.section=s("section"),i.span=s("span"),i.li=s("li"),i.table=s("table"),i.thead=s("thead"),i.tbody=s("tbody"),i.tr=s("tr")},39383:(e,t,n)=>{n.d(t,{jR:()=>C,K8:()=>y,$F:()=>j,Dx:()=>A,Y5:()=>_,hW:()=>N,Ox:()=>M,c7:()=>S,kV:()=>b});var a=n(74813),r=n(1613),s=n(64328),i=n(68067),l=n(2e3),o=n(27541),c=n(7620),d=n(22167),u=n(92245),m=n(35580),f=n(75495),p=n(24407);let g=p.z.object({field:p.z.enum(["custom_oauth_client_id","custom_oauth_client_secret","url"]),sourceUrl:p.z.string()}),h=p.z.object({uuid:p.z.string(),name:p.z.string(),oneLiner:p.z.string(),description:p.z.string(),iconUrl:p.z.string().optional(),toolNames:p.z.array(p.z.string()),promptNames:p.z.array(p.z.string()),license:p.z.string().optional(),version:p.z.string().optional(),author:p.z.object({name:p.z.string().optional(),url:p.z.string().optional()}).optional(),documentation:p.z.string().optional(),support:p.z.string().optional(),privacyPolicy:p.z.string().optional(),requiredFields:p.z.array(g).optional()});h.and(p.z.object({type:p.z.enum(["firstParty"]),syncSourceType:p.z.enum([l.v8.GDRIVE,l.v8.GMAIL,l.v8.GCAL,l.v8.SLACK])}));let v=h.and(p.z.object({type:p.z.enum(["remote"]),isAuthless:p.z.boolean()}).and(p.z.union([p.z.object({url:p.z.string(),urlRegex:p.z.undefined()}),p.z.object({url:p.z.undefined(),urlRegex:p.z.string()})])));h.and(p.z.object({type:p.z.enum(["local"]),manifest:f.ff,onDiskPath:p.z.string().optional(),downloadCount:p.z.number().optional(),lifetimeDownloadCount:p.z.number().optional(),isBlocklisted:p.z.boolean().optional(),isInternal:p.z.boolean().optional()}));let x=p.z.array(v),b=e=>{let{isOpen:t,selectedServerId:n}=e,r=(0,c.useRef)(!1),{track:s}=(0,a.st)();(0,c.useEffect)(()=>{t&&(!r.current||n)&&(r.current=!0,s({event_key:"claudeai.mcp.directory.page_view",directory_server_id:n}))},[t,n,s])},y=e=>{let{openModal:t}=e,n=(0,o.useSearchParams)(),a=n.get("directory-open"),r=n.get("directory-uuid");(0,c.useEffect)(()=>{if(a){try{let e=new URL(window.location.href);e.searchParams.delete("directory-open"),e.searchParams.delete("directory-uuid"),window.history.replaceState(null,"",e.pathname+e.search+e.hash)}catch(e){window.history.replaceState(null,"",window.location.pathname+window.location.hash)}t(null!=r?r:void 0)}},[a,r,t])},j=e=>{let{modalIsOpen:t,directoryUuid:n}=e,a=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e;try{e=new URL(window.location.href)}catch(e){return}t?(a.current||(a.current=window.location.pathname),window.history.replaceState(null,"","/directory".concat(n?"/".concat(n):"")+e.search+e.hash)):!t&&a.current&&(window.history.replaceState(null,"",a.current+e.search+e.hash),a.current=null)},[t,n])},w=[{uuid:"8c1b41b4-c060-4704-8c17-95c39fa3511c",name:"Gmail",type:"firstParty",syncSourceType:l.v8.GMAIL,oneLiner:"Draft replies, summarize threads, & search your inbox",description:"Connect Gmail to Claude to quickly find important emails and understand long conversations. Claude can search through your messages, read entire email threads to give you context, and help you stay on top of your inbox. Perfect for finding that message you remember sending, catching up on email chains you missed, or preparing for meetings.",toolNames:[],promptNames:[],author:{name:"Anthropic",url:"https://anthropic.com"},documentation:"https://support.anthropic.com/en/articles/11088742-using-the-gmail-and-google-calendar-integrations",support:"https://support.anthropic.com",privacyPolicy:"https://www.anthropic.com/privacy"},{uuid:"da761fc3-2821-443c-9734-0b53599fda39",name:"Google Calendar",type:"firstParty",syncSourceType:l.v8.GCAL,oneLiner:"Understand your schedule and optimize your time",description:"Connect Google Calendar to Claude so it can see your schedule, find specific events, and help you prepare for meetings. Claude can search your calendar for events, check your availability, and find free time slots for scheduling. Useful for understanding what’s coming up, preparing for meetings by seeing attendee lists and details, or coordinating schedules when planning new events.",toolNames:[],promptNames:[],author:{name:"Anthropic",url:"https://anthropic.com"},documentation:"https://support.anthropic.com/en/articles/11088742-using-the-gmail-and-google-calendar-integrations",support:"https://support.anthropic.com",privacyPolicy:"https://www.anthropic.com/privacy"},{uuid:"37fb5d42-ef62-45d4-a12e-66551527a003",name:"Google Drive",type:"firstParty",syncSourceType:l.v8.GDRIVE,oneLiner:"Find and analyze files instantly",description:"Connect Google Drive to Claude so it can search through your documents, read file contents, and help you work with your files. Claude can find specific documents even when you don’t remember the exact name, read and analyze the content of your docs, and convert files to different formats. Useful for finding old project notes, analyzing document content, or pulling information from files scattered across your Drive.",toolNames:[],promptNames:[],author:{name:"Anthropic",url:"https://anthropic.com"},documentation:"https://support.anthropic.com/en/articles/10166901-using-the-google-drive-integration",support:"https://support.anthropic.com",privacyPolicy:"https://www.anthropic.com/privacy"}],_=()=>{let e=(0,m.Uz)();return{getCorrespondingInstalledServer:t=>{let{url:n,urlRegex:a}=t;if(n)return e.find(e=>e.url===n)||null;if(a){let t=new RegExp(a);return e.find(e=>t.test(e.url||""))||null}return null}}},A=e=>({getCorrespondingDirectoryServer:(0,c.useCallback)(t=>{let{url:n}=t;return n&&e.find(e=>{if("remote"===e.type){if(e.url)return e.url===n;else if(e.urlRegex)return new RegExp(e.urlRegex).test(n)}return!1})||null},[e])}),C=e=>{if(e<1e3)return e.toString();let t=(e,t,n)=>{let a=e/t,r=a<10?Math.round(10*a)/10:Math.round(a);return"".concat(r).concat(n)};return e<1e6?t(e,1e3,"k"):e<1e9?t(e,1e6,"M"):t(e,1e9,"B")},S=()=>{let e=(0,i.T9)("mcp_directory_servers","servers",[],x),t=(0,d.vm)();return{status:"success",servers:[...((e,t)=>{var n,a,r;let s=new Set;return(null==(n=e[l.v8.GMAIL])?void 0:n.available)&&!t||s.add(l.v8.GMAIL),(null==(a=e[l.v8.GCAL])?void 0:a.available)&&!t||s.add(l.v8.GCAL),(null==(r=e[l.v8.GDRIVE])?void 0:r.available)||s.add(l.v8.GDRIVE),w.filter(e=>!s.has(e.syncSourceType))})((0,u.Ou)(),t),...e].sort((e,t)=>e.name.localeCompare(t.name)),refetch:()=>{}}},N=()=>{let{servers:e}=S(),{getCorrespondingDirectoryServer:t}=A(e.filter(e=>"remote"===e.type));return{isRemoteServerInDirectory:e=>{let{url:n}=e;return!!t({url:n})}}},M=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,s.YL)(),n=(0,r.Sk)("/api/organizations/".concat(null==t?void 0:t.uuid,"/dxt/extensions"),{headers:{"x-dxt-registry-version":"2"}});return"success"!==n.status?{status:n.status,servers:[],refetch:()=>{n.refetch()}}:{status:n.status,refetch:()=>{n.refetch()},servers:n.data.entries.filter(t=>e||!0!==t.is_blocklisted).map(e=>{var t,n;let a=e.manifest;return{type:"local",uuid:e.id,name:a.display_name||a.name,oneLiner:a.description,description:a.long_description||a.description,iconUrl:e.icon_url||"",toolNames:(null==(t=a.tools)?void 0:t.map(e=>e.name))||[],promptNames:(null==(n=a.prompts)?void 0:n.map(e=>e.name))||[],license:a.license,version:a.version,author:{name:a.author.name,url:a.author.url},documentation:a.documentation,support:a.support,manifest:a,downloadCount:e.download_count,lifetimeDownloadCount:e.lifetime_download_count,isBlocklisted:e.is_blocklisted,isInternal:e.is_internal}}).sort((e,t)=>{var n,a;let r=null!=(n=e.lifetimeDownloadCount)?n:-1;return(null!=(a=t.lifetimeDownloadCount)?a:-1)-r})}}},47592:(e,t,n)=>{n.d(t,{Fr:()=>r,K7:()=>m,Nj:()=>f,cX:()=>i,fJ:()=>u,lh:()=>p,uF:()=>c,vm:()=>l});var a=n(7620);function r(){return window.innerWidth<640}let s=/(macintosh|macintel|macppc|mac68k|macos)/i;function i(){let e=window.navigator.userAgent.toLowerCase();return s.test(e)}function l(){return(0,a.useMemo)(()=>/(macintosh|macintel|macppc|mac68k|macos)/i.test(window.navigator.userAgent),[])}let o=/(win32|win64|windows|wince)/i;function c(){let e=window.navigator.userAgent.toLowerCase();return o.test(e)}let d=/(iphone|ipad|ipod|android|mobile|webos)/i;function u(){let e=window.navigator.userAgent.toLowerCase();return d.test(e)}function m(e){(0,a.useEffect)(()=>{let t=document.title;return e&&(document.title="".concat(e," - Claude")),()=>{document.title=t}},[e])}let f=e=>{try{return new URL(e).hostname.split(".").slice(-2).join(".")}catch(e){return}},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=[16,32,48,64,96,128].find(e=>e>=2*t)||128,a=f(e);if(a)return"https://www.google.com/s2/favicons?domain=".concat(a,"&sz=").concat(n)}},50571:(e,t,n)=>{n.d(t,{$V:()=>w,vx:()=>y,kX:()=>j,HJ:()=>b,sb:()=>x,BN:()=>A,M8:()=>S,ko:()=>_,AY:()=>C,es:()=>N}),n(42759);var a=n(94295),r=n(19736),s=n(74813),i=n(64328),l=n(28),o=n(68067),c=n(28044),d=n(7620),u=n(45538),m=n(98649),f=n(42605),p=n(88775),g=n(66365),h=n(48778),v=n(35580);n(10665);let x=()=>{let{value:e}=(0,o.fS)("bagel_enabled");return e},b=()=>{let{value:e}=(0,o.fS)("inline_tool_approval");return e},y=()=>{let{account:e,activeOrganization:t}=(0,i.YL)(),n=(0,i.mV)(),a=(0,l.pG)(e,t,"claude-ai"),r=(0,l.yI)(e,t,l.Nt.IntegrationsManage);return!n||a||r},j=()=>{let e=(0,i.zm)(),t=y();return e&&!t},w="mcp_directory_chin",_=function(){var e,t;let{shouldTrack:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,d.useRef)(!1),r=x(),{dismiss:s}=(0,m.W)(),{account:l}=(0,i.YL)(),o=j(),c=new Date,u="".concat(c.getDate(),"-").concat(c.getMonth(),"-").concat(c.getFullYear()),f="".concat(w,"_").concat(u),p=(null!=(t=null==l||null==(e=l.settings.dismissed_claudeai_banners)?void 0:e.map(e=>e.banner_id))?t:[]).filter(e=>e.includes(w)),g=(0,d.useMemo)(()=>!(!r||o||p.includes(w))&&(!(p.length>3)||!p.includes(f)),[o,r,p,f]);return(0,d.useEffect)(()=>{!a.current&&g&&!p.includes(f)&&n&&(s(f),a.current=!0)},[f,p,n,s,g]),g},A=()=>{var e;let{getMcpToolApprovalRequestSetting:t}=function(){let{value:e}=(0,g.useDynamicConfig)("mcp_tool_approval_config"),t=(0,d.useCallback)((t,n)=>{var a,r,s,i;if(e){if((null==(a=e[t])?void 0:a[n])!==void 0)return e[t][n];if((null==(r=e[t])?void 0:r["*"])!==void 0)return e[t]["*"];if((null==(s=e["*"])?void 0:s[n])!==void 0)return e["*"][n];if((null==(i=e["*"])?void 0:i["*"])!==void 0)return e["*"]["*"]}},[e]);return{toolApprovalConfig:e,getMcpToolApprovalRequestSetting:t}}(),n=(()=>{let{value:e}=(0,o.fS)("disable_destructive_mcp_tools_by_default");return e})(),{account:a}=(0,i.YL)(),r=null==a||null==(e=a.settings)?void 0:e.enabled_mcp_tools,s=(0,d.useRef)(r);return(0,d.useEffect)(()=>{s.current=r},[r]),{getApprovalSetting:(0,d.useCallback)((e,a)=>{var r,i,l,o;let c=t(null!=e?e:"",null!=(l=null==a?void 0:a.name)?l:""),d=(null==a||null==(r=a.annotations)?void 0:r.readOnlyHint)!==!0&&(null==a||null==(i=a.annotations)?void 0:i.destructiveHint)===!0;if(n&&d&&void 0===c)return"always";let u=a?(null!=(o=s.current)?o:{})[a.alwaysApprovedKey]:void 0;return"perChat"===c||"always"===c?"always":u?"never":!1===u?"ask":null!=c?c:"ask"},[t,n])}},C=()=>{let e=(0,v.Uz)({type:"local"});return!!(0,c.V)()&&e.length>0},S=()=>{var e,t,n;let a=(0,f.o)(),r=(null==(e=a.pendingConversationSettings)?void 0:e.compass_mode)==="advanced"||(null==(n=a.conversation)||null==(t=n.conversationSettings)?void 0:t.compass_mode)==="advanced",s=(0,v.Uz)({type:"remote"}).length>0;return r&&s},N=e=>{let t=(0,p.jw)(),{account:n}=(0,i.YL)(),{isInBeam:l,beamConversationSettings:c,setBeamConversationSettings:d}=(0,h.d)(),m=(0,p.QN)(),{data:f}=(0,u.xQ)(m),{mutate:g}=(0,u.mu)(m),{value:v}=(0,o.fS)("claude_ai_sticky_project_settings"),{track:x}=(0,s.st)(),{mutate:b}=(0,a.Jy)(),{mutate:y}=(0,r.HF)(null==t?void 0:t.id);return{toggleMcpToolEnabled:(a,r,s)=>{if(!n)return;let i=Array.isArray(a)?a.reduce((e,t)=>({...e,[t]:r}),{}):{[a]:r};if(t){var o;y({settings:{enabled_mcp_tools:{...null==(o=t.conversationSettings)?void 0:o.enabled_mcp_tools,...i}}})}else l&&d&&d({...c,enabled_mcp_tools:{...(null==c?void 0:c.enabled_mcp_tools)||{},...i}});if(m&&v){if(!f)return;g({...f,enabled_mcp_tools:{...(null==f?void 0:f.enabled_mcp_tools)||{},...i}})}else{let e=n.settings.enabled_mcp_tools;b({...n.settings,enabled_mcp_tools:{...e,...i}})}x({event_key:"claudeai.mcp.tool.toggled",conversation_uuid:(null==t?void 0:t.id)||null,setting:a,value:r,url:s,source:null==e?void 0:e.source})},toggleMcpToolAlwaysApproved:(e,t)=>{if(!n)return;let a=n.settings.enabled_mcp_tools;b({...n.settings,enabled_mcp_tools:{...a,[e]:t}})}}}},54787:(e,t,n)=>{n.d(t,{c:()=>u,j:()=>m});var a=n(2348),r=n(54568),s=n(37541),i=n(72902),l=n(7620),o=n(59666);function c(){let e=(0,a._)(["\n  relative\n  bg-text-500/50\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-always-white/0 after:from-0% after:via-always-white/20 after:via-50% after:to-100% after:to-always-white/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return c=function(){return e},e}function d(){let e=(0,a._)(["\n  relative\n  bg-bg-400\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-bg-000/0 after:from-0% after:via-bg-000/20 after:via-50% after:to-100% after:to-bg-000/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return d=function(){return e},e}let u=e=>{let{repeat:t,children:n}=e;return(0,r.jsx)(r.Fragment,{children:Array.from({length:t}).map((e,t)=>(0,r.jsx)(l.Fragment,{children:n},t))})};function m(e){let{className:t,height:n=24,width:a,rounded:s="full",variant:c="default"}=e,d=(0,l.useRef)(null),u={height:n,width:"number"==typeof a||"string"==typeof a?a:"object"==typeof a?(null===d.current&&(d.current=Math.round(Math.random()*(a.max-a.min))+a.min),d.current):"100%",maxWidth:"100%"};return(0,r.jsx)("light"===c?p:f,{className:(0,i.A)(t,{"rounded-full":"full"===s,"rounded-xl":"xl"===s,"rounded-lg":"lg"===s,"rounded-md":"md"===s,"rounded-sm":"sm"===s}),style:u,children:(0,r.jsx)("span",{className:"sr-only",children:(0,r.jsx)(o.A,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})}let f=s.J.div(c()),p=s.J.div(d())},60147:(e,t,n)=>{n.d(t,{m:()=>v});var a=n(54568),r=n(46302),s=n(64328),i=n(45054),l=n(34498),o=n(2e3),c=n(65315),d=n(10369),u=n(96547),m=n(79052),f=n(5924),p=n(36016),g=(n(18050),n(22167)),h=n(20746);function v(e){let{type:t,server:n,onClose:r}=e;if(n)return(0,a.jsx)(j,{server:n,onClose:r});switch(t){case o.v8.GITHUB:return(0,a.jsx)(x,{onClose:r});case o.v8.GDRIVE:return(0,a.jsx)(b,{onClose:r});case o.v8.OUTLINE:return;case o.v8.FIDDLEHEAD:return(0,a.jsx)(w,{onClose:r});case o.v8.CUTTLEFISH:return(0,a.jsx)(_,{onClose:r});default:return(0,a.jsx)(y,{type:t,onClose:r})}}function x(e){let{onClose:t}=e,{mutate:n,isPending:r}=(0,p.rW)();return(0,a.jsx)(A,{name:"GitHub",onDisconnect:n,disconnecting:r,onClose:t})}function b(e){let{onClose:t}=e,{mutate:n,isPending:r}=(0,m.U5)(),s=(0,d.A)();return(0,a.jsx)(A,{name:"Google Drive",onDisconnect:n,disconnecting:r,onClose:t,modalMessageOverride:s.formatMessage({defaultMessage:"You won’t be able to continue any previous chats that reference content from Google Docs.",id:"Zi7eVRnAwf"})})}function y(e){let{type:t,onClose:n}=e,{disconnect:r}=(0,g.ob)(t);return(0,a.jsx)(A,{name:(0,h.xI)(t),onDisconnect:r,disconnecting:!1,onClose:n})}function j(e){let{server:t,onClose:n}=e,r=(0,d.A)(),{activeOrganization:l}=(0,s.YL)(),{addError:o}=(0,i.Y)(),{mutate:c,isPending:m}=(0,u.W3)((null==l?void 0:l.uuid)||"",t.uuid,{onError:e=>{o(r.formatMessage({defaultMessage:"Failed to disconnect from server",id:"L488a5jdgF"}),{error:e})}});return(0,a.jsx)(A,{name:t.name,onDisconnect:c,disconnecting:m,onClose:n})}function w(e){let{onClose:t}=e,{mutate:n,isPending:r}=(0,f.Qp)(),s=(0,h.ak)(),i=(0,c.wc)(),l=i[c.BU],d=i[c.jT],u=i[c.fh];return(0,a.jsx)(A,{name:s(o.v8.FIDDLEHEAD),onDisconnect:n,disconnecting:r,onClose:t,modalMessageOverride:l,modalTitleOverride:d,modalButtonOverride:u})}function _(e){let{onClose:t}=e,{mutate:n,isPending:s}=(0,r.fH)(),i=(0,h.ak)();return(0,a.jsx)(A,{name:i(o.v8.CUTTLEFISH),onDisconnect:n,disconnecting:s,onClose:t})}function A(e){let{name:t,onDisconnect:n,disconnecting:r,onClose:s,modalMessageOverride:i,modalTitleOverride:o,modalButtonOverride:c}=e,u=(0,d.A)(),m=null!=o?o:u.formatMessage({defaultMessage:"Disconnect {integrationName}?",id:"MUrNVj88RO"},{integrationName:t}),f=null!=c?c:u.formatMessage({defaultMessage:"Disconnect",id:"qj1uhzynub"}),p=null!=i?i:u.formatMessage({defaultMessage:"You can still continue previous chats that reference {integrationName} content. However, Claude won’t be able to access new content or perform new tasks.",id:"tlmLidjA7e"},{integrationName:t});return(0,a.jsx)(l.R,{isOpen:!0,onClose:s,title:m,onConfirm:()=>{n(),s()},confirmText:f,variant:"danger",autoFocus:!1,message:p,size:"md",isLoading:r})}},66716:(e,t,n)=>{n.d(t,{r:()=>o});var a=n(54568),r=n(72902),s=n(57965),i=n.n(s),l=n(7620);function o(e){let{direction:t="vertical",disabled:n,containerClassName:s,className:o,gradientHeight:c=24,hideTopGradient:d=!1,hideBottomGradient:u=!1,contentHeightMayChange:m=!1,containerHeightMayChange:f=!1,children:p,...g}=e,h=(0,l.useRef)(null),v=(0,l.useRef)(null),[x,b]=(0,l.useState)(!0),[y,j]=(0,l.useState)(!0),w=(0,l.useRef)(x),_=(0,l.useRef)(y),A=i()((0,l.useCallback)(()=>{let e=v.current;e&&(("vertical"===t?e.scrollHeight-e.scrollTop-e.clientHeight<=1:e.scrollWidth-e.scrollLeft-e.clientWidth<=1)?w.current||(b(!0),w.current=!0):w.current&&(b(!1),w.current=!1),("vertical"===t?e.scrollTop:e.scrollLeft)<=0?_.current||(j(!0),_.current=!0):_.current&&(j(!1),_.current=!1))},[t]),150);return(0,l.useEffect)(()=>{A()},[A]),(0,l.useEffect)(()=>{if(!h.current||!m)return;let e=new ResizeObserver(A);return e.observe(h.current),()=>{e.disconnect()}},[A,m]),(0,l.useEffect)(()=>{if(!v.current||!f)return;let e=new ResizeObserver(A);return e.observe(v.current),()=>{e.disconnect()}},[A,f]),(0,a.jsx)("div",{style:{maskImage:n?void 0:"linear-gradient(to ".concat("vertical"===t?"bottom":"right",", transparent 0%, black ").concat(y||d?0:c,"px, black calc(100% - ").concat(x||u?0:c,"px), transparent 100%)")},className:(0,r.A)("vertical"===t?"min-h-0":"min-w-0",s),children:(0,a.jsx)("div",{onScroll:n?void 0:A,ref:v,className:(0,r.A)("vertical"===t?"overflow-y-auto overflow-x-hidden min-h-0":"overflow-x-auto overflow-y-hidden min-w-0",o),...g,children:m?(0,a.jsx)("div",{ref:h,children:p}):p})})}},68010:(e,t,n)=>{n.d(t,{M:()=>c});var a=n(54568),r=n(23812),s=n(43178),i=n(72902),l=n(7620),o=n(59666);function c(e){let{text:t,className:n}=e,[c,d]=(0,l.useState)(!1),u=(0,l.useRef)(null),m=(0,l.useRef)(0),[f,p]=(0,l.useState)(42),g=f>42;return((0,l.useLayoutEffect)(()=>{var e;p((null==(e=u.current)?void 0:e.scrollHeight)||0)},[t]),t)?(0,a.jsxs)("div",{className:(0,i.A)("overflow-hidden relative transition-[height] duration-150 ease-in-out","text-text-300 text-sm",n),style:{height:c?f+32*!!g:40},children:[(0,a.jsx)("div",{ref:u,className:"whitespace-pre-wrap",style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:t}),g&&(0,a.jsx)("div",{className:"absolute bottom-0 right-0 bg-bg-100 bottom-0",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute top-0 bottom-0 -left-4 w-6 bg-gradient-to-r from-transparent to-bg-100"}),(0,a.jsx)(r.$,{size:"inline",variant:"ghost",onClick:()=>{var e;let t=null==(e=u.current)?void 0:e.closest(".overflow-y-auto");!c&&t?m.current=t.scrollTop:c&&t&&t.scrollTo({top:m.current,behavior:"instant"}),d(e=>!e)},className:"font-medium flex gap-1 items-center",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{size:12,weight:"bold"}),(0,a.jsx)(o.A,{defaultMessage:"Less",id:"mFYgAXM/x4"})]}):(0,a.jsx)(o.A,{defaultMessage:"{ellipsis}More",id:"eRW5dl5m34",values:{ellipsis:"..."}})})]})})]}):null}},71396:(e,t,n)=>{n.d(t,{J:()=>p});var a=n(54568),r=n(26819),s=n(66716),i=n(3075),l=n(72902),o=n(10369),c=n(59666),d=n(83226),u=n(45271),m=n(68010),f=n(22271);function p(e){let{onClose:t,server:n}=e,l=(0,o.A)();return(0,a.jsx)(i.aF,{isOpen:!0,hasCloseButton:!0,onClose:t,modalSize:"xl",children:(0,a.jsxs)("div",{className:"px-6 pb-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-6",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(u.z,{size:42,imageSize:24,type:n.iconType,src:n.iconSrc,name:n.name}),(0,a.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("p",{className:"font-medium",children:n.name}),(0,a.jsx)(r.E,{children:"remote"===n.type?(0,a.jsx)(c.A,{defaultMessage:"CUSTOM",id:"Jg/zGahNtM"}):(0,a.jsx)(c.A,{defaultMessage:"LOCAL DEV",id:"S14UXqQo+W"})})]}),n.url?(0,a.jsx)(d.sd,{url:n.url}):n.version&&(0,a.jsx)("div",{className:"text-sm text-text-400",children:n.version})]})]})}),(0,a.jsx)(s.r,{gradientHeight:24,className:"h-[500px]",children:(0,a.jsx)("div",{className:"flex flex-col pb-4",children:(()=>{let e=!!n.tools.length,t=!!n.resources.length,r=!!n.prompts.length,s=!e&&t,i=!e&&!t&&r;return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)(g,{name:l.formatMessage({defaultMessage:"Tools",id:"nUT0LvZVOx"}),items:n.tools,server:n,isFirst:e}),t&&(0,a.jsx)(g,{name:l.formatMessage({defaultMessage:"Resources",id:"c/KktLImbB"}),items:n.resources,isFirst:s}),r&&(0,a.jsx)(g,{name:l.formatMessage({defaultMessage:"Prompts",id:"p7buKPIFPB"}),items:n.prompts,isFirst:i})]})})()})})]})})}function g(e){let{name:t,items:n,server:r,isFirst:s}=e;return(0,a.jsxs)("div",{className:(0,l.A)("flex flex-col pb-4",!s&&"border-t border-border-300 pt-4"),children:[(0,a.jsx)("div",{className:"sticky top-0 w-full bg-bg-100 pt-2 pb-4 z-10",children:(0,a.jsx)("div",{className:"flex gap-2 items-center",children:(0,a.jsx)("div",{className:"font-large-bold text-text-100",children:t})})}),(0,a.jsx)("div",{children:n.map(e=>{let t=(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"font-base-bold",children:e.displayName}),(0,a.jsx)(m.M,{text:e.description})]});return(0,a.jsx)("div",{className:"py-2",children:r?(0,a.jsx)(f.P,{tool:e,server:r,children:t},e.name):t},e.name)})})]})}},74172:(e,t,n)=>{n.d(t,{T:()=>o,j:()=>i});var a=n(4211),r=n(50848);let s=(0,a.v)()((0,r.Zr)(e=>({pendingMessages:{},addPendingMessage:(t,n)=>{e(e=>({pendingMessages:{...e.pendingMessages,[t]:[...e.pendingMessages[t]||[],n]}}))},clearPendingMessages:t=>{e(e=>({pendingMessages:{...e.pendingMessages,[t]:[]}}))},removePendingMessage:(t,n)=>{e(e=>({pendingMessages:{...e.pendingMessages,[t]:(e.pendingMessages[t]||[]).filter(e=>e.uuid!==n)}}))}}),{name:"session-pending-messages",storage:(0,r.KU)(()=>sessionStorage)})),i=()=>s(e=>e.addPendingMessage),l=[],o=e=>s(t=>{var n;return null!=(n=t.pendingMessages[e])?n:l})},79155:(e,t,n)=>{n.d(t,{f:()=>i});var a=n(54568),r=n(63911),s=n(72902);let i=(0,n(7620).forwardRef)((e,t)=>{let{checkState:n,onClick:i,label:l,...o}=e,c="partial"===n?r.Hs:r.Jl;return(0,a.jsxs)("div",{className:"p-2 -m-2 flex items-center",onClick:e=>{e.stopPropagation(),i({didCheck:"unchecked"===n})},children:[(0,a.jsx)("button",{ref:t,className:(0,s.A)("rounded p-[0.5px] border-0.5 flex items-center justify-center transition","unchecked"!==n?"bg-accent-secondary-000 border-accent-secondary-200 shadow-sm":"border-border-200 hover:bg-bg-000 hover:shadow-sm"),...o,children:(0,a.jsx)(c,{className:(0,s.A)("text-always-white transition",{invisible:"unchecked"===n}),size:16})}),l&&(0,a.jsx)("span",{className:"ml-2 cursor-pointer",children:l})]})});i.displayName="PartialCheckbox"},80092:(e,t,n)=>{n.d(t,{AW:()=>u,Ks:()=>f,LK:()=>p,oo:()=>m,sr:()=>d});var a=n(1613),r=n(64328),s=n(28),i=n(68067),l=n(4869);let o="lti_platforms";function c(){let{value:e}=(0,i.fS)("claude_ai_velvet_accordion");return e}let d=()=>{let{activeOrganization:e,account:t}=(0,r.YL)(),n=null==e?void 0:e.uuid,i=(0,s.yI)(t,e,s.Nt.OrganizationManage),l=c();return(0,a.Sk)("/api/organizations/".concat(n,"/lti/platforms"),{queryKey:[o,{orgUuid:n}],enabled:!!e&&!!n&&i&&l})},u=e=>{let t=(0,l.useQueryClient)(),{activeOrganization:n}=(0,r.YL)(),s=null==n?void 0:n.uuid,i=c();return(0,a.L2)("/api/organizations/".concat(s,"/lti/platforms"),"PUT",{enabled:i,onSuccess:e=>{t.setQueryData([o,{orgUuid:s}],t=>t?[...t,e]:[e]),t.invalidateQueries({queryKey:[o]})},onSettled:(e,n)=>{e&&!n&&(t.setQueryData([o,{orgUuid:s}],t=>t?[...t,e]:[e]),t.invalidateQueries({queryKey:[o]}))},...e})},m=e=>{let t=(0,l.useQueryClient)(),{activeOrganization:n}=(0,r.YL)(),s=null==n?void 0:n.uuid,i=c();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(s,"/lti/platforms/").concat(t)},"POST",{enabled:i,onSuccess:(e,n)=>{t.setQueryData([o,{orgUuid:s}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===n.platformId);if(-1!==a){let n=[...t];return n[a]=e,n}return t}),t.invalidateQueries({queryKey:[o]})},onSettled:(e,n,a)=>{e&&!n&&(t.setQueryData([o,{orgUuid:s}],t=>{if(!t)return[e];let n=t.findIndex(e=>e.id===a.platformId);if(-1!==n){let a=[...t];return a[n]=e,a}return t}),t.invalidateQueries({queryKey:[o]}))},...e})},f=e=>{let t=(0,l.useQueryClient)(),{activeOrganization:n}=(0,r.YL)(),s=null==n?void 0:n.uuid,i=c();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(s,"/lti/platforms/").concat(t)},"POST",{enabled:i,onMutate:e=>e,onSuccess:(e,n)=>{t.setQueryData([o,{orgUuid:s}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===n.platformId);if(-1!==a){let n=[...t];return n[a]=e,n}return t}),t.invalidateQueries({queryKey:[o]})},onError:()=>{},onSettled:(e,n,a)=>{e&&!n&&(t.setQueryData([o,{orgUuid:s}],t=>{if(!t)return[e];let n=t.findIndex(e=>e.id===a.platformId);if(-1!==n){let a=[...t];return a[n]=e,a}return t}),t.invalidateQueries({queryKey:[o]}))},...e})},p=e=>{let t=(0,l.useQueryClient)(),{activeOrganization:n}=(0,r.YL)(),s=null==n?void 0:n.uuid,i=c();return(0,a.L2)(e=>{let{platformId:t}=e;return"/api/organizations/".concat(s,"/lti/platforms/").concat(t)},"POST",{enabled:i,onMutate:e=>e,onSuccess:(e,n)=>{t.setQueryData([o,{orgUuid:s}],t=>{if(!t)return[e];let a=t.findIndex(e=>e.id===n.platformId);if(-1!==a){let n=[...t];return n[a]=e,n}return t}),t.invalidateQueries({queryKey:[o]})},onError:()=>{},onSettled:(e,n,a)=>{e&&!n&&(t.setQueryData([o,{orgUuid:s}],t=>{if(!t)return[e];let n=t.findIndex(e=>e.id===a.platformId);if(-1!==n){let a=[...t];return a[n]=e,a}return t}),t.invalidateQueries({queryKey:[o]}))},...e})}},83226:(e,t,n)=>{n.d(t,{cG:()=>j,fI:()=>b,lg:()=>v,sd:()=>x,zA:()=>y});var a=n(54568),r=n(64328),s=n(45054),i=n(26819),l=n(54787),o=n(13910),c=n(64371),d=n(28),u=n(2e3),m=n(72902);n(7620);var f=n(10369),p=n(59666),g=n(45271),h=n(20746);function v(){let{account:e,activeOrganization:t}=(0,r.YL)(),n=(0,d.pG)(e,t,"claude-ai"),a=(0,d.yI)(e,t,d.Nt.IntegrationsManage),s=(0,r.mV)();return{manageFromOrg:s&&(a||n),manageFromPersonal:!s}}function x(e){let{url:t}=e,{copyToClipboard:n}=(0,c.C)(),{addSuccess:r}=(0,s.Y)(),i=(0,f.A)(),l=t.length>50?"".concat(t.substring(0,47),"..."):t;return(0,a.jsx)(o.Tooltip,{tooltipContent:(0,a.jsx)(p.A,{defaultMessage:"Copy URL",id:"P8QaSQLfW+"}),side:"bottom",align:"start",children:(0,a.jsx)("div",{className:"text-sm text-text-400 cursor-pointer hover:text-text-300 transition-colors truncate",onClick:()=>{n(t),r(i.formatMessage({defaultMessage:"Server URL copied",id:"Izgggpt47N"}))},children:l})})}function b(e){let{type:t,server:n,connected:r,children:s,isInDirectory:l=!1}=e,o=(0,h.ak)(),c=n?!n.isConnected:t&&!1===r,d=t===u.v8.FIDDLEHEAD?o(t):null==n?void 0:n.name;return(0,a.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.z,{size:42,imageSize:24,type:"syncSource",src:t,name:t,className:(0,m.A)(c&&"opacity-50")}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 min-w-0 relative bottom-px",children:[(0,a.jsx)("span",{className:(0,m.A)("truncate",c&&"text-text-400"),children:o(t)}),c&&(0,a.jsx)("div",{className:"text-sm text-text-500",children:(0,a.jsx)(p.A,{defaultMessage:"Disconnected",id:"FZeQlcp+xX"})})]})]}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.z,{size:42,imageSize:24,type:n.iconType,src:n.iconSrc,name:d||"?",className:(0,m.A)(c&&"opacity-50")}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 min-w-0 relative bottom-px",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("span",{className:(0,m.A)("truncate",c&&"text-text-400"),children:d}),!l&&(0,a.jsx)(i.E,{children:"remote"===n.type?(0,a.jsx)(p.A,{defaultMessage:"CUSTOM",id:"Jg/zGahNtM"}):(0,a.jsx)(p.A,{defaultMessage:"LOCAL DEV",id:"S14UXqQo+W"})})]}),c?(0,a.jsx)("div",{className:"text-sm text-text-500",children:(0,a.jsx)(p.A,{defaultMessage:"Disconnected",id:"FZeQlcp+xX"})}):n.url&&!l&&(0,a.jsx)(x,{url:n.url})]})]}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"flex gap-3 items-center",children:s})]})}function y(){return(0,a.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,a.jsx)(l.j,{width:42,height:42,rounded:"lg",variant:"light"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(l.j,{width:120,height:20,rounded:"md",variant:"light"}),(0,a.jsx)(l.j,{width:80,height:16,rounded:"md",variant:"light"})]}),(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"flex gap-3 items-center",children:(0,a.jsx)(l.j,{width:80,height:32,rounded:"md",variant:"light"})})]})}function j(e){let{className:t}=e;return(0,a.jsx)("div",{className:(0,m.A)("border-t-[0.5px] border-border-300 m-2",t)})}},84284:(e,t,n)=>{n.d(t,{j:()=>s});var a=n(54568),r=n(72902);function s(e){let{className:t,variant:n,width:s=36,height:l=20,children:o,disableAnimation:c,...d}=e,u="number"==typeof l?"".concat(l,"px"):l,m="number"==typeof s?"".concat(s,"px"):s,f="calc(".concat(u," - 4px)"),p="calc(".concat(m," - ").concat(u,")");return(0,a.jsxs)("div",{className:(0,r.A)("group/switch relative select-none cursor-pointer",t),children:[(0,a.jsx)("input",{type:"checkbox",style:{width:s,height:u},className:"peer sr-only",role:"switch",...d}),(0,a.jsx)("div",{style:{width:s,height:u},className:(0,r.A)("border-border-300 rounded-full peer:can-focus peer-disabled:opacity-50",c&&"!transition-none",i.pill[n||"default"])}),(0,a.jsx)("div",{style:{height:f,width:f,transform:"translateX(".concat(d.checked?p:"0",")")},className:(0,r.A)("absolute flex items-center justify-center start-[2px] top-[2px] rounded-full transition-all",c&&"!transition-none",i.circle[n||"default"]),children:o})]})}let i={pill:{default:"\n    bg-bg-500\n    transition-colors\n    peer-checked:bg-accent-secondary-100\n    ",blackAndWhite:"\n    bg-bg-500  \n    ",dark:"\n    bg-bg-500\n    transition-colors\n    peer-checked:bg-text-100\n    dark:bg-border-200\n    dark:peer-checked:bg-text-500\n    "},circle:{default:"\n    group-hover/switch:opacity-80\n    bg-white\n    transition\n    ",blackAndWhite:"\n    group-hover/switch:opacity-80\n    bg-bg-000\n    transition\n    duration-200\n    ",dark:"\n    group-hover/switch:opacity-80\n    bg-white\n    transition\n    "}}},84543:(e,t,n)=>{n.d(t,{E:()=>l});var a=n(54568),r=n(58720),s=n(10369),i=n(59666);function l(e){let{domain:t,setDomain:n,clientId:l,setClientId:o,deploymentId:c,setDeploymentId:d}=e,u=(0,s.A)();return(0,a.jsxs)("div",{className:"flex flex-col gap-3 mt-2",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.ks,{required:!0,label:u.formatMessage({defaultMessage:"Canvas Domain",id:"Aok65+sKzA"}),placeholder:u.formatMessage({defaultMessage:"https://school.instructure.com or https://canvas.myschool.edu",id:"VAjV+8SnM6"}),value:t,onValueChange:e=>n(e||""),onBlur:()=>n(t.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(i.A,{defaultMessage:"Enter your Canvas domain (e.g., ‘https://school.instructure.com’ for hosted Canvas or ‘https://canvas.myschool.edu’ for self-hosted)",id:"uFbHowgMW9"})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.ks,{required:!0,label:u.formatMessage({defaultMessage:"Client ID",id:"U5+MBCY8VU"}),placeholder:u.formatMessage({defaultMessage:"00000000000000",id:"BLrL/pjQgI"}),value:l,onValueChange:e=>o(e||""),onBlur:()=>o(l.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(i.A,{defaultMessage:"The Client ID from your Canvas LTI app registration (found in Canvas Admin > Developer Keys)",id:"iV5X/WX6MA"})})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.ks,{required:!0,label:u.formatMessage({defaultMessage:"Deployment ID",id:"/h+RD9WlzS"}),placeholder:u.formatMessage({defaultMessage:"1",id:"Tf9Oo0DwqC"}),value:c,onValueChange:e=>d(e||""),onBlur:()=>d(c.trim())}),(0,a.jsx)("p",{className:"text-text-200 text-sm mt-1",children:(0,a.jsx)(i.A,{defaultMessage:"The Deployment ID for your Canvas LTI integration",id:"iLMNAW31CI"})})]})]})}},87483:(e,t,n)=>{n.d(t,{AM:()=>y,Bi:()=>w,DG:()=>T,FV:()=>E,MS:()=>S,RP:()=>C,Wn:()=>I,cm:()=>N,ms:()=>b,o_:()=>M,q:()=>z,tJ:()=>L});var a=n(2348),r=n(54568),s=n(37541),i=n(63911),l=n(72902),o=n(94882),c=n(7620);function d(){let e=(0,a._)(["\n  outline-none\n  py-2\n  px-1.5\n  -mx-1\n  -mt-1\n  mb-1\n  border-b-0.5\n  border-border-300\n"]);return d=function(){return e},e}function u(){let e=(0,a._)(["\n  z-dropdown\n  bg-bg-000\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-xl\n  min-w-[8rem]\n  overflow-hidden\n  p-1.5\n  text-text-300\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  max-h-[min(var(--radix-dropdown-menu-content-available-height),var(--dropdown-max-height))]\n  overflow-y-auto\n"]);return u=function(){return e},e}function m(){let e=(0,a._)(["\n  rounded\n  py-1\n  px-2\n  max-w-full\n  whitespace-nowrap\n  text-ellipsis\n  overflow-hidden\n"]);return m=function(){return e},e}function f(){let e=(0,a._)(["text-text-500 pt-1 px-2"]);return f=function(){return e},e}function p(){let e=(0,a._)(["\n  font-base  \n  py-1.5\n  px-2\n  rounded-lg\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-200\n  [&[data-highlighted]]:text-text-000\n  ","\n  ","\n"]);return p=function(){return e},e}function g(){let e=(0,a._)(["\n  py-1.5\n  px-2\n  rounded-lg\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  flex\n  justify-between\n  gap-2\n  items-center\n"]);return g=function(){return e},e}function h(){let e=(0,a._)(["\n  py-1.5\n  px-2\n  rounded-lg\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-200\n  [&[data-highlighted]]:text-text-300\n"]);return h=function(){return e},e}function v(){let e=(0,a._)(["\n  z-dropdown\n  bg-bg-000\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-xl\n  min-w-[8rem]\n  overflow-hidden\n  p-1\n  text-text-300\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n  overflow-y-scroll\n  max-h-[min(100vh,var(--dropdown-max-height))]\n"]);return v=function(){return e},e}function x(){let e=(0,a._)(["\n  h-0\n  border-t-0.5\n  border-border-300\n  m-1\n"]);return x=function(){return e},e}function b(e){let{trigger:t,children:n,unstyledTrigger:a=!1,...s}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(j,{...s,trigger:a?(0,r.jsx)(o.l9,{asChild:!0,children:t}):(0,r.jsx)(A,{asChild:!0,children:t}),children:n})})}function y(e){let{children:t,open:n,mainButtonText:a,onClickMainButton:s,align:c="end",...d}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(j,{...d,align:c,trigger:(0,r.jsxs)("div",{className:"flex h-8 whitespace-nowrap",children:[(0,r.jsx)("button",{className:(0,l.A)("font-base-bold !text-xs rounded-l-lg bg-bg-000 h-full flex items-center justify-center px-2 border-y border-l border-border-300 hover:bg-bg-200",n&&"bg-bg-200"),onClick:s,children:a}),(0,r.jsx)(o.l9,{asChild:!0,children:(0,r.jsx)("button",{className:"bg-bg-000 flex items-center justify-center px-1 hover:bg-bg-200 rounded-r-lg border border-border-300",children:(0,r.jsx)(i.bi,{size:16})})})]}),children:t})})}function j(e){var t;let{matchTriggerWidth:n=!1,children:a,open:s,onOpenChange:i,trigger:l,modal:c,...d}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(o.bL,{open:s,onOpenChange:i,modal:c,children:[l,(0,r.jsx)(o.ZL,{children:(0,r.jsx)(_,{style:n?{width:"var(--radix-dropdown-menu-trigger-width)"}:void 0,sideOffset:null!=(t=d.sideOffset)?t:4,...d,children:a})})]})})}let w=(0,s.J)(o.lp)(d()),_=(0,s.J)(o.UC)(u()),A=(0,s.J)(o.l9)(m()),C=o.I,S=o.Pb,N=o.ZL,M=(0,s.J)(o.lp)(f()),k=(0,s.J)(o.q7)(p(),e=>{let{disabled:t}=e;return t&&"\n    opacity-50\n    pointer-events-none\n  "},e=>{let{danger:t}=e;return t&&"\n    !text-danger-000\n    [&[data-highlighted]]:bg-danger-900\n  "}),L=c.forwardRef((e,t)=>{let{children:n,icon:a,...s}=e;return a?(0,r.jsx)(k,{ref:t,...s,children:(0,r.jsxs)("div",{className:"flex items-center gap-2.5 w-full py-0.5 text-sm group",children:[a,(0,r.jsx)("span",{children:n})]})}):(0,r.jsx)(k,{ref:t,...s,children:n})});L.displayName="DropdownItem";let z=s.J.div(g()),I=(0,s.J)(o.ZP)(h()),E=(0,s.J)(o.G5)(v()),T=(0,s.J)(o.mB)(x())},88281:(e,t,n)=>{n.d(t,{r:()=>_,z:()=>A});var a=n(54568),r=n(23812),s=n(87483),i=n(28044),l=n(19820),o=n(72902),c=n(7620),d=n(10369),u=n(80092),m=n(3075),f=n(18868),p=n(59666);function g(e){let{platform:t,onClose:n,onConfirm:s,loading:i}=e,l=(e=>{let t=e.match(/^https?:\/\/([^.]+)\.instructure\.com/);return(null==t?void 0:t[1])||e})(t.issuer);return(0,a.jsxs)(m.aF,{isOpen:!0,onClose:n,modalSize:"md",title:(0,a.jsxs)("div",{className:"flex gap-2 items-center text-danger-000",children:[(0,a.jsx)(f.N,{size:20,weight:"bold"}),(0,a.jsx)(p.A,{defaultMessage:"Disable Canvas Instance",id:"/71AtmCEAt"})]}),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-text-000",children:(0,a.jsx)(p.A,{defaultMessage:"Are you sure you want to disable the Canvas instance ‘{platformName}’?",id:"5Sw2NbmZOi",values:{platformName:t.name||l}})}),(0,a.jsxs)("div",{className:"p-3 bg-danger-100 border border-danger-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-text-000 text-sm font-medium mb-2",children:(0,a.jsx)(p.A,{defaultMessage:"This action will:",id:"zvWv7FFtPu"})}),(0,a.jsxs)("ul",{className:"text-text-000 text-sm space-y-1 list-disc ml-4",children:[(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Temporarily disable Claude access from Canvas for this instance",id:"lIEPYlaaQV"})}),(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Prevent users from launching Claude from Canvas",id:"DeUCbJxieq"})}),(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Can be re-enabled at any time without reconfiguration",id:"wnmm8Q2qIC"})})]})]}),(0,a.jsx)("p",{className:"text-text-200 text-sm",children:(0,a.jsx)(p.A,{defaultMessage:"This Canvas instance will remain configured and can be re-enabled at any time.",id:"a5jT7TDFXC"})})]}),(0,a.jsxs)(m.vW,{children:[(0,a.jsx)(r.$,{variant:"danger",onClick:()=>s(t.id),loading:i,children:(0,a.jsx)(p.A,{defaultMessage:"Disable Canvas Instance",id:"/71AtmCEAt"})}),(0,a.jsx)(r.$,{variant:"secondary",onClick:n,children:(0,a.jsx)(p.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})}var h=n(7133),v=n(99740);function x(e){let{platform:t,onClose:n,onConfirm:s,loading:i}=e,l=(e=>{let t=e.match(/^https?:\/\/([^.]+)\.instructure\.com/);return(null==t?void 0:t[1])||e})(t.issuer);return(0,a.jsxs)(m.aF,{isOpen:!0,onClose:n,modalSize:"md",title:(0,a.jsxs)("div",{className:"flex gap-2 items-center text-accent-secondary-000",children:[(0,a.jsx)(v.r,{size:20,weight:"bold"}),(0,a.jsx)(p.A,{defaultMessage:"Enable Canvas Instance",id:"x5ntJF/m/o"})]}),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-text-000",children:(0,a.jsx)(p.A,{defaultMessage:"Are you sure you want to enable the Canvas instance ‘{platformName}’?",id:"sltSpK2pM1",values:{platformName:t.name||l}})}),(0,a.jsxs)("div",{className:"p-3 bg-accent-main-100 border border-accent-main-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-text-000 text-sm font-medium mb-2",children:(0,a.jsx)(p.A,{defaultMessage:"This will:",id:"+yrIUjrxTS"})}),(0,a.jsxs)("ul",{className:"text-text-000 text-sm space-y-1 list-disc ml-4",children:[(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Restore Claude access from Canvas for this instance",id:"6gypIwnFmn"})}),(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Allow users to launch Claude from Canvas again",id:"/aTphs8E3Z"})}),(0,a.jsx)("li",{children:(0,a.jsx)(p.A,{defaultMessage:"Reactivate the LTI integration for all users in your organization",id:"jX7w8Etxw8"})})]})]})]}),(0,a.jsxs)(m.vW,{children:[(0,a.jsx)(r.$,{variant:"primary",onClick:()=>s(t.id),loading:i,children:(0,a.jsx)(p.A,{defaultMessage:"Enable Canvas Instance",id:"x5ntJF/m/o"})}),(0,a.jsx)(r.$,{variant:"secondary",onClick:n,children:(0,a.jsx)(p.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})}var b=n(3217),y=n(60147),j=n(98802),w=n(71396),_=function(e){return e[e.TOOLS=0]="TOOLS",e[e.DISCONNECT=1]="DISCONNECT",e[e.REMOVE=2]="REMOVE",e[e.DISABLE=3]="DISABLE",e[e.EDIT_CANVAS=4]="EDIT_CANVAS",e[e.DISABLE_CANVAS=5]="DISABLE_CANVAS",e[e.ENABLE_CANVAS=6]="ENABLE_CANVAS",e}({});function A(e){let{type:t,server:n,actions:m}=e,f=(0,d.A)(),p=(0,i.V)(),[v,_]=(0,c.useState)(void 0),A=()=>_(void 0),{data:C}=(0,u.sr)(),S=(0,u.oo)({onSuccess:A}),N=(0,u.Ks)({onSuccess:A}),M=(0,u.LK)({onSuccess:A}),k=null==C?void 0:C[0];if(0===m.length)return;let L={0:f.formatMessage({defaultMessage:"Tools and settings",id:"8a8L0qsqhm"}),1:f.formatMessage({defaultMessage:"Disconnect",id:"qj1uhzynub"}),3:f.formatMessage({defaultMessage:"Disable",id:"Rw7iI7vYlr"}),2:f.formatMessage({defaultMessage:"Remove",id:"G/yZLul6P1"}),4:f.formatMessage({defaultMessage:"Edit",id:"wEQDC6Wv3/"}),5:f.formatMessage({defaultMessage:"Disable",id:"Rw7iI7vYlr"}),6:f.formatMessage({defaultMessage:"Enable",id:"TqSTI0/TZI"})},z=null;switch(v){case 0:z=(0,a.jsx)(w.J,{server:n,onClose:A});break;case 1:z=(0,a.jsx)(y.m,{type:t,server:n,onClose:A});break;case 3:z=(0,a.jsx)(b.u,{type:t,onClose:A});break;case 2:z=(0,a.jsx)(j.f,{server:n,onClose:A});break;case 4:z=k?(0,a.jsx)(h.S,{platform:k,onClose:A,onSubmit:(e,t,n,a)=>{S.mutate({platformId:e,canvas_url:t,client_id:n,name:"".concat(t," Canvas"),deployment_ids:[a]})},loading:S.isPending}):null;break;case 5:z=k?(0,a.jsx)(g,{platform:k,onClose:A,onConfirm:e=>{M.mutate({platformId:e,is_active:!1})},loading:M.isPending}):null;break;case 6:z=k?(0,a.jsx)(x,{platform:k,onClose:A,onConfirm:e=>{N.mutate({platformId:e,is_active:!0})},loading:N.isPending}):null}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.ms,{align:"end",trigger:(0,a.jsx)(r.$,{size:"icon",variant:"outline","aria-label":n?f.formatMessage({defaultMessage:"More options for {label}",id:"rKQPgfPvWS"},{label:n.name}):f.formatMessage({defaultMessage:"More options",id:"IzCVhGdYVc"}),children:(0,a.jsx)(l.H,{size:16,weight:"bold"})}),children:m.map(e=>(0,a.jsx)(s.tJ,{className:(0,o.A)("min-w-[175px]",[1,3,2,5].includes(e)&&"text-danger-000"),onClick:()=>{if(2===e&&(null==n?void 0:n.type)==="local"&&p){var t,a;null==(a=window.claudeAppBindings)||null==(t=a.openMcpSettings)||t.call(a,n.name)}else _(e)},children:L[e]},e))}),z]})}},92245:(e,t,n)=>{n.d(t,{Ou:()=>h,Xd:()=>v});var a=n(46302),r=n(68067),s=n(2e3),i=n(65315),l=n(66365),o=n(80092),c=n(79052),d=n(5924),u=n(36016),m=n(18050),f=n(22167),p=n(88281);function g(){let{value:e}=(0,r.fS)("kingfisher_enabled"),t=(0,c.LP)(),{isDriveAuthenticated:n}=(0,c.cI)(),{value:a}=(0,r.fS)("pumpernickel_enabled"),i=(0,f.vm)(),o=(0,f.Ys)(s.v8.GMAIL),{isAuthenticated:d}=(0,f.ob)(s.v8.GMAIL),u=(0,f.Ys)(s.v8.GCAL),{isAuthenticated:m}=(0,f.ob)(s.v8.GCAL),p=(0,f.Ys)(s.v8.SLACK),{isAuthenticated:g}=(0,f.ob)(s.v8.SLACK),h=(0,l.useLayer)("trials_freemium").get("free_integrations",!1);return{[s.v8.GDRIVE]:{type:s.v8.GDRIVE,available:e||h,enabledForOrg:t,connected:n},[s.v8.GMAIL]:{type:s.v8.GMAIL,available:(a||h)&&!i,enabledForOrg:o,connected:d},[s.v8.GCAL]:{type:s.v8.GCAL,available:(a||h)&&!i,enabledForOrg:u,connected:m},[s.v8.SLACK]:{type:s.v8.SLACK,available:p,enabledForOrg:p,connected:g}}}let h=g;function v(){let e=Object.values(g()),t=(0,u.Cq)(),{isGithubAuthenticated:n}=(0,u.nB)({fetchImmediately:!0}),l=(0,i.wc)()[i.j$]||"invalid",{data:c}=(0,a.Jh)(l),h=c&&c.length>0,{value:v}=(0,r.fS)("spider_enabled_2"),x=(0,m.AI)(),{isOutlineAuthenticated:b}=(0,m.I5)(),{value:y}=(0,r.fS)("cinnabon_enabled"),j=(0,f.Ys)(s.v8.SALESFORCE),{isAuthenticated:w}=(0,f.ob)(s.v8.SALESFORCE),_=(0,f.Ys)(s.v8.ASANA),{isAuthenticated:A}=(0,f.ob)(s.v8.ASANA),{value:C}=(0,r.fS)("claude_ai_ember"),{value:S}=(0,r.fS)("claude_ai_velvet_accordion"),{data:N}=(0,o.sr)(),M=((null==N?void 0:N.filter(e=>e.is_active))||[]).length>0,k=(0,d.w5)(),{isAuthenticated:L}=(0,d.eF)();return[...e,...h?[{type:s.v8.CUTTLEFISH,available:!0,enabledForOrg:!0,connected:!0}]:[],{type:s.v8.GITHUB,available:!0,enabledForOrg:t,connected:n},{type:s.v8.OUTLINE,available:v&&!1,enabledForOrg:x,connected:b},{type:s.v8.SALESFORCE,available:y,enabledForOrg:j,connected:w},{type:s.v8.ASANA,available:y,enabledForOrg:_,connected:A},{type:s.v8.FIDDLEHEAD,available:!1,enabledForOrg:k,connected:L},{type:s.v8.CANVAS,available:C&&S&&!0,enabledForOrg:M,connected:M,connectedActions:M?[p.r.EDIT_CANVAS,p.r.DISABLE_CANVAS]:[],disconnectedActions:[]}].filter(e=>e.available)}},96547:(e,t,n)=>{n.d(t,{vW:()=>N,R4:()=>S,qb:()=>j,ll:()=>w,eB:()=>y,W3:()=>_,lu:()=>x,p9:()=>b,p4:()=>C});var a=n(74813),r=n(1613),s=n(64328),i=n(45054),l=n(80688),o=n(68067),c=n(69287),d=n(4869),u=n(7620),m=n(24407),f=n(42605),p=n(44894),g=n(35580);function h(e){let t=window.atob(e),n=new ArrayBuffer(t.length),a=new Uint8Array(n);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return n}let v=m.Ay.object({uuid:m.Ay.string().uuid(),name:m.Ay.string(),url:m.Ay.string(),created_at:m.Ay.string().datetime(),updated_at:m.Ay.string().datetime(),custom_oauth_client_id:m.Ay.string().nullable().optional(),custom_oauth_client_secret:m.Ay.string().nullable().optional(),is_authenticated:m.Ay.boolean().default(!1)}),x=()=>{let{value:e}=(0,o.fS)("papi_mcp");return e},b=()=>{let{value:e}=(0,o.fS)("papi_mcp_remote");return e};function y(e,t){let n=x(),a=b();return(0,r.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers"),{queryKey:[l.lA,e],enabled:!a&&n&&!!e,...t,select:e=>m.z.array(v).parse(e)})}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,{track:s}=(0,a.st)(),i=(0,d.useQueryClient)(),o=b();return(0,r.L2)("/api/organizations/".concat(e,"/mcp/remote_servers"),"POST",{...t,onSuccess:(a,r,c)=>{var d;o&&A(i,e,a.uuid,"create",a),i.invalidateQueries({queryKey:[l.lA,e]}),i.invalidateQueries({queryKey:[l.qE,e]}),null==(d=t.onSuccess)||d.call(t,a,r,c),s({event_key:"claudeai.mcp.create_server",source:n.source,url:a.url,type:"remote"})}})}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,d.useQueryClient)(),s=b();return(0,r.L2)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"DELETE",{...n,onSuccess:(r,i,o)=>{var c;a.setQueryData([l.lA,e],e=>{var n;return null!=(n=null==e?void 0:e.filter(e=>e.uuid!==t))?n:[]}),(0,g.eg)(t),s&&A(a,e,t,"delete"),a.invalidateQueries({queryKey:[l.lA,e]}),a.invalidateQueries({queryKey:[l.qE,e]}),null==(c=n.onSuccess)||c.call(n,r,i,o)}})}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,d.useQueryClient)(),s=b();return(0,r.L2)("/api/organizations/".concat(e,"/mcp/logout/").concat(t),"POST",{...n,onSettled:()=>{(0,g.Ug)(t)},onSuccess:(r,i,o)=>{var c;s&&A(a,e,t,"logout",{connected:!1,tools:[],prompts:[],resources:[]}),a.invalidateQueries({queryKey:[l.lA,e]}),a.invalidateQueries({queryKey:[l.qE,e]}),null==(c=n.onSuccess)||c.call(n,r,i,o)}})}async function A(e,t,n,a,r){try{e.setQueryData([l.$d,t],e=>{let t=null!=e?e:[];switch(a){case"create":return[...t,r].sort((e,t)=>e.name.localeCompare(t.name));case"update":case"logout":return t.map(e=>e.uuid===n?{...e,...r}:e).sort((e,t)=>e.name.localeCompare(t.name));case"delete":return t.filter(e=>e.uuid!==n)}});let s=await fetch("/api/organizations/".concat(t,"/mcp/bootstrap")),i=await s.json();e.setQueryData([l.$d,t],i)}catch(e){(0,c.Cp)(e,{tags:{action:"updateBootstrapData"},extra:{orgUuid:t,action:a,serverUuid:n}})}}function C(e){let t=b(),{activeOrganization:n}=(0,s.YL)(),a=null==n?void 0:n.uuid;return(0,r.L2)("/api/organizations/".concat(a,"/chat_conversations/").concat(e,"/tool_approval"),"POST",{enabled:!!e&&!!a&&t})}function S(){let{mutateAsync:e}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=b(),{activeOrganization:n}=(0,s.YL)(),a=null==n?void 0:n.uuid;return(0,r.L2)("/api/organizations/".concat(a,"/mcp/attach_resource"),"POST",{enabled:t&&!!a,...e})}(),t=M(),{addError:n}=(0,i.Y)(),l=b(),o=function(){let{addError:e}=(0,i.Y)(),{track:t}=(0,a.st)(),{handleUpload:n}=(0,f.o)();return(0,u.useCallback)(async(a,r)=>{try{let e=(await (0,g.KU)(a).readResource({uri:r.uri},{timeout:15e3})).contents.map(e=>{let n;return"text"in e?(n=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(n=h(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([n],r.name,{type:e.mimeType})});e.length>0&&await n(e)}catch(t){e("Failed to upload resource. You can try again.",{error:t})}},[t,e,n])}();return(0,u.useCallback)(async a=>{let{serverUuid:r,resource:s,onClose:i}=a;if(!l)return o(r,s);try{let n=(0,g.KU)(r),a=await n.readResource({uri:s.uri},{timeout:15e3}),l=await e({resource:s,server_uuid:r,result:a});t(l),null==i||i()}catch(e){n("Failed to attach resource. You can try again.",{error:e,errorContext:{tags:{action:"attach_resource"},extra:{serverUuid:r}}})}},[e,t,n,l,o])}function N(e){let{mutateAsync:t}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=b(),{activeOrganization:n}=(0,s.YL)(),a=null==n?void 0:n.uuid;return(0,r.L2)("/api/organizations/".concat(a,"/mcp/attach_prompt"),"POST",{enabled:t&&!!a,...e})}(),n=M(),{addError:l}=(0,i.Y)(),o=b(),c=function(e){let{track:t}=(0,a.st)(),{addError:n}=(0,i.Y)(),{handleUpload:r}=(0,f.o)();return(0,u.useCallback)(async(a,s,i)=>{try{let n=await (0,g.KU)(a).getPrompt({name:s.name,arguments:i},{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(i).length,assistant_messages:n.messages.filter(e=>"assistant"===e.role).length,user_messages:n.messages.filter(e=>"user"===e.role).length,text_messages:n.messages.filter(e=>"text"===e.content.type).length,image_messages:n.messages.filter(e=>"image"===e.content.type).length});let l=(e,t)=>{let n=e=>{let t=p._F[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},a=e=>"".concat(s.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],a("txt"),{type:"text/plain"});case"image":{let t=n(e.content.mimeType);return new File([h(e.content.data)],a(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var r;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!=(r=t.mimeType)?r:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let a=n(t.mimeType);return new File([h(t.blob)],"".concat(t.uri,".").concat(a),{type:t.mimeType})}throw Error("Invalid resource content");case"audio":throw Error("Audio content not supported");case"resource_link":throw Error("Resource links are not supported")}};if(1===n.messages.length)await r([l(n.messages[0],0)]);else if(n.messages.length>1){let e=n.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[l(e,t)]:[]),t=n.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let n=JSON.stringify(t,null,2);e.push(new File([n],"".concat(s.name,"_messages.json"),{type:"application/json"}))}await r(e)}null==e||e()}catch(e){n("Failed to get prompt. You can try again.",{error:e})}},[t,n,r,e])}(e);return(0,u.useCallback)(async a=>{let{serverUuid:r,prompt:s,args:i}=a;if(!o)return c(r,s,i);try{let a=(0,g.KU)(r),l=await a.getPrompt({name:s.name,arguments:i},{timeout:15e3}),o=await t({prompt:s,arguments:i,server_uuid:r,result:l});n(o),null==e||e()}catch(e){l("Failed to attach prompt. You can try again.",{error:e,errorContext:{tags:{action:"attach_prompt"},extra:{serverUuid:r}}})}},[t,n,l,e,o,c])}function M(){let{setAttachments:e,setFiles:t}=(0,f.o)();return(0,u.useCallback)(n=>{let{files:a,attachments:r}=n;a&&a.length>0&&t(e=>{let t=new Set(e.map(e=>e.file_uuid));return[...e,...a.filter(e=>!t.has(e.file_uuid))]}),r&&r.length>0&&e(e=>Array.from(new Set([...e,...r].map(e=>JSON.stringify(e)))).map(e=>JSON.parse(e)))},[e,t])}m.z.object({name:m.z.string(),url:m.z.string(),custom_oauth_client_id:m.z.string().nullable().optional(),custom_oauth_client_secret:m.z.string().nullable().optional()}),m.z.object({name:m.z.string().optional().nullable(),url:m.z.string().optional().nullable()})},98649:(e,t,n)=>{n.d(t,{W:()=>i});var a=n(94295),r=n(64328),s=n(7620);function i(){let{mutate:e,isPending:t}=(0,a.Jy)(),{account:n}=(0,r.YL)();return{dismiss:(0,s.useCallback)(t=>{var a,r,s;n&&(null!=n&&null!=(r=n.settings)&&null!=(a=r.dismissed_claudeai_banners)&&a.some(e=>e.banner_id===t)||e({...n.settings,dismissed_claudeai_banners:[...(null==n||null==(s=n.settings)?void 0:s.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]}))},[n,e]),isDismissed:(0,s.useCallback)(e=>{var t,a;return(null==n||null==(a=n.settings)||null==(t=a.dismissed_claudeai_banners)?void 0:t.some(t=>t.banner_id===e))||!1},[n]),isPending:t}}},98802:(e,t,n)=>{n.d(t,{f:()=>u});var a=n(54568),r=n(64328),s=n(45054),i=n(23812),l=n(3075),o=n(10369),c=n(59666),d=n(96547);function u(e){var t;let{onClose:n,server:u}=e,m=(0,o.A)(),f=(0,r.mV)(),{activeOrganization:p}=(0,r.YL)(),{addError:g}=(0,s.Y)(),h=u.name,{mutate:v,isPending:x}=(0,d.ll)((null==p?void 0:p.uuid)||"",null!=(t=u.uuid)?t:"",{onSuccess:n,onError:e=>{g(m.formatMessage({defaultMessage:"Failed to disconnect server",id:"zX14mjXCQK"}),{error:e})}});return(0,a.jsxs)(l.aF,{isOpen:!0,onClose:n,title:f?m.formatMessage({defaultMessage:"Disconnect {serverName} for your team?",id:"QktyTo9HSH"},{serverName:h}):m.formatMessage({defaultMessage:"Disconnect {serverName}?",id:"qlhEu4xmhz"},{serverName:h}),modalSize:"lg",children:[(0,a.jsx)("p",{className:"mt-4 mb-6 text-text-200",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{defaultMessage:"This will disconnect {serverName} for everyone on your team.",id:"W/2zE+LA7Z",values:{serverName:h}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(c.A,{defaultMessage:"They’ll be able to continue previous chats referencing {serverName} content, but Claude won’t be able to access new content or perform new tasks.",id:"febCGTUpcY",values:{serverName:h}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{defaultMessage:"You can still continue previous chats that reference {serverName} content.",id:"xonrKBdErN",values:{serverName:h}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(c.A,{defaultMessage:"However, Claude won’t be able to access new content or perform new tasks.",id:"GXIZPZXIvC"})]})}),(0,a.jsxs)(l.vW,{layout:"right",children:[(0,a.jsx)(i.$,{onClick:n,variant:"secondary",children:(0,a.jsx)(c.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,a.jsx)(i.$,{loading:x,onClick:()=>v(),variant:"danger",children:(0,a.jsx)(c.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})})]})]})}}}]);